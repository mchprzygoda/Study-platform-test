var eN=Object.defineProperty,tN=Object.defineProperties;var nN=Object.getOwnPropertyDescriptors;var Ww=Object.getOwnPropertySymbols,rN=Object.getPrototypeOf,iN=Object.prototype.hasOwnProperty,sN=Object.prototype.propertyIsEnumerable,oN=Reflect.get;var Kw=(n,e,t)=>e in n?eN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})iN.call(e,t)&&Kw(n,t,e[t]);if(Ww)for(var t of Ww(e))sN.call(e,t)&&Kw(n,t,e[t]);return n},le=(n,e)=>tN(n,nN(e));var _r=(n,e,t)=>oN(rN(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var s=u=>{try{a(t.next(u))}catch(l){i(l)}},o=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((t=t.apply(n,e)).next())});function Qw(n,e){return Object.is(n,e)}var He=null,Du=!1,bu=1,Vn=Symbol("SIGNAL");function de(n){let e=He;return He=n,e}function Yw(){return He}var pa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Qf(n){if(Du)throw new Error("");if(He===null)return;He.consumerOnSignalRead(n);let e=He.nextProducerIndex++;if(Au(He),e<He.producerNode.length&&He.producerNode[e]!==n&&fa(He)){let t=He.producerNode[e];Su(t,He.producerIndexOfThis[e])}He.producerNode[e]!==n&&(He.producerNode[e]=n,He.producerIndexOfThis[e]=fa(He)?eE(n,He,e):0),He.producerLastReadVersion[e]=n.version}function aN(){bu++}function Jw(n){if(!(fa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===bu)){if(!n.producerMustRecompute(n)&&!Jf(n)){n.dirty=!1,n.lastCleanEpoch=bu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=bu}}function Zw(n){if(n.liveConsumerNode===void 0)return;let e=Du;Du=!0;try{for(let t of n.liveConsumerNode)t.dirty||cN(t)}finally{Du=e}}function Xw(){return He?.consumerAllowSignalWrites!==!1}function cN(n){n.dirty=!0,Zw(n),n.consumerMarkedDirty?.(n)}function Cu(n){return n&&(n.nextProducerIndex=0),de(n)}function Yf(n,e){if(de(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(fa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Su(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Jf(n){Au(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Jw(t),r!==t.version))return!0}return!1}function Zf(n){if(Au(n),fa(n))for(let e=0;e<n.producerNode.length;e++)Su(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function eE(n,e,t){if(tE(n),n.liveConsumerNode.length===0&&nE(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=eE(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Su(n,e){if(tE(n),n.liveConsumerNode.length===1&&nE(n))for(let r=0;r<n.producerNode.length;r++)Su(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Au(i),i.producerIndexOfThis[r]=e}}function fa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Au(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function tE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function nE(n){return n.producerNode!==void 0}function rE(n){let e=Object.create(uN);e.computation=n;let t=()=>{if(Jw(e),Qf(e),e.value===Tu)throw e.error;return e.value};return t[Vn]=e,t}var Wf=Symbol("UNSET"),Kf=Symbol("COMPUTING"),Tu=Symbol("ERRORED"),uN=le(F({},pa),{value:Wf,dirty:!0,error:null,equal:Qw,producerMustRecompute(n){return n.value===Wf||n.value===Kf},producerRecomputeValue(n){if(n.value===Kf)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Kf;let t=Cu(n),r;try{r=n.computation()}catch(i){r=Tu,n.error=i}finally{Yf(n,t)}if(e!==Wf&&e!==Tu&&r!==Tu&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function lN(){throw new Error}var iE=lN;function sE(){iE()}function oE(n){iE=n}var dN=null;function aE(n){let e=Object.create(uE);e.value=n;let t=()=>(Qf(e),e.value);return t[Vn]=e,t}function Xf(n,e){Xw()||sE(),n.equal(n.value,e)||(n.value=e,hN(n))}function cE(n,e){Xw()||sE(),Xf(n,e(n.value))}var uE=le(F({},pa),{equal:Qw,value:void 0});function hN(n){n.version++,aN(),Zw(n),dN?.()}function ne(n){return typeof n=="function"}function as(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ru=as(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function li(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(s){e=s instanceof Ru?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{lE(s)}catch(o){e=e??[],o instanceof Ru?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ru(e)}}add(e){var t;if(e&&e!==this)if(this.closed)lE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&li(t,e)}remove(e){let{_finalizers:t}=this;t&&li(t,e),e instanceof n&&e._removeParent(this)}};ke.EMPTY=(()=>{let n=new ke;return n.closed=!0,n})();var ep=ke.EMPTY;function Mu(n){return n instanceof ke||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function lE(n){ne(n)?n():n.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var cs={setTimeout(n,e,...t){let{delegate:r}=cs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=cs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Nu(n){cs.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(n);else throw n})}function ga(){}var dE=tp("C",void 0,void 0);function hE(n){return tp("E",void 0,n)}function fE(n){return tp("N",n,void 0)}function tp(n,e,t){return{kind:n,value:e,error:t}}var di=null;function us(n){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!di;if(e&&(di={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=di;if(di=null,t)throw r}}else n()}function pE(n){Xt.useDeprecatedSynchronousErrorHandling&&di&&(di.errorThrown=!0,di.error=n)}var hi=class extends ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Mu(e)&&e.add(this)):this.destination=gN}static create(e,t,r){return new ls(e,t,r)}next(e){this.isStopped?rp(fE(e),this):this._next(e)}error(e){this.isStopped?rp(hE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?rp(dE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fN=Function.prototype.bind;function np(n,e){return fN.call(n,e)}var ip=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){xu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){xu(r)}else xu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){xu(t)}}},ls=class extends hi{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&np(e.next,s),error:e.error&&np(e.error,s),complete:e.complete&&np(e.complete,s)}):i=e}this.destination=new ip(i)}};function xu(n){Xt.useDeprecatedSynchronousErrorHandling?pE(n):Nu(n)}function pN(n){throw n}function rp(n,e){let{onStoppedNotification:t}=Xt;t&&cs.setTimeout(()=>t(n,e))}var gN={closed:!0,next:ga,error:pN,complete:ga};var ds=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(n){return n}function Pu(...n){return sp(n)}function sp(n){return n.length===0?Nt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=yN(t)?t:new ls(t,r,i);return us(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=gE(r),new r((i,s)=>{let o=new ls({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ds](){return this}pipe(...t){return sp(t)(this)}toPromise(t){return t=gE(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function gE(n){var e;return(e=n??Xt.Promise)!==null&&e!==void 0?e:Promise}function mN(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function yN(n){return n&&n instanceof hi||mN(n)&&Mu(n)}function op(n){return ne(n?.lift)}function ge(n){return e=>{if(op(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new ap(n,e,t,r,i)}var ap=class extends hi{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function hs(){return ge((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var fs=class extends ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,op(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ke;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ke.EMPTY)}return e}refCount(){return hs()(this)}};var mE=as(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class n extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ou(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new mE}next(t){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ep:(this.currentObservers=null,s.push(t),new ke(()=>{this.currentObservers=null,li(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ie;return t.source=this,t}}return n.create=(e,t)=>new Ou(e,t),n})(),Ou=class extends Xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ep}};var et=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cp={now(){return(cp.delegate||Date).now()},delegate:void 0};var ku=class extends ke{constructor(e,t){super()}schedule(e,t=0){return this}};var ma={setInterval(n,e,...t){let{delegate:r}=ma;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ma;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ps=class extends ku{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ma.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ma.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,li(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var gs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};gs.now=cp.now;var ms=class extends gs{constructor(e,t=gs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var up=new ms(ps);var Fu=class extends ps{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Lu=class extends ms{};var lp=new Lu(Fu);var xt=new ie(n=>n.complete());function yE(n){return n&&ne(n.schedule)}function vE(n){return n[n.length-1]}function Vu(n){return ne(vE(n))?n.pop():void 0}function Ir(n){return yE(vE(n))?n.pop():void 0}function dp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function IE(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function _E(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fi(n){return this instanceof fi?(this.v=n,this):new fi(n)}function wE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(C){return Promise.resolve(C).then(m,p)}}function a(m,C){r[m]&&(i[m]=function(M){return new Promise(function(R,O){s.push([m,M,R,O])>1||u(m,M)})},C&&(i[m]=C(i[m])))}function u(m,C){try{l(r[m](C))}catch(M){y(s[0][3],M)}}function l(m){m.value instanceof fi?Promise.resolve(m.value.v).then(h,p):y(s[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function y(m,C){m(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function EE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _E=="function"?_E(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var ju=n=>n&&typeof n.length=="number"&&typeof n!="function";function Uu(n){return ne(n?.then)}function Bu(n){return ne(n[ds])}function $u(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function Hu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qu=vN();function zu(n){return ne(n?.[qu])}function Gu(n){return wE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield fi(t.read());if(i)return yield fi(void 0);yield yield fi(r)}}finally{t.releaseLock()}})}function Wu(n){return ne(n?.getReader)}function Le(n){if(n instanceof ie)return n;if(n!=null){if(Bu(n))return _N(n);if(ju(n))return IN(n);if(Uu(n))return wN(n);if($u(n))return DE(n);if(zu(n))return EN(n);if(Wu(n))return DN(n)}throw Hu(n)}function _N(n){return new ie(e=>{let t=n[ds]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IN(n){return new ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function wN(n){return new ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Nu)})}function EN(n){return new ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function DE(n){return new ie(e=>{bN(n,e).catch(t=>e.error(t))})}function DN(n){return DE(Gu(n))}function bN(n,e){var t,r,i,s;return IE(this,void 0,void 0,function*(){try{for(t=EE(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Tt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function wr(n,e=0){return ge((t,r)=>{t.subscribe(he(r,i=>Tt(r,n,()=>r.next(i),e),()=>Tt(r,n,()=>r.complete(),e),i=>Tt(r,n,()=>r.error(i),e)))})}function Er(n,e=0){return ge((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function bE(n,e){return Le(n).pipe(Er(e),wr(e))}function TE(n,e){return Le(n).pipe(Er(e),wr(e))}function CE(n,e){return new ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function SE(n,e){return new ie(t=>{let r;return Tt(t,e,()=>{r=n[qu](),Tt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function Ku(n,e){if(!n)throw new Error("Iterable cannot be null");return new ie(t=>{Tt(t,e,()=>{let r=n[Symbol.asyncIterator]();Tt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function AE(n,e){return Ku(Gu(n),e)}function RE(n,e){if(n!=null){if(Bu(n))return bE(n,e);if(ju(n))return CE(n,e);if(Uu(n))return TE(n,e);if($u(n))return Ku(n,e);if(zu(n))return SE(n,e);if(Wu(n))return AE(n,e)}throw Hu(n)}function we(n,e){return e?RE(n,e):Le(n)}function W(...n){let e=Ir(n);return we(n,e)}function ys(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new ie(e?i=>e.schedule(r,0,i):r)}function hp(n){return!!n&&(n instanceof ie||ne(n.lift)&&ne(n.subscribe))}var jn=as(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(n,e){return ge((t,r)=>{let i=0;t.subscribe(he(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:TN}=Array;function CN(n,e){return TN(e)?n(...e):n(e)}function Qu(n){return Q(e=>CN(n,e))}var{isArray:SN}=Array,{getPrototypeOf:AN,prototype:RN,keys:MN}=Object;function Yu(n){if(n.length===1){let e=n[0];if(SN(e))return{args:e,keys:null};if(NN(e)){let t=MN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function NN(n){return n&&typeof n=="object"&&AN(n)===RN}function Ju(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ya(...n){let e=Ir(n),t=Vu(n),{args:r,keys:i}=Yu(n);if(r.length===0)return we([],e);let s=new ie(xN(r,e,i?o=>Ju(i,o):Nt));return t?s.pipe(Qu(t)):s}function xN(n,e,t=Nt){return r=>{ME(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)ME(e,()=>{let l=we(n[u],e),h=!1;l.subscribe(he(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function ME(n,e,t){n?Tt(t,n,e):e()}function NE(n,e,t,r,i,s,o,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},m=M=>l<r?C(M):u.push(M),C=M=>{s&&e.next(M),l++;let R=!1;Le(t(M,h++)).subscribe(he(e,O=>{i?.(O),s?m(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();o?Tt(e,o,()=>C(O)):C(O)}y()}catch(O){e.error(O)}}))};return n.subscribe(he(e,m,()=>{p=!0,y()})),()=>{a?.()}}function Ve(n,e,t=1/0){return ne(e)?Ve((r,i)=>Q((s,o)=>e(r,s,i,o))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),ge((r,i)=>NE(r,i,n,t)))}function vs(n=1/0){return Ve(Nt,n)}function xE(){return vs(1)}function _s(...n){return xE()(we(n,Ir(n)))}function Zu(n){return new ie(e=>{Le(n()).subscribe(e)})}function fp(...n){let e=Vu(n),{args:t,keys:r}=Yu(n),i=new ie(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Le(t[h]).subscribe(he(s,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Ju(r,a):a),s.complete())}))}});return e?i.pipe(Qu(e)):i}function mt(n,e){return ge((t,r)=>{let i=0;t.subscribe(he(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Dr(n){return ge((e,t)=>{let r=null,i=!1,s;r=e.subscribe(he(t,void 0,void 0,o=>{s=Le(n(o,Dr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function PE(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(he(o,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Un(n,e){return ne(e)?Ve(n,e,1):Ve(n,1)}function br(n){return ge((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $t(n){return n<=0?()=>xt:ge((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function pp(n){return Q(()=>n)}function Xu(n=PN){return ge((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function PN(){return new jn}function pi(n){return ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function fn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,s)=>n(i,s,r)):Nt,$t(1),t?br(e):Xu(()=>new jn))}function Is(n){return n<=0?()=>xt:ge((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,s)=>n(i,s,r)):Nt,Is(1),t?br(e):Xu(()=>new jn))}function el(n,e){return ge(PE(n,e,arguments.length>=2,!0))}function tl(...n){let e=Ir(n);return ge((t,r)=>{(e?_s(n,t,e):_s(n,t)).subscribe(r)})}function tt(n,e){return ge((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(he(r,u=>{i?.unsubscribe();let l=0,h=s++;Le(n(u,h)).subscribe(i=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function mp(n){return ge((e,t)=>{Le(n).subscribe(he(t,()=>t.complete(),ga)),!t.closed&&e.subscribe(t)})}function je(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?ge((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(he(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Nt}var ON="https://g.co/ng/security#xss",H=class extends Error{constructor(e,t){super(Ol(e,t)),this.code=e}};function Ol(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Na(n){return{toString:n}.toString()}var nl="__parameters__";function kN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function gD(n,e,t){return Na(()=>{let r=kN(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(nl)?u[nl]:Object.defineProperty(u,nl,{value:[]})[nl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function FN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function St(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(St).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function OE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var LN=Se({__forward_ref__:Se});function _n(n){return n.__forward_ref__=_n,n.toString=function(){return St(this())},n}function yt(n){return mD(n)?n():n}function mD(n){return typeof n=="function"&&n.hasOwnProperty(LN)&&n.__forward_ref__===_n}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function In(n){return{providers:n.providers||[],imports:n.imports||[]}}function kl(n){return kE(n,vD)||kE(n,_D)}function yD(n){return kl(n)!==null}function kE(n,e){return n.hasOwnProperty(e)?n[e]:null}function VN(n){let e=n&&(n[vD]||n[_D]);return e||null}function FE(n){return n&&(n.hasOwnProperty(LE)||n.hasOwnProperty(jN))?n[LE]:null}var vD=Se({\u0275prov:Se}),LE=Se({\u0275inj:Se}),_D=Se({ngInjectableDef:Se}),jN=Se({ngInjectorDef:Se}),U=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ID(n){return n&&!!n.\u0275providers}var UN=Se({\u0275cmp:Se}),BN=Se({\u0275dir:Se}),$N=Se({\u0275pipe:Se}),HN=Se({\u0275mod:Se}),dl=Se({\u0275fac:Se}),_a=Se({__NG_ELEMENT_ID__:Se}),VE=Se({__NG_ENV_ID__:Se});function Ia(n){return typeof n=="string"?n:n==null?"":String(n)}function qN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ia(n)}function zN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new H(-200,n)}function bg(n,e){throw new H(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Np;function wD(){return Np}function Ct(n){let e=Np;return Np=n,e}function ED(n,e,t){let r=kl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;bg(n,"Injector")}var GN={},wa=GN,xp="__NG_DI_FLAG__",hl="ngTempTokenPath",WN="ngTokenPath",KN=/\n/gm,QN="\u0275",jE="__source",Ts;function YN(){return Ts}function Tr(n){let e=Ts;return Ts=n,e}function JN(n,e=ae.Default){if(Ts===void 0)throw new H(-203,!1);return Ts===null?ED(n,void 0,e):Ts.get(n,e&ae.Optional?null:void 0,e)}function z(n,e=ae.Default){return(wD()||JN)(yt(n),e)}function N(n,e=ae.Default){return z(n,Fl(e))}function Fl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Pp(n){let e=[];for(let t=0;t<n.length;t++){let r=yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=ae.Default;for(let o=0;o<r.length;o++){let a=r[o],u=ZN(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(z(i,s))}else e.push(z(r))}return e}function DD(n,e){return n[xp]=e,n.prototype[xp]=e,n}function ZN(n){return n[xp]}function XN(n,e,t,r){let i=n[hl];throw e[jE]&&i.unshift(e[jE]),n.message=ex(`
`+n.message,i,t,r),n[WN]=i,n[hl]=null,n}function ex(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==QN?n.slice(2):n;let i=St(e);if(Array.isArray(e))i=e.map(St).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):St(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(KN,`
  `)}`}var Et=DD(gD("Optional"),8);var bD=DD(gD("SkipSelf"),4);function mi(n,e){let t=n.hasOwnProperty(dl);return t?n[dl]:null}function Tg(n,e){n.forEach(t=>Array.isArray(t)?Tg(t,e):e(t))}function TD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function tx(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function nx(n,e,t){let r=xa(n,e);return r>=0?n[r|1]=t:(r=~r,tx(n,r,e,t)),r}function yp(n,e){let t=xa(n,e);if(t>=0)return n[t|1]}function xa(n,e){return rx(n,e,1)}function rx(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Ss={},Ht=[],As=new U(""),CD=new U("",-1),SD=new U(""),pl=class{get(e,t=wa){if(t===wa){let r=new Error(`NullInjectorError: No provider for ${St(e)}!`);throw r.name="NullInjectorError",r}return t}},AD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(AD||{}),mn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(mn||{}),Ar=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ar||{});function ix(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Op(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];ox(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function sx(n){return n===3||n===4||n===6}function ox(n){return n.charCodeAt(0)===64}function Ea(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?UE(n,t,i,null,e[++r]):UE(n,t,i,null,null))}}return n}function UE(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var RD="ng-template";function ax(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ix(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Cg(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Cg(n){return n.type===4&&n.value!==RD}function cx(n,e,t){let r=n.type===4&&!t?RD:n.value;return e===r}function ux(n,e,t){let r=4,i=n.attrs,s=i!==null?hx(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!en(r)&&!en(u))return!1;if(o&&en(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!cx(n,u,t)||u===""&&e.length===1){if(en(r))return!1;o=!0}}else if(r&8){if(i===null||!ax(n,i,u,t)){if(en(r))return!1;o=!0}}else{let l=e[++a],h=lx(u,i,Cg(n),t);if(h===-1){if(en(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(en(r))return!1;o=!0}}}}return en(r)||o}function en(n){return(n&1)===0}function lx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return fx(e,n)}function dx(n,e,t=!1){for(let r=0;r<e.length;r++)if(ux(n,e[r],t))return!0;return!1}function hx(n){for(let e=0;e<n.length;e++){let t=n[e];if(sx(t))return e}return n.length}function fx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function BE(n,e){return n?":not("+e.trim()+")":e}function px(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!en(o)&&(e+=BE(s,i),i=""),r=o,s=s||!en(r);t++}return i!==""&&(e+=BE(s,i)),e}function gx(n){return n.map(px).join(",")}function mx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!en(i))break;i=s}r++}return{attrs:e,classes:t}}function We(n){return Na(()=>{let e=kD(n),t=le(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===AD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||mn.Emulated,styles:n.styles||Ht,_:null,schemas:n.schemas||null,tView:null,id:""});FD(t);let r=n.dependencies;return t.directiveDefs=HE(r,!1),t.pipeDefs=HE(r,!0),t.id=_x(t),t})}function yx(n){return Rr(n)||ND(n)}function vx(n){return n!==null}function wn(n){return Na(()=>({type:n.type,bootstrap:n.bootstrap||Ht,declarations:n.declarations||Ht,imports:n.imports||Ht,exports:n.exports||Ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $E(n,e){if(n==null)return Ss;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Ar.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Ar.None?[r,a]:r,e[s]=o):t[s]=r}return t}function nt(n){return Na(()=>{let e=kD(n);return FD(e),e})}function MD(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Rr(n){return n[UN]||null}function ND(n){return n[BN]||null}function xD(n){return n[$N]||null}function PD(n){let e=Rr(n)||ND(n)||xD(n);return e!==null?e.standalone:!1}function OD(n,e){let t=n[HN]||null;if(!t&&e===!0)throw new Error(`Type ${St(n)} does not have '\u0275mod' property.`);return t}function kD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ss,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$E(n.inputs,e),outputs:$E(n.outputs),debugInfo:null}}function FD(n){n.features?.forEach(e=>e(n))}function HE(n,e){if(!n)return null;let t=e?xD:yx;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(vx)}function _x(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rn(n){return{\u0275providers:n}}function Ix(...n){return{\u0275providers:LD(!0,n),\u0275fromNgModule:!0}}function LD(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Tg(e,o=>{let a=o;kp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&VD(i,s),t}function VD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Sg(i,s=>{e(s,r)})}}function kp(n,e,t,r){if(n=yt(n),!n)return!1;let i=null,s=FE(n),o=!s&&Rr(n);if(!s&&!o){let u=n.ngModule;if(s=FE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)kp(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Tg(s.imports,h=>{kp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&VD(l,e)}if(!a){let l=mi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ht},i),e({provide:SD,useValue:i,multi:!0},i),e({provide:As,useValue:()=>z(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=n;Sg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Sg(n,e){for(let t of n)ID(t)&&(t=t.\u0275providers),Array.isArray(t)?Sg(t,e):e(t)}var wx=Se({provide:String,useValue:Se});function jD(n){return n!==null&&typeof n=="object"&&wx in n}function Ex(n){return!!(n&&n.useExisting)}function Dx(n){return!!(n&&n.useFactory)}function Rs(n){return typeof n=="function"}function bx(n){return!!n.useClass}var Ll=new U(""),ol={},Tx={},vp;function Ag(){return vp===void 0&&(vp=new pl),vp}var It=class{},Da=class extends It{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lp(e,o=>this.processProvider(o)),this.records.set(CD,ws(void 0,this)),i.has("environment")&&this.records.set(It,ws(void 0,this));let s=this.records.get(Ll);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(SD,Ht,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=de(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Tr(this),r=Ct(void 0),i;try{return e()}finally{Tr(t),Ct(r)}}get(e,t=wa,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(VE))return e[VE](this);r=Fl(r);let i,s=Tr(this),o=Ct(void 0);try{if(!(r&ae.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=Mx(e)&&kl(e);l&&this.injectableDefInScope(l)?u=ws(Fp(e),ol):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ae.Self?Ag():this.parent;return t=r&ae.Optional&&t===wa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[hl]=a[hl]||[]).unshift(St(e)),s)throw a;return XN(a,e,"R3InjectorError",this.source)}else throw a}finally{Ct(o),Tr(s)}}resolveInjectorInitializers(){let e=de(null),t=Tr(this),r=Ct(void 0),i;try{let s=this.get(As,Ht,ae.Self);for(let o of s)o()}finally{Tr(t),Ct(r),de(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(St(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){e=yt(e);let t=Rs(e)?e:yt(e&&e.provide),r=Sx(e);if(!Rs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ws(void 0,ol,!0),i.factory=()=>Pp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=de(null);try{return t.value===ol&&(t.value=Tx,t.value=t.factory()),typeof t.value=="object"&&t.value&&Rx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{de(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Fp(n){let e=kl(n),t=e!==null?e.factory:mi(n);if(t!==null)return t;if(n instanceof U)throw new H(204,!1);if(n instanceof Function)return Cx(n);throw new H(204,!1)}function Cx(n){if(n.length>0)throw new H(204,!1);let t=VN(n);return t!==null?()=>t.factory(n):()=>new n}function Sx(n){if(jD(n))return ws(void 0,n.useValue);{let e=UD(n);return ws(e,ol)}}function UD(n,e,t){let r;if(Rs(n)){let i=yt(n);return mi(i)||Fp(i)}else if(jD(n))r=()=>yt(n.useValue);else if(Dx(n))r=()=>n.useFactory(...Pp(n.deps||[]));else if(Ex(n))r=()=>z(yt(n.useExisting));else{let i=yt(n&&(n.useClass||n.provide));if(Ax(n))r=()=>new i(...Pp(n.deps));else return mi(i)||Fp(i)}return r}function ws(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Ax(n){return!!n.deps}function Rx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Mx(n){return typeof n=="function"||typeof n=="object"&&n instanceof U}function Lp(n,e){for(let t of n)Array.isArray(t)?Lp(t,e):t&&ID(t)?Lp(t.\u0275providers,e):e(t)}function zt(n,e){n instanceof Da&&n.assertNotDestroyed();let t,r=Tr(n),i=Ct(void 0);try{return e()}finally{Tr(r),Ct(i)}}function BD(){return wD()!==void 0||YN()!=null}function Rg(n){if(!BD())throw new H(-203,!1)}function Nx(n){return typeof n=="function"}var zn=0,se=1,X=2,wt=3,tn=4,sn=5,ba=6,gl=7,vt=8,Ms=9,Bn=10,qe=11,Ta=12,qE=13,Bs=14,nn=15,Ns=16,Es=17,xs=18,Vl=19,$D=20,Cr=21,_p=22,qt=23,Pt=25,HD=1;var yi=7,ml=8,yl=9,_t=10,vl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(vl||{});function Sr(n){return Array.isArray(n)&&typeof n[HD]=="object"}function Gn(n){return Array.isArray(n)&&n[HD]===!0}function qD(n){return(n.flags&4)!==0}function jl(n){return n.componentOffset>-1}function Mg(n){return(n.flags&1)===1}function Mr(n){return!!n.template}function Vp(n){return(n[X]&512)!==0}var jp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function zD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Wn(){return GD}function GD(n){return n.type.prototype.ngOnChanges&&(n.setInput=Px),xx}Wn.ngInherit=!0;function xx(){let n=KD(this),e=n?.current;if(e){let t=n.previous;if(t===Ss)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Px(n,e,t,r,i){let s=this.declaredInputs[r],o=KD(n)||Ox(n,{previous:Ss,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new jp(l&&l.currentValue,t,u===Ss),zD(n,e,i,t)}var WD="__ngSimpleChanges__";function KD(n){return n[WD]||null}function Ox(n,e){return n[WD]=e}var zE=null;var pn=function(n,e,t){zE?.(n,e,t)},QD="svg",kx="math";function yn(n){for(;Array.isArray(n);)n=n[zn];return n}function YD(n,e){return yn(e[n])}function Gt(n,e){return yn(e[n.index])}function Ng(n,e){return n.data[e]}function Fx(n,e){return n[e]}function xr(n,e){let t=e[n];return Sr(t)?t:t[zn]}function xg(n){return(n[X]&128)===128}function Lx(n){return Gn(n[wt])}function Ps(n,e){return e==null?null:n[e]}function JD(n){n[Es]=0}function ZD(n){n[X]&1024||(n[X]|=1024,xg(n)&&Bl(n))}function Vx(n,e){for(;n>0;)e=e[Bs],n--;return e}function Ul(n){return!!(n[X]&9216||n[qt]?.dirty)}function Up(n){n[Bn].changeDetectionScheduler?.notify(8),n[X]&64&&(n[X]|=1024),Ul(n)&&Bl(n)}function Bl(n){n[Bn].changeDetectionScheduler?.notify(0);let e=vi(n);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!xg(e)));)e=vi(e)}function XD(n,e){if((n[X]&256)===256)throw new H(911,!1);n[Cr]===null&&(n[Cr]=[]),n[Cr].push(e)}function jx(n,e){if(n[Cr]===null)return;let t=n[Cr].indexOf(e);t!==-1&&n[Cr].splice(t,1)}function vi(n){let e=n[wt];return Gn(e)?e[wt]:e}var ce={lFrame:ub(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var eb=!1;function Ux(){return ce.lFrame.elementDepthCount}function Bx(){ce.lFrame.elementDepthCount++}function $x(){ce.lFrame.elementDepthCount--}function tb(){return ce.bindingsEnabled}function Hx(){return ce.skipHydrationRootTNode!==null}function qx(n){return ce.skipHydrationRootTNode===n}function zx(){ce.skipHydrationRootTNode=null}function De(){return ce.lFrame.lView}function Dt(){return ce.lFrame.tView}function Ot(){let n=nb();for(;n!==null&&n.type===64;)n=n.parent;return n}function nb(){return ce.lFrame.currentTNode}function Gx(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Pa(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function rb(){return ce.lFrame.isParent}function Wx(){ce.lFrame.isParent=!1}function ib(){return eb}function GE(n){eb=n}function Kx(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Qx(){return ce.lFrame.bindingIndex}function Yx(n){return ce.lFrame.bindingIndex=n}function $s(){return ce.lFrame.bindingIndex++}function sb(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Jx(){return ce.lFrame.inI18n}function Zx(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bp(e)}function Xx(){return ce.lFrame.currentDirectiveIndex}function Bp(n){ce.lFrame.currentDirectiveIndex=n}function eP(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ob(n){ce.lFrame.currentQueryIndex=n}function tP(n){let e=n[se];return e.type===2?e.declTNode:e.type===1?n[sn]:null}function ab(n,e,t){if(t&ae.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=tP(s),i===null||(s=s[Bs],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=ce.lFrame=cb();return r.currentTNode=e,r.lView=n,!0}function Pg(n){let e=cb(),t=n[se];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function cb(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?ub(n):e}function ub(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function lb(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var db=lb;function Og(){let n=lb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function nP(n){return(ce.lFrame.contextLView=Vx(n,ce.lFrame.contextLView))[vt]}function Pr(){return ce.lFrame.selectedIndex}function _i(n){ce.lFrame.selectedIndex=n}function kg(){let n=ce.lFrame;return Ng(n.tView,n.selectedIndex)}function Oa(){ce.lFrame.currentNamespace=QD}function ka(){rP()}function rP(){ce.lFrame.currentNamespace=null}function iP(){return ce.lFrame.currentNamespace}var hb=!0;function Fg(){return hb}function Lg(n){hb=n}function sP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=GD(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Vg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function al(n,e,t){fb(n,e,3,t)}function cl(n,e,t,r){(n[X]&3)===t&&fb(n,e,t,r)}function Ip(n,e){let t=n[X];(t&3)===e&&(t&=16383,t+=1,n[X]=t)}function fb(n,e,t,r){let i=r!==void 0?n[Es]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Es]+=65536),(a<s||s==-1)&&(oP(n,t,e,u),n[Es]=(n[Es]&4294901760)+u+2),u++}function WE(n,e){pn(4,n,e);let t=de(null);try{e.call(n)}finally{de(t),pn(5,n,e)}}function oP(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[X]>>14<n[Es]>>16&&(n[X]&3)===e&&(n[X]+=16384,WE(a,s)):WE(a,s)}var Cs=-1,Ii=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function aP(n){return n instanceof Ii}function cP(n){return(n.flags&8)!==0}function uP(n){return(n.flags&16)!==0}var wp={},$p=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Fl(r);let i=this.injector.get(e,wp,r);return i!==wp||t===wp?i:this.parentInjector.get(e,t,r)}};function pb(n){return n!==Cs}function _l(n){return n&32767}function lP(n){return n>>16}function Il(n,e){let t=lP(n),r=e;for(;t>0;)r=r[Bs],t--;return r}var Hp=!0;function wl(n){let e=Hp;return Hp=n,e}var dP=256,gb=dP-1,mb=5,hP=0,gn={};function fP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(_a)&&(r=t[_a]),r==null&&(r=t[_a]=hP++);let i=r&gb,s=1<<i;e.data[n+(i>>mb)]|=s}function El(n,e){let t=yb(n,e);if(t!==-1)return t;let r=e[se];r.firstCreatePass&&(n.injectorIndex=e.length,Ep(r.data,n),Ep(e,null),Ep(r.blueprint,null));let i=jg(n,e),s=n.injectorIndex;if(pb(i)){let o=_l(i),a=Il(i,e),u=a[se].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Ep(n,e){n.push(0,0,0,0,0,0,0,0,e)}function yb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function jg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Eb(i),r===null)return Cs;if(t++,i=i[Bs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Cs}function qp(n,e,t){fP(n,e,t)}function vb(n,e,t){if(t&ae.Optional||n!==void 0)return n;bg(e,"NodeInjector")}function _b(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[Ms],s=Ct(void 0);try{return i?i.get(e,r,t&ae.Optional):ED(e,r,t&ae.Optional)}finally{Ct(s)}}return vb(r,e,t)}function Ib(n,e,t,r=ae.Default,i){if(n!==null){if(e[X]&2048&&!(r&ae.Self)){let o=vP(n,e,t,r,gn);if(o!==gn)return o}let s=wb(n,e,t,r,gn);if(s!==gn)return s}return _b(e,t,r,i)}function wb(n,e,t,r,i){let s=mP(t);if(typeof s=="function"){if(!ab(e,n,r))return r&ae.Host?vb(i,t,r):_b(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ae.Optional))bg(t);else return o}finally{db()}}else if(typeof s=="number"){let o=null,a=yb(n,e),u=Cs,l=r&ae.Host?e[nn][sn]:null;for((a===-1||r&ae.SkipSelf)&&(u=a===-1?jg(n,e):e[a+8],u===Cs||!QE(r,!1)?a=-1:(o=e[se],a=_l(u),e=Il(u,e)));a!==-1;){let h=e[se];if(KE(s,a,h.data)){let p=pP(a,e,t,o,r,l);if(p!==gn)return p}u=e[a+8],u!==Cs&&QE(r,e[se].data[a+8]===l)&&KE(s,a,e)?(o=h,a=_l(u),e=Il(u,e)):a=-1}}return i}function pP(n,e,t,r,i,s){let o=e[se],a=o.data[n+8],u=r==null?jl(a)&&Hp:r!=o&&(a.type&3)!==0,l=i&ae.Host&&s===a,h=gP(a,o,t,u,l);return h!==null?Os(e,o,h,a):gn}function gP(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,u=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:l;for(let m=p;m<y;m++){let C=o[m];if(m<u&&t===C||m>=u&&C.type===t)return m}if(i){let m=o[u];if(m&&Mr(m)&&m.type===t)return u}return null}function Os(n,e,t,r){let i=n[t],s=e.data;if(aP(i)){let o=i;o.resolving&&zN(qN(s[t]));let a=wl(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Ct(o.injectImpl):null,h=ab(n,r,ae.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&sP(t,s[t],e)}finally{l!==null&&Ct(l),wl(a),o.resolving=!1,db()}}return i}function mP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_a)?n[_a]:void 0;return typeof e=="number"?e>=0?e&gb:yP:e}function KE(n,e,t){let r=1<<n;return!!(t[e+(n>>mb)]&r)}function QE(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var gi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ib(this._tNode,this._lView,e,Fl(r),t)}};function yP(){return new gi(Ot(),De())}function Or(n){return Na(()=>{let e=n.prototype.constructor,t=e[dl]||zp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[dl]||zp(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function zp(n){return mD(n)?()=>{let e=zp(yt(n));return e&&e()}:mi(n)}function vP(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[X]&2048&&!(o[X]&512);){let a=wb(s,o,t,r|ae.Self,gn);if(a!==gn)return a;let u=s.parent;if(!u){let l=o[$D];if(l){let h=l.get(t,gn,r);if(h!==gn)return h}u=Eb(o),o=o[Bs]}s=u}return i}function Eb(n){let e=n[se],t=e.type;return t===2?e.declTNode:t===1?n[sn]:null}function YE(n,e=null,t=null,r){let i=Db(n,e,t,r);return i.resolveInjectorInitializers(),i}function Db(n,e=null,t=null,r,i=new Set){let s=[t||Ht,Ix(n)];return r=r||(typeof n=="object"?void 0:St(n)),new Da(s,e||Ag(),r||null,i)}var Ge=class n{static{this.THROW_IF_NOT_FOUND=wa}static{this.NULL=new pl}static create(e,t){if(Array.isArray(e))return YE({name:""},t,e,"");{let r=e.name??"";return YE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=B({token:n,providedIn:"any",factory:()=>z(CD)})}static{this.__NG_ELEMENT_ID__=-1}};var _P=new U("");_P.__NG_ELEMENT_ID__=n=>{let e=Ot();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new H(204,!1)};var IP="ngOriginalError";function Dp(n){return n[IP]}var bb=!0,Hs=(()=>{class n{static{this.__NG_ELEMENT_ID__=wP}static{this.__NG_ENV_ID__=t=>t}}return n})(),Gp=class extends Hs{constructor(e){super(),this._lView=e}onDestroy(e){return XD(this._lView,e),()=>jx(this._lView,e)}};function wP(){return new Gp(De())}var kr=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new et(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Wp=class extends Xe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,BD()&&(this.destroyRef=N(Hs,{optional:!0})??void 0,this.pendingTasks=N(kr,{optional:!0})??void 0)}emit(e){let t=de(null);try{super.next(e)}finally{de(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ne=Wp;function Dl(...n){}function Tb(n){let e,t;function r(){n=Dl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function JE(n){return queueMicrotask(()=>n()),()=>{n=Dl}}var Ug="isAngularZone",bl=Ug+"_ID",EP=0,_e=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ne(!1),this.onMicrotaskEmpty=new Ne(!1),this.onStable=new Ne(!1),this.onError=new Ne(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=bb}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,TP(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ug)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,DP,Dl,Dl);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},DP={};function Bg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Tb(()=>{n.callbackScheduled=!1,Kp(n),n.isCheckStableRunning=!0,Bg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Kp(n)}function TP(n){let e=()=>{bP(n)},t=EP++;n._inner=n._inner.fork({name:"angular",properties:{[Ug]:!0,[bl]:t,[bl+t]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(CP(u))return r.invokeTask(s,o,a,u);try{return ZE(n),r.invokeTask(s,o,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),XE(n)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return ZE(n),r.invoke(s,o,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!SP(u)&&e(),XE(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Kp(n),Bg(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Kp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XE(n){n._nesting--,Bg(n)}var Qp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ne,this.onMicrotaskEmpty=new Ne,this.onStable=new Ne,this.onError=new Ne}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function CP(n){return Cb(n,"__ignore_ng_zone__")}function SP(n){return Cb(n,"__scheduler_tick__")}function Cb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var $n=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Dp(e);for(;t&&Dp(t);)t=Dp(t);return t||null}},AP=new U("",{providedIn:"root",factory:()=>{let n=N(_e),e=N($n);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function RP(){return $g(Ot(),De())}function $g(n,e){return new Di(Gt(n,e))}var Di=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=RP}}return n})();function Sb(n){return(n.flags&128)===128}var Ab=new Map,MP=0;function NP(){return MP++}function xP(n){Ab.set(n[Vl],n)}function Yp(n){Ab.delete(n[Vl])}var eD="__ngContext__";function wi(n,e){Sr(e)?(n[eD]=e[Vl],xP(e)):n[eD]=e}function Rb(n){return Nb(n[Ta])}function Mb(n){return Nb(n[tn])}function Nb(n){for(;n!==null&&!Gn(n);)n=n[tn];return n}var Jp;function xb(n){Jp=n}function PP(){if(Jp!==void 0)return Jp;if(typeof document<"u")return document;throw new H(210,!1)}var Hg=new U("",{providedIn:"root",factory:()=>OP}),OP="ng",qg=new U(""),Wt=new U("",{providedIn:"platform",factory:()=>"unknown"});var zg=new U("",{providedIn:"root",factory:()=>PP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kP="h",FP="b";var LP=()=>null;function Gg(n,e,t=!1){return LP(n,e,t)}var Pb=!1,VP=new U("",{providedIn:"root",factory:()=>Pb});var Zp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ON})`}};function Wg(n){return n instanceof Zp?n.changingThisBreaksApplicationSecurity:n}function Ob(n){return n instanceof Function?n():n}function jP(n){return(n??N(Ge)).get(Wt)==="browser"}var Hn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Hn||{}),UP;function Kg(n,e){return UP(n,e)}function Ds(n,e,t,r,i){if(r!=null){let s,o=!1;Gn(r)?s=r:Sr(r)&&(o=!0,r=r[zn]);let a=yn(r);n===0&&t!==null?i==null?Vb(e,t,a):Tl(e,t,a,i||null,!0):n===1&&t!==null?Tl(e,t,a,i||null,!0):n===2?tO(e,a,o):n===3&&e.destroyNode(a),s!=null&&rO(e,n,s,t,i)}}function BP(n,e){return n.createText(e)}function $P(n,e,t){n.setValue(e,t)}function kb(n,e,t){return n.createElement(e,t)}function HP(n,e){Fb(n,e),e[zn]=null,e[sn]=null}function qP(n,e,t,r,i,s){r[zn]=i,r[sn]=e,Hl(n,r,t,1,i,s)}function Fb(n,e){e[Bn].changeDetectionScheduler?.notify(9),Hl(n,e,e[qe],2,null,null)}function zP(n){let e=n[Ta];if(!e)return bp(n[se],n);for(;e;){let t=null;if(Sr(e))t=e[Ta];else{let r=e[_t];r&&(t=r)}if(!t){for(;e&&!e[tn]&&e!==n;)Sr(e)&&bp(e[se],e),e=e[wt];e===null&&(e=n),Sr(e)&&bp(e[se],e),t=e&&e[tn]}e=t}}function GP(n,e,t,r){let i=_t+r,s=t.length;r>0&&(t[i-1][tn]=e),r<s-_t?(e[tn]=t[i],TD(t,_t+r,e)):(t.push(e),e[tn]=null),e[wt]=t;let o=e[Ns];o!==null&&t!==o&&Lb(o,e);let a=e[xs];a!==null&&a.insertView(n),Up(e),e[X]|=128}function Lb(n,e){let t=n[yl],r=e[wt];if(Sr(r))n[X]|=vl.HasTransplantedViews;else{let i=r[wt][nn];e[nn]!==i&&(n[X]|=vl.HasTransplantedViews)}t===null?n[yl]=[e]:t.push(e)}function Qg(n,e){let t=n[yl],r=t.indexOf(e);t.splice(r,1)}function Ca(n,e){if(n.length<=_t)return;let t=_t+e,r=n[t];if(r){let i=r[Ns];i!==null&&i!==n&&Qg(i,r),e>0&&(n[t-1][tn]=r[tn]);let s=fl(n,_t+e);HP(r[se],r);let o=s[xs];o!==null&&o.detachView(s[se]),r[wt]=null,r[tn]=null,r[X]&=-129}return r}function $l(n,e){if(!(e[X]&256)){let t=e[qe];t.destroyNode&&Hl(n,e,t,3,null,null),zP(e)}}function bp(n,e){if(e[X]&256)return;let t=de(null);try{e[X]&=-129,e[X]|=256,e[qt]&&Zf(e[qt]),KP(n,e),WP(n,e),e[se].type===1&&e[qe].destroy();let r=e[Ns];if(r!==null&&Gn(e[wt])){r!==e[wt]&&Qg(r,e);let i=e[xs];i!==null&&i.detachView(n)}Yp(e)}finally{de(t)}}function WP(n,e){let t=n.cleanup,r=e[gl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[gl]=null);let i=e[Cr];if(i!==null){e[Cr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function KP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ii)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];pn(4,a,u);try{u.call(a)}finally{pn(5,a,u)}}else{pn(4,i,s);try{s.call(i)}finally{pn(5,i,s)}}}}}function QP(n,e,t){return YP(n,e.parent,t)}function YP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[zn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===mn.None||s===mn.Emulated)return null}return Gt(r,t)}}function Tl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Vb(n,e,t){n.appendChild(e,t)}function tD(n,e,t,r,i){r!==null?Tl(n,e,t,r,i):Vb(n,e,t)}function jb(n,e){return n.parentNode(e)}function JP(n,e){return n.nextSibling(e)}function ZP(n,e,t){return eO(n,e,t)}function XP(n,e,t){return n.type&40?Gt(n,t):null}var eO=XP,nD;function Yg(n,e,t,r){let i=QP(n,r,e),s=e[qe],o=r.parent||e[sn],a=ZP(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)tD(s,i,t[u],a,!1);else tD(s,i,t,a,!1);nD!==void 0&&nD(s,r,e,t,i)}function va(n,e){if(e!==null){let t=e.type;if(t&3)return Gt(e,n);if(t&4)return Xp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return va(n,r);{let i=n[e.index];return Gn(i)?Xp(-1,i):yn(i)}}else{if(t&128)return va(n,e.next);if(t&32)return Kg(e,n)()||yn(n[e.index]);{let r=Ub(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=vi(n[nn]);return va(i,r)}else return va(n,e.next)}}}return null}function Ub(n,e){if(e!==null){let r=n[nn][sn],i=e.projection;return r.projection[i]}return null}function Xp(n,e){let t=_t+n+1;if(t<e.length){let r=e[t],i=r[se].firstChild;if(i!==null)return va(r,i)}return e[yi]}function tO(n,e,t){n.removeChild(null,e,t)}function Jg(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(o&&e===0&&(a&&wi(yn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Jg(n,e,t.child,r,i,s,!1),Ds(e,n,i,a,s);else if(u&32){let l=Kg(t,r),h;for(;h=l();)Ds(e,n,i,h,s);Ds(e,n,i,a,s)}else u&16?nO(n,e,r,t,i,s):Ds(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Hl(n,e,t,r,i,s){Jg(t,r,n.firstChild,e,i,s,!1)}function nO(n,e,t,r,i,s){let o=t[nn],u=o[sn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ds(e,n,i,h,s)}else{let l=u,h=o[wt];Sb(r)&&(l.flags|=128),Jg(n,e,l,h,i,s,!0)}}function rO(n,e,t,r,i){let s=t[yi],o=yn(t);s!==o&&Ds(e,n,r,s,i);for(let a=_t;a<t.length;a++){let u=t[a];Hl(u[se],u,n,e,r,s)}}function iO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Hn.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Hn.Important),n.setStyle(t,r,i,s))}}function sO(n,e,t){n.setAttribute(e,"style",t)}function Bb(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function $b(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Op(n,e,r),i!==null&&Bb(n,e,i),s!==null&&sO(n,e,s)}var En={};function xe(n=1){Hb(Dt(),De(),Pr()+n,!1)}function Hb(n,e,t,r){if(!r)if((e[X]&3)===3){let s=n.preOrderCheckHooks;s!==null&&al(e,s,t)}else{let s=n.preOrderHooks;s!==null&&cl(e,s,0,t)}_i(t)}function Te(n,e=ae.Default){let t=De();if(t===null)return z(n,e);let r=Ot();return Ib(r,t,yt(n),e)}function qb(){let n="invalid";throw new Error(n)}function zb(n,e,t,r,i,s){let o=de(null);try{let a=null;i&Ar.SignalBased&&(a=e[r][Vn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ar.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):zD(e,a,r,s)}finally{de(o)}}function oO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)_i(~i);else{let s=i,o=t[++r],a=t[++r];Zx(o,s);let u=e[s];a(2,u)}}}finally{_i(-1)}}function ql(n,e,t,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[zn]=i,p[X]=r|4|128|8|64,(l!==null||n&&n[X]&2048)&&(p[X]|=2048),JD(p),p[wt]=p[Bs]=n,p[vt]=t,p[Bn]=o||n&&n[Bn],p[qe]=a||n&&n[qe],p[Ms]=u||n&&n[Ms]||null,p[sn]=s,p[Vl]=NP(),p[ba]=h,p[$D]=l,p[nn]=e.type==2?n[nn]:p,p}function zl(n,e,t,r,i){let s=n.data[e];if(s===null)s=aO(n,e,t,r,i),Jx()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=Gx();s.injectorIndex=o===null?-1:o.injectorIndex}return Pa(s,!0),s}function aO(n,e,t,r,i){let s=nb(),o=rb(),a=o?s:s&&s.parent,u=n.data[e]=hO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Gb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Wb(n,e,t,r,i){let s=Pr(),o=r&2;try{_i(-1),o&&e.length>Pt&&Hb(n,e,Pt,!1),pn(o?2:0,i),t(r,i)}finally{_i(s),pn(o?3:1,i)}}function Kb(n,e,t){if(qD(e)){let r=de(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let u=t[o];a.contentQueries(1,u,o)}}}finally{de(r)}}}function Qb(n,e,t){tb()&&(vO(n,e,t,Gt(t,e)),(t.flags&64)===64&&tT(n,e,t))}function Yb(n,e,t=Gt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function Jb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Zg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Zg(n,e,t,r,i,s,o,a,u,l,h){let p=Pt+r,y=p+i,m=cO(p,y),C=typeof l=="function"?l():l;return m[se]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function cO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:En);return t}function uO(n,e,t,r){let s=r.get(VP,Pb)||t===mn.ShadowDom,o=n.selectRootElement(e,s);return lO(o),o}function lO(n){dO(n)}var dO=()=>null;function hO(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Hx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function rD(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Ar.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?iD(r,t,l,a,u):iD(r,t,l,a)}return r}function iD(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function fO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],y=t?t.get(p):null,m=y?y.inputs:null,C=y?y.outputs:null;u=rD(0,p.inputs,h,u,m),l=rD(1,p.outputs,h,l,C);let M=u!==null&&o!==null&&!Cg(e)?RO(u,h,o):null;a.push(M)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function pO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Zb(n,e,t,r,i,s,o,a){let u=Gt(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Xg(n,t,h,r,i),jl(e)&&gO(t,e.index)):e.type&3?(r=pO(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function gO(n,e){let t=xr(e,n);t[X]&16||(t[X]|=64)}function Xb(n,e,t,r){if(tb()){let i=r===null?null:{"":-1},s=IO(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&eT(n,e,t,o,i,a),i&&wO(t,r,i)}t.mergedAttrs=Ea(t.mergedAttrs,t.attrs)}function eT(n,e,t,r,i,s){for(let l=0;l<r.length;l++)qp(El(t,e),n,r[l].type);DO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Gb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Ea(t.mergedAttrs,h.hostAttrs),bO(n,t,e,u,h),EO(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}fO(n,t,s)}function mO(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;yO(o)!=a&&o.push(a),o.push(t,r,s)}}function yO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function vO(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;jl(t)&&TO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||El(t,e),wi(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let u=n.data[a],l=Os(e,n,a,t);if(wi(l,e),o!==null&&AO(e,a-i,l,u,t,o),Mr(u)){let h=xr(t.index,e);h[vt]=Os(e,n,a,t)}}}function tT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=Xx();try{_i(s);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Bp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&_O(u,l)}}finally{_i(-1),Bp(o)}}function _O(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function IO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(dx(e,o.selectors,!1))if(r||(r=[]),Mr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;eg(n,e,u)}else r.unshift(o),eg(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function eg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function wO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}}function EO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Mr(e)&&(t[""]=n)}}function DO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function bO(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=mi(i.type,!0)),o=new Ii(s,Mr(i),Te);n.blueprint[r]=o,t[r]=o,mO(n,e,r,Gb(n,t,i.hostVars,En),i)}function TO(n,e,t){let r=Gt(e,n),i=Jb(t),s=n[Bn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Gl(n,ql(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function CO(n,e,t,r,i,s){let o=Gt(n,e);SO(e[qe],o,s,n.value,t,r,i)}function SO(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Ia(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function AO(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];zb(r,t,u,l,h,p)}}function RO(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function nT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function rT(n,e){let t=n.contentQueries;if(t!==null){let r=de(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];ob(s),a.contentQueries(2,e[o],o)}}}finally{de(r)}}}function Gl(n,e){return n[Ta]?n[qE][tn]=e:n[Ta]=e,n[qE]=e,e}function tg(n,e,t){ob(0);let r=de(null);try{e(n,t)}finally{de(r)}}function MO(n){return n[gl]??=[]}function NO(n){return n.cleanup??=[]}function iT(n,e){let t=n[Ms],r=t?t.get($n,null):null;r&&r.handleError(e)}function Xg(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],u=t[s++],l=e[o],h=n.data[o];zb(h,l,r,a,u,i)}}function sT(n,e,t){let r=YD(e,n);$P(n[qe],r,t)}function xO(n,e){let t=xr(e,n),r=t[se];PO(r,t);let i=t[zn];i!==null&&t[ba]===null&&(t[ba]=Gg(i,t[Ms])),em(r,t,t[vt])}function PO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function em(n,e,t){Pg(e);try{let r=n.viewQuery;r!==null&&tg(1,r,t);let i=n.template;i!==null&&Wb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xs]?.finishViewCreation(n),n.staticContentQueries&&rT(n,e),n.staticViewQueries&&tg(2,n.viewQuery,t);let s=n.components;s!==null&&OO(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[X]&=-5,Og()}}function OO(n,e){for(let t=0;t<e.length;t++)xO(n,e[t])}function tm(n,e,t,r){let i=de(null);try{let s=e.tView,a=n[X]&4096?4096:16,u=ql(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ns]=l;let h=n[xs];return h!==null&&(u[xs]=h.createEmbeddedView(s)),em(s,u,t),u}finally{de(i)}}function oT(n,e){let t=_t+e;if(t<n.length)return n[t]}function Sa(n,e){return!e||e.firstChild===null||Sb(n)}function Wl(n,e,t,r=!0){let i=e[se];if(GP(i,e,n,t),r){let o=Xp(t,n),a=e[qe],u=jb(a,n[yi]);u!==null&&qP(i,n[sn],a,e,u,o)}let s=e[ba];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function aT(n,e){let t=Ca(n,e);return t!==void 0&&$l(t[se],t),t}function Cl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(yn(s)),Gn(s)&&kO(s,r);let o=t.type;if(o&8)Cl(n,e,t.child,r);else if(o&32){let a=Kg(t,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Ub(e,t);if(Array.isArray(a))r.push(...a);else{let u=vi(e[nn]);Cl(u[se],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function kO(n,e){for(let t=_t;t<n.length;t++){let r=n[t],i=r[se].firstChild;i!==null&&Cl(r[se],r,i,e)}n[yi]!==n[zn]&&e.push(n[yi])}var cT=[];function FO(n){return n[qt]??LO(n)}function LO(n){let e=cT.pop()??Object.create(jO);return e.lView=n,e}function VO(n){n.lView[qt]!==n&&(n.lView=null,cT.push(n))}var jO=le(F({},pa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Bl(n.lView)},consumerOnSignalRead(){this.lView[qt]=this}});function UO(n){let e=n[qt]??Object.create(BO);return e.lView=n,e}var BO=le(F({},pa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=vi(n.lView);for(;e&&!uT(e[se]);)e=vi(e);e&&ZD(e)},consumerOnSignalRead(){this.lView[qt]=this}});function uT(n){return n.type!==2}var $O=100;function lT(n,e=!0,t=0){let r=n[Bn],i=r.rendererFactory,s=!1;s||i.begin?.();try{HO(n,t)}catch(o){throw e&&iT(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function HO(n,e){let t=ib();try{GE(!0),ng(n,e);let r=0;for(;Ul(n);){if(r===$O)throw new H(103,!1);r++,ng(n,1)}}finally{GE(t)}}function qO(n,e,t,r){let i=e[X];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Bn].inlineEffectRunner?.flush(),Pg(e);let a=!0,u=null,l=null;s||(uT(n)?(l=FO(e),u=Cu(l)):Yw()===null?(a=!1,l=UO(e),u=Cu(l)):e[qt]&&(Zf(e[qt]),e[qt]=null));try{JD(e),Yx(n.bindingStartIndex),t!==null&&Wb(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let m=n.preOrderCheckHooks;m!==null&&al(e,m,null)}else{let m=n.preOrderHooks;m!==null&&cl(e,m,0,null),Ip(e,0)}if(o||zO(e),dT(e,0),n.contentQueries!==null&&rT(n,e),!s)if(h){let m=n.contentCheckHooks;m!==null&&al(e,m)}else{let m=n.contentHooks;m!==null&&cl(e,m,1),Ip(e,1)}oO(n,e);let p=n.components;p!==null&&fT(e,p,0);let y=n.viewQuery;if(y!==null&&tg(2,y,r),!s)if(h){let m=n.viewCheckHooks;m!==null&&al(e,m)}else{let m=n.viewHooks;m!==null&&cl(e,m,2),Ip(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[_p]){for(let m of e[_p])m();e[_p]=null}s||(e[X]&=-73)}catch(h){throw s||Bl(e),h}finally{l!==null&&(Yf(l,u),a&&VO(l)),Og()}}function dT(n,e){for(let t=Rb(n);t!==null;t=Mb(t))for(let r=_t;r<t.length;r++){let i=t[r];hT(i,e)}}function zO(n){for(let e=Rb(n);e!==null;e=Mb(e)){if(!(e[X]&vl.HasTransplantedViews))continue;let t=e[yl];for(let r=0;r<t.length;r++){let i=t[r];ZD(i)}}}function GO(n,e,t){let r=xr(e,n);hT(r,t)}function hT(n,e){xg(n)&&ng(n,e)}function ng(n,e){let r=n[se],i=n[X],s=n[qt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Jf(s)),o||=!1,s&&(s.dirty=!1),n[X]&=-9217,o)qO(r,n,r.template,n[vt]);else if(i&8192){dT(n,1);let a=r.components;a!==null&&fT(n,a,1)}}function fT(n,e,t){for(let r=0;r<e.length;r++)GO(n,e[r],t)}function nm(n,e){let t=ib()?64:1088;for(n[Bn].changeDetectionScheduler?.notify(e);n;){n[X]|=t;let r=vi(n);if(Vp(n)&&!r)return n;n=r}return null}var ks=class{get rootNodes(){let e=this._lView,t=e[se];return Cl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vt]}set context(e){this._lView[vt]=e}get destroyed(){return(this._lView[X]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wt];if(Gn(e)){let t=e[ml],r=t?t.indexOf(this):-1;r>-1&&(Ca(e,r),fl(t,r))}this._attachedToViewContainer=!1}$l(this._lView[se],this._lView)}onDestroy(e){XD(this._lView,e)}markForCheck(){nm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){Up(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,lT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Vp(this._lView),t=this._lView[Ns];t!==null&&!e&&Qg(t,this._lView),Fb(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let t=Vp(this._lView),r=this._lView[Ns];r!==null&&!t&&Lb(r,this._lView),Up(this._lView)}};var B9=new RegExp(`^(\\d+)*(${FP}|${kP})*(.*)`);var WO=()=>null;function Aa(n,e){return WO(n,e)}var Fs=class{},rm=new U("",{providedIn:"root",factory:()=>!1});var pT=new U(""),gT=new U(""),rg=class{},Sl=class{};function KO(n){let e=Error(`No component factory found for ${St(n)}.`);return e[QO]=n,e}var QO="ngComponent";var ig=class{resolveComponentFactory(e){throw KO(e)}},Ls=class{static{this.NULL=new ig}},Vs=class{},qs=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>YO()}}return n})();function YO(){let n=De(),e=Ot(),t=xr(e.index,n);return(Sr(t)?t:n)[qe]}var JO=(()=>{class n{static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>null})}}return n})();function sg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=OE(i,a);else if(s==2){let u=a,l=e[++o];r=OE(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Al=class extends Ls{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Rr(e);return new js(t,this.ngModule)}};function sD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Ar.None;e?t.push({propName:o,templateName:r,isSignal:(a&Ar.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function ZO(n){let e=n.toLowerCase();return e==="svg"?QD:e==="math"?kx:null}var js=class extends Sl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=sD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return sD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=gx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=de(null);try{i=i||this.ngModule;let o=i instanceof It?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new $p(e,o):e,u=a.get(Vs,null);if(u===null)throw new H(407,!1);let l=a.get(JO,null),h=a.get(Fs,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},y=u.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",C=r?uO(y,r,this.componentDef.encapsulation,a):kb(y,m,ZO(m)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let R=null;C!==null&&(R=Gg(C,a,!0));let O=Zg(0,null,null,1,0,null,null,null,null,null,null),j=ql(null,O,null,M,null,null,p,y,a,null,R);Pg(j);let L,te,Ie=null;try{let Y=this.componentDef,E,v=null;Y.findHostDirectiveDefs?(E=[],v=new Map,Y.findHostDirectiveDefs(Y,E,v),E.push(Y)):E=[Y];let I=XO(j,C);Ie=ek(I,C,Y,E,j,p,y),te=Ng(O,Pt),C&&rk(y,Y,C,r),t!==void 0&&ik(te,this.ngContentSelectors,t),L=nk(Ie,Y,E,v,j,[sk]),em(O,j,null)}catch(Y){throw Ie!==null&&Yp(Ie),Yp(j),Y}finally{Og()}return new og(this.componentType,L,$g(te,j),j,te)}finally{de(s)}}},og=class extends rg{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ks(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Xg(s[se],s,i,e,t),this.previousInputValues.set(e,t);let o=xr(this._tNode.index,s);nm(o,1)}}get injector(){return new gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function XO(n,e){let t=n[se],r=Pt;return n[r]=e,zl(t,r,2,"#host",null)}function ek(n,e,t,r,i,s,o){let a=i[se];tk(r,n,e,o);let u=null;e!==null&&(u=Gg(e,i[Ms]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=ql(i,Jb(t),null,h,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&eg(a,n,r.length-1),Gl(i,p),i[n.index]=p}function tk(n,e,t,r){for(let i of n)e.mergedAttrs=Ea(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(sg(e,e.mergedAttrs,!0),t!==null&&$b(r,t,e))}function nk(n,e,t,r,i,s){let o=Ot(),a=i[se],u=Gt(o,i);eT(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,y=Os(i,a,p,o);wi(y,i)}tT(a,i,o),u&&wi(u,i);let l=Os(i,a,o.directiveStart+o.componentOffset,o);if(n[vt]=i[vt]=l,s!==null)for(let h of s)h(l,e);return Kb(a,o,i),l}function rk(n,e,t,r){if(r)Op(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=mx(e.selectors[0]);i&&Op(n,t,i),s&&s.length>0&&Bb(n,t,s.join(" "))}}function ik(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function sk(){let n=Ot();Vg(De()[se],n)}var Kl=(()=>{class n{static{this.__NG_ELEMENT_ID__=ok}}return n})();function ok(){let n=Ot();return ck(n,De())}var ak=Kl,mT=class extends ak{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return $g(this._hostTNode,this._hostLView)}get injector(){return new gi(this._hostTNode,this._hostLView)}get parentInjector(){let e=jg(this._hostTNode,this._hostLView);if(pb(e)){let t=Il(e,this._hostLView),r=_l(e),i=t[se].data[r+8];return new gi(i,t)}else return new gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-_t}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Aa(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Sa(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!Nx(e),a;if(o)a=t;else{let C=t||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new js(Rr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let M=(o?l:this.parentInjector).get(It,null);M&&(s=M)}let h=Rr(u.componentType??{}),p=Aa(this._lContainer,h?.id??null),y=p?.firstChild??null,m=u.create(l,i,y,s);return this.insertImpl(m.hostView,a,Sa(this._hostTNode,p)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Lx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[wt],l=new mT(u,u[sn],u[wt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Wl(o,i,s,r),e.attachToViewContainerRef(),TD(Tp(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ca(this._lContainer,t);r&&(fl(Tp(this._lContainer),t),$l(r[se],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ca(this._lContainer,t);return r&&fl(Tp(this._lContainer),t)!=null?new ks(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function oD(n){return n[ml]}function Tp(n){return n[ml]||(n[ml]=[])}function ck(n,e){let t,r=e[n.index];return Gn(r)?t=r:(t=nT(r,e,null,n),e[n.index]=t,Gl(e,t)),lk(t,e,n,r),new mT(t,n,e)}function uk(n,e){let t=n[qe],r=t.createComment(""),i=Gt(e,n),s=jb(t,i);return Tl(t,s,r,JP(t,i),!1),r}var lk=fk,dk=()=>!1;function hk(n,e,t){return dk(n,e,t)}function fk(n,e,t,r){if(n[yi])return;let i;t.type&8?i=yn(r):i=uk(e,t),n[yi]=i}var aD=new Set;function Fr(n){aD.has(n)||(aD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function pk(n){return typeof n=="function"&&n[Vn]!==void 0}function Dn(n,e){Fr("NgSignals");let t=aE(n),r=t[Vn];return e?.equal&&(r.equal=e.equal),t.set=i=>Xf(r,i),t.update=i=>cE(r,i),t.asReadonly=gk.bind(t),t}function gk(){let n=this[Vn];if(n.readonlyFn===void 0){let e=()=>this();e[Vn]=n,n.readonlyFn=e}return n.readonlyFn}function yT(n){return pk(n)&&typeof n.set=="function"}function mk(n){return Object.getPrototypeOf(n.prototype).constructor}function Kt(n){let e=mk(n.type),t=!0,r=[n];for(;e;){let i;if(Mr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=rl(n.inputs),o.inputTransforms=rl(n.inputTransforms),o.declaredInputs=rl(n.declaredInputs),o.outputs=rl(n.outputs);let a=i.hostBindings;a&&wk(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&_k(n,u),l&&Ik(n,l),yk(n,i),FN(n.outputs,i.outputs),Mr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Kt&&(t=!1)}}e=Object.getPrototypeOf(e)}vk(r)}function yk(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function vk(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ea(i.hostAttrs,t=Ea(t,i.hostAttrs))}}function rl(n){return n===Ss?{}:n===Ht?[]:n}function _k(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Ik(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function wk(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Nr=class{},Ra=class{};var ag=class extends Nr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Al(this);let s=OD(e);this._bootstrapComponents=Ob(s.bootstrap),this._r3Injector=Db(e,t,[{provide:Nr,useValue:this},{provide:Ls,useValue:this.componentFactoryResolver},...r],St(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},cg=class extends Ra{constructor(e){super(),this.moduleType=e}create(e){return new ag(this.moduleType,e,[])}};var Rl=class extends Nr{constructor(e){super(),this.componentFactoryResolver=new Al(this),this.instance=null;let t=new Da([...e.providers,{provide:Nr,useValue:this},{provide:Ls,useValue:this.componentFactoryResolver}],e.parent||Ag(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ql(n,e,t=null){return new Rl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Ek(n,e,t){return n[e]=t}function vn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Dk(n,e,t,r){let i=vn(n,e,t);return vn(n,e+1,r)||i}function bk(n){return(n.flags&32)===32}function Tk(n,e,t,r,i,s,o,a,u){let l=e.consts,h=zl(e,n,4,o||null,a||null);Xb(e,t,h,Ps(l,u)),Vg(e,h);let p=h.tView=Zg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function ug(n,e,t,r,i,s,o,a,u,l){let h=t+Pt,p=e.firstCreatePass?Tk(h,e,n,r,i,s,o,a,u):e.data[h];Pa(p,!1);let y=Ck(e,n,p,t);Fg()&&Yg(e,n,y,p),wi(y,n);let m=nT(y,n,y,p);return n[h]=m,Gl(n,m),hk(m,p,n),Mg(p)&&Qb(e,n,p),u!=null&&Yb(n,p,l),p}function kt(n,e,t,r,i,s,o,a){let u=De(),l=Dt(),h=Ps(l.consts,s);return ug(u,l,n,e,t,r,i,h,o,a),kt}var Ck=Sk;function Sk(n,e,t,r){return Lg(!0),e[qe].createComment("")}var bs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(bs||{}),vT=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}}return n})(),lg=class n{constructor(){this.ngZone=N(_e),this.scheduler=N(Fs),this.errorHandler=N($n,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[bs.EarlyRead,bs.Write,bs.MixedReadWrite,bs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}},dg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function im(n,e){!e?.injector&&Rg(im);let t=e?.injector??N(Ge);return jP(t)?(Fr("NgAfterNextRender"),Rk(n,t,e,!0)):Mk}function Ak(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Rk(n,e,t,r){let i=e.get(vT);i.impl??=e.get(lg);let s=t?.phase??bs.MixedReadWrite,o=t?.manualCleanup!==!0?e.get(Hs):null,a=new dg(i.impl,Ak(n,s),r,o);return i.impl.register(a),a}var Mk={destroy(){}};function Fa(n,e,t,r){let i=De(),s=$s();if(vn(i,s,e)){let o=Dt(),a=kg();CO(a,i,n,e,t,r)}return Fa}function Nk(n,e,t,r){return vn(n,$s(),t)?e+Ia(t)+r:En}function xk(n,e,t,r,i,s){let o=Qx(),a=Dk(n,o,t,i);return sb(2),a?e+Ia(t)+r+Ia(i)+s:En}function il(n,e){return n<<17|e<<2}function Ei(n){return n>>17&32767}function Pk(n){return(n&2)==2}function Ok(n,e){return n&131071|e<<17}function hg(n){return n|2}function Us(n){return(n&131068)>>2}function Cp(n,e){return n&-131069|e<<2}function kk(n){return(n&1)===1}function fg(n){return n|1}function Fk(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ei(o),u=Us(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||xa(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let y=Ei(n[a+1]);n[r+1]=il(y,a),y!==0&&(n[y+1]=Cp(n[y+1],r)),n[a+1]=Ok(n[a+1],r)}else n[r+1]=il(a,0),a!==0&&(n[a+1]=Cp(n[a+1],r)),a=r;else n[r+1]=il(u,0),a===0?a=r:n[u+1]=Cp(n[u+1],r),u=r;l&&(n[r+1]=hg(n[r+1])),cD(n,h,r,!0),cD(n,h,r,!1),Lk(e,h,n,r,s),o=il(a,u),s?e.classBindings=o:e.styleBindings=o}function Lk(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&xa(s,e)>=0&&(t[r+1]=fg(t[r+1]))}function cD(n,e,t,r){let i=n[t+1],s=e===null,o=r?Ei(i):Us(i),a=!1;for(;o!==0&&(a===!1||s);){let u=n[o],l=n[o+1];Vk(u,e)&&(a=!0,n[o+1]=r?fg(l):hg(l)),o=r?Ei(l):Us(l)}a&&(n[t+1]=r?hg(i):fg(i))}function Vk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?xa(n,e)>=0:!1}function bi(n,e,t){let r=De(),i=$s();if(vn(r,i,e)){let s=Dt(),o=kg();Zb(s,o,r,n,e,r[qe],t,!1)}return bi}function uD(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Xg(n,t,s[o],o,r)}function Yl(n,e){return jk(n,e,null,!0),Yl}function jk(n,e,t,r){let i=De(),s=Dt(),o=sb(2);if(s.firstUpdatePass&&Bk(s,n,o,r),e!==En&&vn(i,o,e)){let a=s.data[Pr()];Gk(s,a,i,i[qe],n,i[o+1]=Wk(e,t),r,o)}}function Uk(n,e){return e>=n.expandoStartIndex}function Bk(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Pr()],o=Uk(n,t);Kk(s,r)&&e===null&&!o&&(e=!1),e=$k(i,s,e,r),Fk(i,s,e,t,o,r)}}function $k(n,e,t,r){let i=eP(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Sp(null,n,e,t,r),t=Ma(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Sp(i,n,e,t,r),s===null){let u=Hk(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Sp(null,n,e,u[1],r),u=Ma(u,e.attrs,r),qk(n,e,r,u))}else s=zk(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Hk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Us(r)!==0)return n[Ei(r)]}function qk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ei(i)]=r}function zk(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ma(r,o,t)}return Ma(r,e.attrs,t)}function Sp(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ma(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ma(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),nx(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Gk(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=kk(l)?lD(u,e,t,i,Us(l),o):void 0;if(!Ml(h)){Ml(s)||Pk(l)&&(s=lD(u,null,t,i,a,o));let p=YD(Pr(),t);iO(r,o,p,i,s)}}function lD(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=t[i+1];y===En&&(y=p?Ht:void 0);let m=p?yp(y,r):h===r?y:void 0;if(l&&!Ml(m)&&(m=yp(u,r)),Ml(m)&&(a=m,o))return a;let C=n[i+1];i=o?Ei(C):Us(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=yp(u,r))}return a}function Ml(n){return n!==void 0}function Wk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=St(Wg(n)))),n}function Kk(n,e){return(n.flags&(e?8:16))!==0}var pg=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Ap(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Qk(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;s<=o&&s<=u;){let l=n.at(s),h=e[s],p=Ap(s,l,s,h,t);if(p!==0){p<0&&n.updateValue(s,h),s++;continue}let y=n.at(o),m=e[u],C=Ap(o,y,u,m,t);if(C!==0){C<0&&n.updateValue(o,m),o--,u--;continue}let M=t(s,l),R=t(o,y),O=t(s,h);if(Object.is(O,R)){let j=t(u,m);Object.is(j,M)?(n.swap(s,o),n.updateValue(o,m),u--,o--):n.move(o,s),n.updateValue(s,h),s++;continue}if(r??=new Nl,i??=hD(n,s,o,t),gg(n,r,s,O))n.updateValue(s,h),s++,o++;else if(i.has(O))r.set(M,n.detach(s)),o--;else{let j=n.create(s,e[s]);n.attach(s,j),s++,o++}}for(;s<=u;)dD(n,r,t,s,e[s]),s++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&s<=o;){let h=n.at(s),p=l.value,y=Ap(s,h,s,p,t);if(y!==0)y<0&&n.updateValue(s,p),s++,l=u.next();else{r??=new Nl,i??=hD(n,s,o,t);let m=t(s,p);if(gg(n,r,s,m))n.updateValue(s,p),s++,o++,l=u.next();else if(!i.has(m))n.attach(s,n.create(s,p)),s++,o++,l=u.next();else{let C=t(s,h);r.set(C,n.detach(s)),o--}}}for(;!l.done;)dD(n,r,t,n.length,l.value),l=u.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(u=>{n.destroy(u)})}function gg(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function dD(n,e,t,r,i){if(gg(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function hD(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Nl=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Qt(n,e){Fr("NgControlFlow");let t=De(),r=$s(),i=t[r]!==En?t[r]:-1,s=i!==-1?xl(t,Pt+i):void 0,o=0;if(vn(t,r,n)){let a=de(null);try{if(s!==void 0&&aT(s,o),n!==-1){let u=Pt+n,l=xl(t,u),h=_g(t[se],u),p=Aa(l,h.tView.ssrId),y=tm(t,h,e,{dehydratedView:p});Wl(l,y,o,Sa(h,p))}}finally{de(a)}}else if(s!==void 0){let a=oT(s,o);a!==void 0&&(a[vt]=e)}}var mg=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-_t}};var yg=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Jl(n,e,t,r,i,s,o,a,u,l,h,p,y){Fr("NgControlFlow");let m=De(),C=Dt(),M=u!==void 0,R=De(),O=a?o.bind(R[nn][vt]):o,j=new yg(M,O);R[Pt+n]=j,ug(m,C,n+1,e,t,r,i,Ps(C.consts,s)),M&&ug(m,C,n+2,u,l,h,p,Ps(C.consts,y))}var vg=class extends pg{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-_t}at(e){return this.getLView(e)[vt].$implicit}attach(e,t){let r=t[ba];this.needsIndexUpdate||=e!==this.length,Wl(this.lContainer,t,e,Sa(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Yk(this.lContainer,e)}create(e,t){let r=Aa(this.lContainer,this.templateTNode.tView.ssrId),i=tm(this.hostLView,this.templateTNode,new mg(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){$l(e[se],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[vt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[vt].$index=e}getLView(e){return Jk(this.lContainer,e)}};function Zl(n){let e=de(null),t=Pr();try{let r=De(),i=r[se],s=r[t],o=t+1,a=xl(r,o);if(s.liveCollection===void 0){let l=_g(i,o);s.liveCollection=new vg(a,r,l)}else s.liveCollection.reset();let u=s.liveCollection;if(Qk(u,n,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){let l=$s(),h=u.length===0;if(vn(r,l,h)){let p=t+2,y=xl(r,p);if(h){let m=_g(i,p),C=Aa(y,m.tView.ssrId),M=tm(r,m,void 0,{dehydratedView:C});Wl(y,M,0,Sa(m,C))}else aT(y,0)}}}finally{de(e)}}function xl(n,e){return n[e]}function Yk(n,e){return Ca(n,e)}function Jk(n,e){return oT(n,e)}function _g(n,e){return Ng(n,e)}function Zk(n,e,t,r,i,s){let o=e.consts,a=Ps(o,i),u=zl(e,n,2,r,a);return Xb(e,t,u,Ps(o,s)),u.attrs!==null&&sg(u,u.attrs,!1),u.mergedAttrs!==null&&sg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function G(n,e,t,r){let i=De(),s=Dt(),o=Pt+n,a=i[qe],u=s.firstCreatePass?Zk(o,s,i,e,t,r):s.data[o],l=Xk(s,i,u,a,e,n);i[o]=l;let h=Mg(u);return Pa(u,!0),$b(a,l,u),!bk(u)&&Fg()&&Yg(s,i,l,u),Ux()===0&&wi(l,i),Bx(),h&&(Qb(s,i,u),Kb(s,u,i)),r!==null&&Yb(i,u),G}function q(){let n=Ot();rb()?Wx():(n=n.parent,Pa(n,!1));let e=n;qx(e)&&zx(),$x();let t=Dt();return t.firstCreatePass&&(Vg(t,n),qD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&cP(e)&&uD(t,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&uP(e)&&uD(t,e,De(),e.stylesWithoutHost,!1),q}function Re(n,e,t,r){return G(n,e,t,r),q(),Re}var Xk=(n,e,t,r,i,s)=>(Lg(!0),kb(r,i,iP()));var Pl="en-US";var e1=Pl;function t1(n){typeof n=="string"&&(e1=n.toLowerCase().replace(/_/g,"-"))}var n1=(n,e,t)=>{};function Ft(n,e,t,r){let i=De(),s=Dt(),o=Ot();return _T(s,i,i[qe],o,n,e,r),Ft}function r1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[gl],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function _T(n,e,t,r,i,s,o){let a=Mg(r),l=n.firstCreatePass&&NO(n),h=e[vt],p=MO(e),y=!0;if(r.type&3||o){let M=Gt(r,e),R=o?o(M):M,O=p.length,j=o?te=>o(yn(te[r.index])):r.index,L=null;if(!o&&a&&(L=r1(n,e,i,r.index)),L!==null){let te=L.__ngLastListenerFn__||L;te.__ngNextListenerFn__=s,L.__ngLastListenerFn__=s,y=!1}else{s=pD(r,e,h,s),n1(M,i,s);let te=t.listen(R,i,s);p.push(s,te),l&&l.push(i,j,O,O+1)}}else s=pD(r,e,h,s);let m=r.outputs,C;if(y&&m!==null&&(C=m[i])){let M=C.length;if(M)for(let R=0;R<M;R+=2){let O=C[R],j=C[R+1],Ie=e[O][j].subscribe(s),Y=p.length;p.push(s,Ie),l&&l.push(i,r.index,Y,-(Y+1))}}}function fD(n,e,t,r){let i=de(null);try{return pn(6,e,t),t(r)!==!1}catch(s){return iT(n,s),!1}finally{pn(7,e,t),de(i)}}function pD(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?xr(n.index,e):e;nm(o,5);let a=fD(e,t,r,s),u=i.__ngNextListenerFn__;for(;u;)a=fD(e,t,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function Kn(n=1){return nP(n)}function i1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ue(n,e=""){let t=De(),r=Dt(),i=n+Pt,s=r.firstCreatePass?zl(r,i,1,e,null):r.data[i],o=s1(r,t,s,e,n);t[i]=o,Fg()&&Yg(r,t,o,s),Pa(s,!1)}var s1=(n,e,t,r,i)=>(Lg(!0),BP(e[qe],r));function Lr(n){return Ti("",n,""),Lr}function Ti(n,e,t){let r=De(),i=Nk(r,n,e,t);return i!==En&&sT(r,Pr(),i),Ti}function sm(n,e,t,r,i){let s=De(),o=xk(s,n,e,t,r,i);return o!==En&&sT(s,Pr(),o),sm}function Xl(n,e,t){yT(e)&&(e=e());let r=De(),i=$s();if(vn(r,i,e)){let s=Dt(),o=kg();Zb(s,o,r,n,e,r[qe],t,!1)}return Xl}function om(n,e){let t=yT(n);return t&&n.set(e),t}function ed(n,e){let t=De(),r=Dt(),i=Ot();return _T(r,t,t[qe],i,n,e),ed}function o1(n,e,t){let r=Dt();if(r.firstCreatePass){let i=Mr(n);Ig(t,r.data,r.blueprint,i,!0),Ig(e,r.data,r.blueprint,i,!1)}}function Ig(n,e,t,r,i){if(n=yt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Ig(n[s],e,t,r,i);else{let s=Dt(),o=De(),a=Ot(),u=Rs(n)?n:yt(n.provide),l=UD(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(Rs(n)||!n.multi){let m=new Ii(l,i,Te),C=Mp(u,e,i?h:h+y,p);C===-1?(qp(El(a,o),s,u),Rp(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[C]=m,o[C]=m)}else{let m=Mp(u,e,h+y,p),C=Mp(u,e,h,h+y),M=m>=0&&t[m],R=C>=0&&t[C];if(i&&!R||!i&&!M){qp(El(a,o),s,u);let O=u1(i?c1:a1,t.length,i,r,l);!i&&R&&(t[C].providerFactory=O),Rp(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),o.push(O)}else{let O=IT(t[i?C:m],l,!i&&r);Rp(s,n,m>-1?m:C,O)}!i&&r&&R&&t[C].componentProviders++}}}function Rp(n,e,t,r){let i=Rs(e),s=bx(e);if(i||s){let u=(s?yt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function IT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Mp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function a1(n,e,t,r){return wg(this.multi,[])}function c1(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Os(t,t[se],this.providerFactory.index,r);s=a.slice(0,o),wg(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],wg(i,s);return s}function wg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function u1(n,e,t,r,i){let s=new Ii(n,t,Te);return s.multi=[],s.index=e,s.componentProviders=0,IT(s,i,r&&!t),s}function Vr(n,e=[]){return t=>{t.providersResolver=(r,i)=>o1(r,i?i(n):n,e)}}var l1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=LD(!1,t.type),i=r.length>0?Ql([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(z(It))})}}return n})();function Ke(n){Fr("NgStandalone"),n.getStandaloneInjector=e=>e.get(l1).getOrCreateStandaloneInjector(n)}function d1(n,e){let t=n[e];return t===En?void 0:t}function h1(n,e,t,r,i,s){let o=e+t;return vn(n,o,i)?Ek(n,o+1,s?r.call(s,i):r(i)):d1(n,o+1)}function wT(n,e){let t=Dt(),r,i=n+Pt;t.firstCreatePass?(r=f1(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=mi(r.type,!0)),o,a=Ct(Te);try{let u=wl(!1),l=s();return wl(u),i1(t,De(),i,l),l}finally{Ct(a)}}function f1(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ET(n,e,t){let r=n+Pt,i=De(),s=Fx(i,r);return p1(i,r)?h1(i,Kx(),e,s.transform,t,s):s.transform(t)}function p1(n,e){return n[se].data[e].pure}var qn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},DT=new qn("18.2.13");var td=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var bT=new U("");function Ci(n){return!!n&&typeof n.then=="function"}function TT(n){return!!n&&typeof n.subscribe=="function"}var nd=new U(""),CT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=N(nd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Ci(s))t.push(s);else if(TT(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),La=new U("");function g1(){oE(()=>{throw new H(600,!1)})}function m1(n){return n.isBoundToModule}var y1=10;function v1(n,e,t){try{let r=t();return Ci(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var jr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N(AP),this.afterRenderManager=N(vT),this.zonelessEnabled=N(rm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Xe,this.afterTick=new Xe,this.componentTypes=[],this.components=[],this.isStable=N(kr).hasPendingTasks.pipe(Q(t=>!t)),this._injector=N(It)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Sl;if(!this._injector.get(CT).done){let y=!i&&PD(t),m=!1;throw new H(405,m)}let o;i?o=t:o=this._injector.get(Ls).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=m1(o)?void 0:this._injector.get(Nr),u=r||o.selector,l=o.create(Ge.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(bT,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),ul(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new H(101,!1);let t=de(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,de(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Vs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<y1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)_1(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ul(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ul(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(La,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ul(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ul(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _1(n,e,t,r){if(!t&&!Ul(n))return;lT(n,e,t&&!r?0:1)}var Eg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},rd=(()=>{class n{compileModuleSync(t){return new cg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=OD(t),s=Ob(i.declarations).reduce((o,a)=>{let u=Rr(a);return u&&o.push(new js(u)),o},[]);return new Eg(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var I1=(()=>{class n{constructor(){this.zone=N(_e),this.changeDetectionScheduler=N(Fs),this.applicationRef=N(jr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function w1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _e(le(F({},E1()),{scheduleInRootZone:t})),[{provide:_e,useFactory:n},{provide:As,multi:!0,useFactory:()=>{let r=N(I1,{optional:!0});return()=>r.initialize()}},{provide:As,multi:!0,useFactory:()=>{let r=N(D1);return()=>{r.initialize()}}},e===!0?{provide:pT,useValue:!0}:[],{provide:gT,useValue:t??bb}]}function E1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var D1=(()=>{class n{constructor(){this.subscription=new ke,this.initialized=!1,this.zone=N(_e),this.pendingTasks=N(kr)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var b1=(()=>{class n{constructor(){this.appRef=N(jr),this.taskService=N(kr),this.ngZone=N(_e),this.zonelessEnabled=N(rm),this.disableScheduling=N(pT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ke,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(gT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Qp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?JE:Tb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,JE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function T1(){return typeof $localize<"u"&&$localize.locale||Pl}var am=new U("",{providedIn:"root",factory:()=>N(am,ae.Optional|ae.SkipSelf)||T1()});var Dg=new U("");function sl(n){return!n.moduleRef}function C1(n){let e=sl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_e);return t.run(()=>{sl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get($n,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),sl(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Dg);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Dg);o.add(s),n.moduleRef.onDestroy(()=>{ul(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return v1(r,t,()=>{let s=e.get(CT);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(am,Pl);if(t1(o||Pl),sl(n)){let a=e.get(jr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return S1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function S1(n,e){let t=n.injector.get(jr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new H(-403,!1);e.push(n)}var ll=null;function A1(n=[],e){return Ge.create({name:e,providers:[{provide:Ll,useValue:"platform"},{provide:Dg,useValue:new Set([()=>ll=null])},...n]})}function R1(n=[]){if(ll)return ll;let e=A1(n);return ll=e,g1(),M1(e),e}function M1(n){n.get(qg,null)?.forEach(t=>t())}var Si=(()=>{class n{static{this.__NG_ELEMENT_ID__=N1}}return n})();function N1(n){return x1(Ot(),De(),(n&16)===16)}function x1(n,e,t){if(jl(n)&&!t){let r=xr(n.index,e);return new ks(r,r)}else if(n.type&175){let r=e[nn];return new ks(r,e)}return null}function ST(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=R1(r),s=[w1({}),{provide:Fs,useExisting:b1},...t||[]],o=new Rl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return C1({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function zs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ai(n,e){Fr("NgSignals");let t=rE(n);return e?.equal&&(t[Vn].equal=e.equal),t}function bn(n){let e=de(null);try{return n()}finally{de(e)}}function AT(n){let e=Rr(n);if(!e)return null;let t=new js(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var NT=null;function Yn(){return NT}function xT(n){NT??=n}var id=class{};var lt=new U(""),lm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>N(F1),providedIn:"platform"})}}return n})(),PT=new U(""),F1=(()=>{class n extends lm{constructor(){super(),this._doc=N(lt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yn().getBaseHref(this._doc)}onPopState(t){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function dm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function RT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Qn(n){return n&&n[0]!=="?"?"?"+n:n}var Ur=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>N(hm),providedIn:"root"})}}return n})(),OT=new U(""),hm=(()=>{class n extends Ur{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Qn(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Qn(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(z(lm),z(OT,8))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fm=(()=>{class n extends Ur{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=dm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Qn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Qn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(z(lm),z(OT,8))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Ws=(()=>{class n{constructor(t){this._subject=new Ne,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=j1(RT(MT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qn(r))}normalize(t){return n.stripTrailingSlash(V1(this._basePath,MT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Qn}static{this.joinWithSlash=dm}static{this.stripTrailingSlash=RT}static{this.\u0275fac=function(r){return new(r||n)(z(Ur))}}static{this.\u0275prov=B({token:n,factory:()=>L1(),providedIn:"root"})}}return n})();function L1(){return new Ws(z(Ur))}function V1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function MT(n){return n.replace(/\/index.html$/,"")}function j1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function sd(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var kT=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=MD({name:"json",type:n,pure:!1,standalone:!0})}}return n})();var on=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wn({type:n})}static{this.\u0275inj=In({})}}return n})(),pm="browser",U1="server";function B1(n){return n===pm}function od(n){return n===U1}var FT=(()=>{class n{static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>B1(N(Wt))?new cm(N(lt),window):new um})}}return n})(),cm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=$1(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function $1(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var um=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Gs=class{};var ja=class{},cd=class{},Jn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var mm=class{encodeKey(e){return VT(e)}encodeValue(e){return VT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function H1(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}var q1=/%(\d[a-f0-9])/gi,z1={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VT(n){return encodeURIComponent(n).replace(q1,(e,t)=>z1[t]??e)}function ad(n){return`${n}`}var $r=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new mm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=H1(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ad):[ad(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ad(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ad(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ym=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function G1(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function jT(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function UT(n){return typeof Blob<"u"&&n instanceof Blob}function BT(n){return typeof FormData<"u"&&n instanceof FormData}function W1(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Va=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(G1(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Jn,this.context??=new ym,!this.params)this.params=new $r,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||jT(this.body)||UT(this.body)||BT(this.body)||W1(this.body)?this.body:this.body instanceof $r?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||BT(this.body)?null:UT(this.body)?this.body.type||null:jT(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof $r?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((y,m)=>y.set(m,e.setHeaders[m]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((y,m)=>y.set(m,e.setParams[m]),h)),new n(t,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},Hr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Hr||{}),Ua=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Jn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ud=class n extends Ua{constructor(e={}){super(e),this.type=Hr.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ba=class n extends Ua{constructor(e={}){super(e),this.type=Hr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Br=class extends Ua{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},zT=200,K1=204;function gm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Im=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Va)s=t;else{let u;i.headers instanceof Jn?u=i.headers:u=new Jn(i.headers);let l;i.params&&(i.params instanceof $r?l=i.params:l=new $r({fromObject:i.params})),s=new Va(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=W(s).pipe(Un(u=>this.handler.handle(u)));if(t instanceof Va||i.observe==="events")return o;let a=o.pipe(mt(u=>u instanceof Ba));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Q(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(Q(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(Q(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(Q(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new $r().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,gm(i,r))}post(t,r,i={}){return this.request("POST",t,gm(i,r))}put(t,r,i={}){return this.request("PUT",t,gm(i,r))}static{this.\u0275fac=function(r){return new(r||n)(z(ja))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Q1=/^\)\]\}',?\n/,Y1="X-Request-URL";function $T(n){if(n.url)return n.url;let e=Y1.toLocaleLowerCase();return n.headers.get(e)}var J1=(()=>{class n{constructor(){this.fetchImpl=N(vm,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=N(_e)}handle(t){return new ie(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(_m,s=>r.error(new Br({error:s}))),()=>i.abort()})}doRequest(t,r,i){return _(this,null,function*(){let s=this.createRequestInit(t),o;try{let m=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,F({signal:r},s)));Z1(m),i.next({type:Hr.Sent}),o=yield m}catch(m){i.error(new Br({error:m,status:m.status??0,statusText:m.statusText,url:t.urlWithParams,headers:m.headers}));return}let a=new Jn(o.headers),u=o.statusText,l=$T(o)??t.urlWithParams,h=o.status,p=null;if(t.reportProgress&&i.next(new ud({headers:a,status:h,statusText:u,url:l})),o.body){let m=o.headers.get("content-length"),C=[],M=o.body.getReader(),R=0,O,j,L=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>_(this,null,function*(){for(;;){let{done:Ie,value:Y}=yield M.read();if(Ie)break;if(C.push(Y),R+=Y.length,t.reportProgress){j=t.responseType==="text"?(j??"")+(O??=new TextDecoder).decode(Y,{stream:!0}):void 0;let E=()=>i.next({type:Hr.DownloadProgress,total:m?+m:void 0,loaded:R,partialText:j});L?L.run(E):E()}}}));let te=this.concatChunks(C,R);try{let Ie=o.headers.get("Content-Type")??"";p=this.parseBody(t,te,Ie)}catch(Ie){i.error(new Br({error:Ie,headers:new Jn(o.headers),status:o.status,statusText:o.statusText,url:$T(o)??t.urlWithParams}));return}}h===0&&(h=p?zT:0),h>=200&&h<300?(i.next(new Ba({body:p,headers:a,status:h,statusText:u,url:l})),i.complete()):i.error(new Br({error:p,headers:a,status:h,statusText:u,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let s=new TextDecoder().decode(r).replace(Q1,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),s=0;for(let o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),vm=class{};function _m(){}function Z1(n){n.then(_m,_m)}function X1(n,e){return e(n)}function eF(n,e,t){return(r,i)=>zt(t,()=>e(r,s=>n(s,i)))}var GT=new U(""),tF=new U(""),nF=new U("",{providedIn:"root",factory:()=>!0});var HT=(()=>{class n extends ja{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=N(kr),this.contributeToStability=N(nF)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(GT),...this.injector.get(tF,[])]));this.chain=r.reduceRight((i,s)=>eF(i,s,this.injector),X1)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(pi(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(z(cd),z(It))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();var rF=/^\)\]\}',?\n/;function iF(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var qT=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new H(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?we(r.\u0275loadImpl()):W(null)).pipe(tt(()=>new ie(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((M,R)=>o.setRequestHeader(M,R.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let M=t.detectContentTypeHeader();M!==null&&o.setRequestHeader("Content-Type",M)}if(t.responseType){let M=t.responseType.toLowerCase();o.responseType=M!=="json"?M:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let M=o.statusText||"OK",R=new Jn(o.getAllResponseHeaders()),O=iF(o)||t.url;return u=new ud({headers:R,status:o.status,statusText:M,url:O}),u},h=()=>{let{headers:M,status:R,statusText:O,url:j}=l(),L=null;R!==K1&&(L=typeof o.response>"u"?o.responseText:o.response),R===0&&(R=L?zT:0);let te=R>=200&&R<300;if(t.responseType==="json"&&typeof L=="string"){let Ie=L;L=L.replace(rF,"");try{L=L!==""?JSON.parse(L):null}catch(Y){L=Ie,te&&(te=!1,L={error:Y,text:L})}}te?(s.next(new Ba({body:L,headers:M,status:R,statusText:O,url:j||void 0})),s.complete()):s.error(new Br({error:L,headers:M,status:R,statusText:O,url:j||void 0}))},p=M=>{let{url:R}=l(),O=new Br({error:M,status:o.status||0,statusText:o.statusText||"Unknown Error",url:R||void 0});s.error(O)},y=!1,m=M=>{y||(s.next(l()),y=!0);let R={type:Hr.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(R.total=M.total),t.responseType==="text"&&o.responseText&&(R.partialText=o.responseText),s.next(R)},C=M=>{let R={type:Hr.UploadProgress,loaded:M.loaded};M.lengthComputable&&(R.total=M.total),s.next(R)};return o.addEventListener("load",h),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),t.reportProgress&&(o.addEventListener("progress",m),a!==null&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:Hr.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",h),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",m),a!==null&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(z(Gs))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),WT=new U(""),sF="XSRF-TOKEN",oF=new U("",{providedIn:"root",factory:()=>sF}),aF="X-XSRF-TOKEN",cF=new U("",{providedIn:"root",factory:()=>aF}),ld=class{},uF=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=sd(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(z(lt),z(Wt),z(oF))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();function lF(n,e){let t=n.url.toLowerCase();if(!N(WT)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=N(ld).getToken(),i=N(cF);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function KT(...n){let e=[Im,qT,HT,{provide:ja,useExisting:HT},{provide:cd,useFactory:()=>N(J1,{optional:!0})??N(qT)},{provide:GT,useValue:lF,multi:!0},{provide:WT,useValue:!0},{provide:ld,useClass:uF}];for(let t of n)e.push(...t.\u0275providers);return rn(e)}var Dm=class extends id{constructor(){super(...arguments),this.supportsDOMEvents=!0}},bm=class n extends Dm{static makeCurrent(){xT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=dF();return t==null?null:hF(t)}resetBaseElement(){$a=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sd(document.cookie,e)}},$a=null;function dF(){return $a=$a||document.querySelector("base"),$a?$a.getAttribute("href"):null}function hF(n){return new URL(n,document.baseURI).pathname}var fF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Tm=new U(""),ZT=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(z(Tm),z(_e))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),dd=class{constructor(e){this._doc=e}},wm="ng-app-id",XT=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=od(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${wm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(wm),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(wm,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(z(lt),z(Hg),z(zg,8),z(Wt))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Em={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Sm=/%COMP%/g,eC="%COMP%",pF=`_nghost-${eC}`,gF=`_ngcontent-${eC}`,mF=!0,yF=new U("",{providedIn:"root",factory:()=>mF});function vF(n){return gF.replace(Sm,n)}function _F(n){return pF.replace(Sm,n)}function tC(n,e){return e.map(t=>t.replace(Sm,n))}var QT=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=od(a),this.defaultRenderer=new Ha(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===mn.ShadowDom&&(r=le(F({},r),{encapsulation:mn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof hd?i.applyToHost(t):i instanceof qa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case mn.Emulated:s=new hd(u,l,r,this.appId,h,o,a,p);break;case mn.ShadowDom:return new Cm(u,l,t,r,o,a,this.nonce,p);default:s=new qa(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(z(ZT),z(XT),z(Hg),z(yF),z(lt),z(Wt),z(_e),z(zg))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Ha=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Em[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(YT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(YT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Em[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Em[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Hn.DashCase|Hn.Important)?e.style.setProperty(t,r,i&Hn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Hn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Yn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function YT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Cm=class extends Ha{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=tC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qa=class extends Ha{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?tC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},hd=class extends qa{constructor(e,t,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=vF(l),this.hostAttr=_F(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},IF=(()=>{class n extends dd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(z(lt))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),JT=["alt","control","meta","shift"],wF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},DF=(()=>{class n extends dd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yn().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),JT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=wF[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),JT.forEach(o=>{if(o!==i){let a=EF[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(z(lt))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();function nC(n,e){return ST(F({rootComponent:n},bF(e)))}function bF(n){return{appProviders:[...RF,...n?.providers??[]],platformProviders:AF}}function TF(){bm.makeCurrent()}function CF(){return new $n}function SF(){return xb(document),document}var AF=[{provide:Wt,useValue:pm},{provide:qg,useValue:TF,multi:!0},{provide:lt,useFactory:SF,deps:[]}];var RF=[{provide:Ll,useValue:"root"},{provide:$n,useFactory:CF,deps:[]},{provide:Tm,useClass:IF,multi:!0,deps:[lt,_e,Wt]},{provide:Tm,useClass:DF,multi:!0,deps:[lt]},QT,XT,ZT,{provide:Vs,useExisting:QT},{provide:Gs,useClass:fF,deps:[]},[]];var rC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(z(lt))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",oc=Symbol("RouteTitle"),xm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Xs(n){return new xm(n)}function NF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Tn(n[t],e[t]))return!1;return!0}function Tn(n,e){let t=n?Pm(n):void 0,r=e?Pm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!pC(n[i],e[i]))return!1;return!0}function Pm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function pC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function gC(n){return n.length>0?n[n.length-1]:null}function zr(n){return hp(n)?n:Ci(n)?we(Promise.resolve(n)):W(n)}var PF={exact:yC,subset:vC},mC={exact:OF,subset:kF,ignored:()=>!0};function iC(n,e,t){return PF[t.paths](n.root,e.root,t.matrixParams)&&mC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function OF(n,e){return Tn(n,e)}function yC(n,e,t){if(!Mi(n.segments,e.segments)||!gd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!yC(n.children[r],e.children[r],t))return!1;return!0}function kF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>pC(n[t],e[t]))}function vC(n,e,t){return _C(n,e,e.segments,t)}function _C(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Mi(i,t)||e.hasChildren()||!gd(i,t,r))}else if(n.segments.length===t.length){if(!Mi(n.segments,t)||!gd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!vC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Mi(n.segments,i)||!gd(n.segments,i,r)||!n.children[oe]?!1:_C(n.children[oe],e,s,r)}}function gd(n,e,t){return e.every((r,i)=>mC[t](n[i].parameters,r.parameters))}var Xn=class{constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xs(this.queryParams),this._queryParamMap}toString(){return VF.serialize(this)}},Ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return md(this)}},Ri=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Xs(this.parameters),this._parameterMap}toString(){return wC(this)}};function FF(n,e){return Mi(n,e)&&n.every((t,r)=>Tn(t.parameters,e[r].parameters))}function Mi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function LF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var ac=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>new eo,providedIn:"root"})}}return n})(),eo=class{parse(e){let t=new km(e);return new Xn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${za(e.root,!0)}`,r=BF(e.queryParams),i=typeof e.fragment=="string"?`#${jF(e.fragment)}`:"";return`${t}${r}${i}`}},VF=new eo;function md(n){return n.segments.map(e=>wC(e)).join("/")}function za(n,e){if(!n.hasChildren())return md(n);if(e){let t=n.children[oe]?za(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${za(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=LF(n,(r,i)=>i===oe?[za(n.children[oe],!1)]:[`${i}:${za(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${md(n)}/${t[0]}`:`${md(n)}/(${t.join("//")})`}}function IC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fd(n){return IC(n).replace(/%3B/gi,";")}function jF(n){return encodeURI(n)}function Om(n){return IC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yd(n){return decodeURIComponent(n)}function sC(n){return yd(n.replace(/\+/g,"%20"))}function wC(n){return`${Om(n.path)}${UF(n.parameters)}`}function UF(n){return Object.entries(n).map(([e,t])=>`;${Om(e)}=${Om(t)}`).join("")}function BF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${fd(t)}=${fd(i)}`).join("&"):`${fd(t)}=${fd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var $F=/^[^\/()?;#]+/;function Am(n){let e=n.match($F);return e?e[0]:""}var HF=/^[^\/()?;=#]+/;function qF(n){let e=n.match(HF);return e?e[0]:""}var zF=/^[^=?&#]+/;function GF(n){let e=n.match(zF);return e?e[0]:""}var WF=/^[^&#]+/;function KF(n){let e=n.match(WF);return e?e[0]:""}var km=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ee(e,t)),r}parseSegment(){let e=Am(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Ri(yd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=qF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Am(this.remaining);i&&(r=i,this.capture(r))}e[yd(t)]=yd(r)}parseQueryParam(e){let t=GF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=KF(this.remaining);o&&(r=o,this.capture(r))}let i=sC(t),s=sC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Am(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[oe]:new Ee([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function EC(n){return n.segments.length>0?new Ee([],{[oe]:n}):n}function DC(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=DC(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ee(n.segments,e);return QF(t)}function QF(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ee(n.segments.concat(e.segments),e.children)}return n}function Ja(n){return n instanceof Xn}function YF(n,e,t=null,r=null){let i=bC(n);return TC(i,e,t,r)}function bC(n){let e;function t(s){let o={};for(let u of s.children){let l=t(u);o[u.outlet]=l}let a=new Ee(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=EC(r);return e??i}function TC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Rm(i,i,i,t,r);let s=JF(e);if(s.toRoot())return Rm(i,i,new Ee([],{}),t,r);let o=ZF(s,i,n),a=o.processChildren?Ka(o.segmentGroup,o.index,s.commands):SC(o.segmentGroup,o.index,s.commands);return Rm(i,o.segmentGroup,a,t,r)}function vd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Za(n){return typeof n=="object"&&n!=null&&n.outlets}function Rm(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=CC(n,e,t);let a=EC(DC(o));return new Xn(a,s,i)}function CC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=CC(s,e,t)}),new Ee(n.segments,r)}var _d=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vd(r[0]))throw new H(4003,!1);let i=r.find(Za);if(i&&i!==gC(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function JF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new _d(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new _d(t,e,r)}var Ys=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function ZF(n,e,t){if(n.isAbsolute)return new Ys(e,!0,0);if(!t)return new Ys(e,!1,NaN);if(t.parent===null)return new Ys(t,!0,0);let r=vd(n.commands[0])?0:1,i=t.segments.length-1+r;return XF(t,i,n.numberOfDoubleDots)}function XF(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Ys(r,!1,i-s)}function eL(n){return Za(n[0])?n[0].outlets:{[oe]:n}}function SC(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return Ka(n,e,t);let r=tL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ee(n.segments.slice(0,r.pathIndex),{});return s.children[oe]=new Ee(n.segments.slice(r.pathIndex),n.children),Ka(s,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?Fm(n,e,t):r.match?Ka(n,0,i):Fm(n,e,t)}function Ka(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=eL(t),i={};if(Object.keys(r).some(s=>s!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let s=Ka(n.children[oe],e,t);return new Ee(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=SC(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ee(n.segments,i)}}function tL(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Za(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!aC(u,l,o))return s;r+=2}else{if(!aC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Fm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Za(s)){let u=nL(s.outlets);return new Ee(r,u)}if(i===0&&vd(t[0])){let u=n.segments[e];r.push(new Ri(u.path,oC(t[0]))),i++;continue}let o=Za(s)?s.outlets[oe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&vd(a)?(r.push(new Ri(o,oC(a))),i+=2):(r.push(new Ri(o,{})),i++)}return new Ee(r,{})}function nL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Fm(new Ee([],{}),0,r))}),e}function oC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function aC(n,e,t){return n==t.path&&Tn(e,t.parameters)}var Qa="imperative",Qe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Qe||{}),Yt=class{constructor(e,t){this.id=e,this.url=t}},to=class extends Yt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},er=class extends Yt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Vt||{}),Id=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Id||{}),Zn=class extends Yt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qr=class extends Yt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Qe.NavigationSkipped}},Xa=class extends Yt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wd=class extends Yt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lm=class extends Yt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vm=class extends Yt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jm=class extends Yt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Um=class extends Yt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$m=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hm=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qm=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zm=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gm=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ed=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ec=class{},no=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function rL(n,e){return n.providers&&!n._injector&&(n._injector=Ql(n.providers,e,`Route: ${n.path}`)),n._injector??e}function an(n){return n.outlet||oe}function iL(n,e){let t=n.filter(r=>an(r)===e);return t.push(...n.filter(r=>an(r)!==e)),t}function cc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Wm=class{get injector(){return cc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new uc(this.rootInjector),this.attachRef=null}},uc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Wm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(z(It))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Km(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Km(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Qm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Qm(e,this._root).map(t=>t.value)}};function Km(n,e){if(n===e.value)return e;for(let t of e.children){let r=Km(n,t);if(r)return r}return null}function Qm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Qm(n,t);if(r.length)return r.unshift(e),r}return[]}var Lt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Qs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bd=class extends Dd{constructor(e,t){super(e),this.snapshot=t,iy(this,e)}toString(){return this.snapshot.toString()}};function AC(n){let e=sL(n),t=new et([new Ri("",{})]),r=new et({}),i=new et({}),s=new et({}),o=new et(""),a=new Ni(t,r,s,o,i,oe,n,e.root);return a.snapshot=e.root,new bd(new Lt(a,[]),e)}function sL(n){let e={},t={},r={},i="",s=new Js([],e,r,i,t,oe,n,null,{});return new Cd("",new Lt(s,[]))}var Ni=class{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Q(l=>l[oc]))??W(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Xs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Xs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Td(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&MC(i)&&(r.resolve[oc]=i.title),r}var Js=class{get title(){return this.data?.[oc]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Cd=class extends Dd{constructor(e,t){super(t),this.url=e,iy(this,t)}toString(){return RC(this._root)}};function iy(n,e){e.value._routerState=n,e.children.forEach(t=>iy(n,t))}function RC(n){let e=n.children.length>0?` { ${n.children.map(RC).join(", ")} } `:"";return`${n.value}${e}`}function Mm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Tn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Tn(e.params,t.params)||n.paramsSubject.next(t.params),xF(e.url,t.url)||n.urlSubject.next(t.url),Tn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ym(n,e){let t=Tn(n.params,e.params)&&FF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ym(n.parent,e.parent))}function MC(n){return typeof n.title=="string"||n.title===null}var sy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Ne,this.deactivateEvents=new Ne,this.attachEvents=new Ne,this.detachEvents=new Ne,this.parentContexts=N(uc),this.location=N(Kl),this.changeDetector=N(Si),this.inputBinder=N(Md,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Jm(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=nt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Wn]})}}return n})(),Jm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ni?this.route:e===uc?this.childContexts:this.parent.get(e,t)}},Md=new U(""),cC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ya([r.queryParams,r.params,r.data]).pipe(tt(([s,o,a],u)=>(a=F(F(F({},s),o),a),u===0?W(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=AT(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();function oL(n,e,t){let r=tc(n,e._root,t?t._root:void 0);return new bd(r,e)}function tc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=aL(n,e,t);return new Lt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>tc(n,a)),o}}let r=cL(e.value),i=e.children.map(s=>tc(n,s));return new Lt(r,i)}}function aL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return tc(n,r,i);return tc(n,r)})}function cL(n){return new Ni(new et(n.url),new et(n.params),new et(n.queryParams),new et(n.fragment),new et(n.data),n.outlet,n.component,n)}var nc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},NC="ngNavigationCancelingError";function Sd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ja(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xC(!1,Vt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function xC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[NC]=!0,t.cancellationCode=e,t}function uL(n){return PC(n)&&Ja(n.url)}function PC(n){return!!n&&n[NC]}var lL=(n,e,t,r)=>Q(i=>(new Zm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Zm=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Mm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Qs(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Qs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Qs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Qs(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Gm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new qm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Mm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Mm(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ad=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Zs=class{constructor(e,t){this.component=e,this.route=t}};function dL(n,e,t){let r=n._root,i=e?e._root:null;return Ga(r,i,t,[r.value])}function hL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function io(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!yD(n)?n:e.get(n):r}function Ga(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Qs(e);return n.children.forEach(o=>{fL(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ya(a,t.getContext(o),i)),i}function fL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=pL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ad(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ga(n,e,a?a.children:null,r,i):Ga(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Zs(a.outlet.component,o))}else o&&Ya(e,a,i),i.canActivateChecks.push(new Ad(r)),s.component?Ga(n,null,a?a.children:null,r,i):Ga(n,null,t,r,i);return i}function pL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Mi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mi(n.url,e.url)||!Tn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ym(n,e)||!Tn(n.queryParams,e.queryParams);case"paramsChange":default:return!Ym(n,e)}}function Ya(n,e,t){let r=Qs(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ya(o,e.children.getContext(s),t):Ya(o,null,t):Ya(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Zs(e.outlet.component,i)):t.canDeactivateChecks.push(new Zs(null,i)):t.canDeactivateChecks.push(new Zs(null,i))}function lc(n){return typeof n=="function"}function gL(n){return typeof n=="boolean"}function mL(n){return n&&lc(n.canLoad)}function yL(n){return n&&lc(n.canActivate)}function vL(n){return n&&lc(n.canActivateChild)}function _L(n){return n&&lc(n.canDeactivate)}function IL(n){return n&&lc(n.canMatch)}function OC(n){return n instanceof jn||n?.name==="EmptyError"}var pd=Symbol("INITIAL_VALUE");function ro(){return tt(n=>ya(n.map(e=>e.pipe($t(1),tl(pd)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===pd)return pd;if(t===!1||wL(t))return t}return!0}),mt(e=>e!==pd),$t(1)))}function wL(n){return Ja(n)||n instanceof nc}function EL(n,e){return Ve(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?W(le(F({},t),{guardsResult:!0})):DL(o,r,i,n).pipe(Ve(a=>a&&gL(a)?bL(r,s,n,e):W(a)),Q(a=>le(F({},t),{guardsResult:a})))})}function DL(n,e,t,r){return we(n).pipe(Ve(i=>RL(i.component,i.route,t,e,r)),fn(i=>i!==!0,!0))}function bL(n,e,t,r){return we(e).pipe(Un(i=>_s(CL(i.route.parent,r),TL(i.route,r),AL(n,i.path,t),SL(n,i.route,t))),fn(i=>i!==!0,!0))}function TL(n,e){return n!==null&&e&&e(new zm(n)),W(!0)}function CL(n,e){return n!==null&&e&&e(new Hm(n)),W(!0)}function SL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(s=>Zu(()=>{let o=cc(e)??t,a=io(s,o),u=yL(a)?a.canActivate(e,n):zt(o,()=>a(e,n));return zr(u).pipe(fn())}));return W(i).pipe(ro())}function AL(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>hL(o)).filter(o=>o!==null).map(o=>Zu(()=>{let a=o.guards.map(u=>{let l=cc(o.node)??t,h=io(u,l),p=vL(h)?h.canActivateChild(r,n):zt(l,()=>h(r,n));return zr(p).pipe(fn())});return W(a).pipe(ro())}));return W(s).pipe(ro())}function RL(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return W(!0);let o=s.map(a=>{let u=cc(e)??i,l=io(a,u),h=_L(l)?l.canDeactivate(n,e,t,r):zt(u,()=>l(n,e,t,r));return zr(h).pipe(fn())});return W(o).pipe(ro())}function ML(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let s=i.map(o=>{let a=io(o,n),u=mL(a)?a.canLoad(e,t):zt(n,()=>a(e,t));return zr(u)});return W(s).pipe(ro(),kC(r))}function kC(n){return Pu(je(e=>{if(typeof e!="boolean")throw Sd(n,e)}),Q(e=>e===!0))}function NL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let s=i.map(o=>{let a=io(o,n),u=IL(a)?a.canMatch(e,t):zt(n,()=>a(e,t));return zr(u)});return W(s).pipe(ro(),kC(r))}var rc=class{constructor(e){this.segmentGroup=e||null}},ic=class extends Error{constructor(e){super(),this.urlTree=e}};function Ks(n){return ys(new rc(n))}function xL(n){return ys(new H(4e3,!1))}function PL(n){return ys(xC(!1,Vt.GuardRejected))}var Xm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[oe])return xL(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,params:m,data:C,title:M}=i,R=zt(s,()=>a({params:m,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,title:M}));if(R instanceof Xn)throw new ic(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new ic(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Xn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},ey={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OL(n,e,t,r,i){let s=FC(n,e,t);return s.matched?(r=rL(e,r),NL(r,e,t,i).pipe(Q(o=>o===!0?s:F({},ey)))):W(s)}function FC(n,e,t){if(e.path==="**")return kL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},ey):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||NF)(t,n,e);if(!i)return F({},ey);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function kL(n){return{matched:!0,parameters:n.length>0?gC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function uC(n,e,t,r){return t.length>0&&VL(n,t,r)?{segmentGroup:new Ee(e,LL(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&jL(n,t,r)?{segmentGroup:new Ee(n.segments,FL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function FL(n,e,t,r){let i={};for(let s of t)if(Nd(n,e,s)&&!r[an(s)]){let o=new Ee([],{});i[an(s)]=o}return F(F({},r),i)}function LL(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&an(r)!==oe){let i=new Ee([],{});t[an(r)]=i}return t}function VL(n,e,t){return t.some(r=>Nd(n,e,r)&&an(r)!==oe)}function jL(n,e,t){return t.some(r=>Nd(n,e,r))}function Nd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function UL(n,e,t){return e.length===0&&!n.children[t]}var ty=class{};function BL(n,e,t,r,i,s,o="emptyOnly"){return new ny(n,e,t,r,i,o,s).recognize()}var $L=31,ny=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Xm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=uC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new Lt(r,t),s=new Cd("",i),o=YF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Js([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(Q(r=>({children:r,rootSnapshot:t})),Dr(r=>{if(r instanceof ic)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof rc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Q(o=>o instanceof Lt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return we(s).pipe(Un(o=>{let a=r.children[o],u=iL(t,o);return this.processSegmentGroup(e,u,a,o,i)}),el((o,a)=>(o.push(...a),o)),br(null),gp(),Ve(o=>{if(o===null)return Ks(r);let a=LC(o);return HL(a),W(a)}))}processSegment(e,t,r,i,s,o,a){return we(t).pipe(Un(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,a).pipe(Dr(l=>{if(l instanceof rc)return W(null);throw l}))),fn(u=>!!u),Dr(u=>{if(OC(u))return UL(r,i,s)?W(new ty):Ks(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,u){return an(r)!==o&&(o===oe||!Nd(i,s,r))?Ks(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):Ks(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=FC(t,i,s);if(!u)return Ks(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$L&&(this.allowRedirects=!1));let m=new Js(s,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,lC(i),an(i),i.component??i._loadedComponent??null,i,dC(i)),C=Td(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(C.params),m.data=Object.freeze(C.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,m,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Ve(R=>this.processSegment(e,r,t,R.concat(y),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=OL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(tt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(tt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:m}=u,C=new Js(y,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,lC(r),an(r),r.component??r._loadedComponent??null,r,dC(r)),M=Td(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(M.params),C.data=Object.freeze(M.data);let{segmentGroup:R,slicedSegments:O}=uC(t,y,m,l);if(O.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(Q(L=>new Lt(C,L)));if(l.length===0&&O.length===0)return W(new Lt(C,[]));let j=an(r)===s;return this.processSegment(h,l,R,O,j?oe:s,!0,C).pipe(Q(L=>new Lt(C,L instanceof Lt?[L]:[])))}))):Ks(t)))}getChildConfig(e,t,r){return t.children?W({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?W({routes:t._loadedRoutes,injector:t._loadedInjector}):ML(e,t,r,this.urlSerializer).pipe(Ve(i=>i?this.configLoader.loadChildren(e,t).pipe(je(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):PL(t))):W({routes:[],injector:e})}};function HL(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function qL(n){let e=n.value.routeConfig;return e&&e.path===""}function LC(n){let e=[],t=new Set;for(let r of n){if(!qL(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=LC(r.children);e.push(new Lt(r.value,i))}return e.filter(r=>!t.has(r))}function lC(n){return n.data||{}}function dC(n){return n.resolve||{}}function zL(n,e,t,r,i,s){return Ve(o=>BL(n,e,t,r,o.extractedUrl,i,s).pipe(Q(({state:a,tree:u})=>le(F({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function GL(n,e){return Ve(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return W(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of VC(u))o.add(l);let a=0;return we(o).pipe(Un(u=>s.has(u)?WL(u,r,n,e):(u.data=Td(u,u.parent,n).resolve,W(void 0))),je(()=>a++),Is(1),Ve(u=>a===o.size?W(t):xt))})}function VC(n){let e=n.children.map(t=>VC(t)).flat();return[n,...e]}function WL(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!MC(i)&&(s[oc]=i.title),KL(s,n,e,r).pipe(Q(o=>(n._resolvedData=o,n.data=Td(n,n.parent,t).resolve,null)))}function KL(n,e,t,r){let i=Pm(n);if(i.length===0)return W({});let s={};return we(i).pipe(Ve(o=>QL(n[o],e,t,r).pipe(fn(),je(a=>{if(a instanceof nc)throw Sd(new eo,a);s[o]=a}))),Is(1),pp(s),Dr(o=>OC(o)?xt:ys(o)))}function QL(n,e,t,r){let i=cc(e)??r,s=io(n,i),o=s.resolve?s.resolve(e,t):zt(i,()=>s(e,t));return zr(o)}function Nm(n){return tt(e=>{let t=n(e);return t?we(t).pipe(Q(()=>e)):W(e)})}var jC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[oc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>N(YL),providedIn:"root"})}}return n})(),YL=(()=>{class n extends jC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(z(rC))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dc=new U("",{providedIn:"root",factory:()=>({})}),JL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=We({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ke],decls:1,vars:0,template:function(r,i){r&1&&Re(0,"router-outlet")},dependencies:[sy],encapsulation:2})}}return n})();function oy(n){let e=n.children&&n.children.map(oy),t=e?le(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=JL),t}var sc=new U(""),ay=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(rd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return W(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=zr(t.loadComponent()).pipe(Q(UC),je(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),pi(()=>{this.componentLoaders.delete(t)})),i=new fs(r,()=>new Xe).pipe(hs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=ZL(r,this.compiler,t,this.onLoadEndListener).pipe(pi(()=>{this.childrenLoaders.delete(r)})),o=new fs(s,()=>new Xe).pipe(hs());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZL(n,e,t,r){return zr(n.loadChildren()).pipe(Q(UC),Ve(i=>i instanceof Ra||Array.isArray(i)?W(i):we(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(sc,[],{optional:!0,self:!0}).flat()),{routes:o.map(oy),injector:s}}))}function XL(n){return n&&typeof n=="object"&&"default"in n}function UC(n){return XL(n)?n.default:n}var cy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>N(eV),providedIn:"root"})}}return n})(),eV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),BC=new U(""),$C=new U("");function tV(n,e,t){let r=n.get($C),i=n.get(lt);return n.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),nV(n))),{onViewTransitionCreated:u}=r;return u&&zt(n,()=>u({transition:a,from:e,to:t})),o})}function nV(n){return new Promise(e=>{im({read:()=>setTimeout(e)},{injector:n})})}var rV=new U(""),uy=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xe,this.transitionAbortSubject=new Xe,this.configLoader=N(ay),this.environmentInjector=N(It),this.urlSerializer=N(ac),this.rootContexts=N(uc),this.location=N(Ws),this.inputBindingEnabled=N(Md,{optional:!0})!==null,this.titleStrategy=N(jC),this.options=N(dc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(cy),this.createViewTransition=N(BC,{optional:!0}),this.navigationErrorHandler=N(rV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Bm(i)),r=i=>this.events.next(new $m(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(le(F(F({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new et({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Qa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(s=>s.id!==0),Q(s=>le(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),tt(s=>{let o=!1,a=!1;return W(s).pipe(tt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Vt.SupersededByNewNavigation),xt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?le(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new qr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Id.IgnoredSameUrlNavigation)),u.resolve(!1),xt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return W(u).pipe(tt(p=>{let y=this.transitions?.getValue();return this.events.next(new to(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?xt:Promise.resolve(p)}),zL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),je(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=le(F({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new wd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:m,restoredState:C,extras:M}=u,R=new to(p,this.urlSerializer.serialize(y),m,C);this.events.next(R);let O=AC(this.rootComponentType).snapshot;return this.currentTransition=s=le(F({},u),{targetSnapshot:O,urlAfterRedirects:y,extras:le(F({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,W(s)}else{let p="";return this.events.next(new qr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Id.IgnoredByUrlHandlingStrategy)),u.resolve(!1),xt}}),je(u=>{let l=new Lm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Q(u=>(this.currentTransition=s=le(F({},u),{guards:dL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),EL(this.environmentInjector,u=>this.events.next(u)),je(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Sd(this.urlSerializer,u.guardsResult);let l=new Vm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),mt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Vt.GuardRejected),!1)),Nm(u=>{if(u.guards.canActivateChecks.length)return W(u).pipe(je(l=>{let h=new jm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),tt(l=>{let h=!1;return W(l).pipe(GL(this.paramsInheritanceStrategy,this.environmentInjector),je({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Vt.NoDataFromResolver)}}))}),je(l=>{let h=new Um(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Nm(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(je(y=>{h.component=y}),Q(()=>{})));for(let y of h.children)p.push(...l(y));return p};return ya(l(u.targetSnapshot.root)).pipe(br(null),$t(1))}),Nm(()=>this.afterPreactivation()),tt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?we(h).pipe(Q(()=>s)):W(s)}),Q(u=>{let l=oL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=le(F({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),je(()=>{this.events.next(new ec)}),lL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),$t(1),je({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new er(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),mp(this.transitionAbortSubject.pipe(je(u=>{throw u}))),pi(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Vt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Dr(u=>{if(a=!0,PC(u))this.events.next(new Zn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),uL(u)?this.events.next(new no(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Xa(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=zt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof nc){let{message:p,cancellationCode:y}=Sd(this.urlSerializer,h);this.events.next(new Zn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,y)),this.events.next(new no(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return xt}))}))}cancelNavigationTransition(t,r,i){let s=new Zn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iV(n){return n!==Qa}var sV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>N(oV),providedIn:"root"})}}return n})(),ry=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},oV=(()=>{class n extends ry{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>N(aV),providedIn:"root"})}}return n})(),aV=(()=>{class n extends HC{constructor(){super(...arguments),this.location=N(Ws),this.urlSerializer=N(ac),this.options=N(dc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(cy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=AC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof to)this.stateMemento=this.createStateMemento();else if(t instanceof qr)this.rawUrlTree=r.initialUrl;else if(t instanceof wd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof ec?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Zn&&(t.code===Vt.GuardRejected||t.code===Vt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Xa?this.restoreHistory(r,!0):t instanceof er&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Xn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Wa||{});function qC(n,e){n.events.pipe(mt(t=>t instanceof er||t instanceof Zn||t instanceof Xa||t instanceof qr),Q(t=>t instanceof er||t instanceof qr?Wa.COMPLETE:(t instanceof Zn?t.code===Vt.Redirect||t.code===Vt.SupersededByNewNavigation:!1)?Wa.REDIRECTING:Wa.FAILED),mt(t=>t!==Wa.REDIRECTING),$t(1)).subscribe(()=>{e()})}function cV(n){throw n}var uV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},At=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=N(td),this.stateManager=N(HC),this.options=N(dc,{optional:!0})||{},this.pendingTasks=N(kr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(uy),this.urlSerializer=N(ac),this.location=N(Ws),this.urlHandlingStrategy=N(cy),this._events=new Xe,this.errorHandler=this.options.errorHandler||cV,this.navigated=!1,this.routeReuseStrategy=N(sV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(sc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(Md,{optional:!0}),this.eventsSubscription=new ke,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Zn&&r.code!==Vt.Redirect&&r.code!==Vt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof er)this.navigated=!0;else if(r instanceof no){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||iV(i.source)},o);this.scheduleNavigation(a,Qa,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}hV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(oy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=bC(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return TC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ja(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Qa,null,r)}navigate(t,r={skipLocationChange:!1}){return dV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},uV):r===!1?i=F({},lV):i=r,Ja(t))return iC(this.currentUrlTree,t,i);let s=this.parseUrl(t);return iC(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return qC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}function hV(n){return!(n instanceof ec)&&!(n instanceof no)}var Rd=class{};var fV=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(mt(t=>t instanceof er),Un(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Ql(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return we(i).pipe(vs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=W(null);let s=i.pipe(Ve(o=>o===null?W(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return we([s,o]).pipe(vs())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(z(At),z(rd),z(It),z(Rd),z(ay))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zC=new U(""),pV=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof to?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof er?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qr&&t.code===Id.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ed&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ed(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){qb()}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();function GC(n,...e){return rn([{provide:sc,multi:!0,useValue:n},[],{provide:Ni,useFactory:WC,deps:[At]},{provide:La,multi:!0,useFactory:KC},e.map(t=>t.\u0275providers)])}function WC(n){return n.routerState.root}function so(n,e){return{\u0275kind:n,\u0275providers:e}}function KC(){let n=N(Ge);return e=>{let t=n.get(jr);if(e!==t.components[0])return;let r=n.get(At),i=n.get(QC);n.get(ly)===1&&r.initialNavigation(),n.get(YC,null,ae.Optional)?.setUpPreloading(),n.get(zC,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var QC=new U("",{factory:()=>new Xe}),ly=new U("",{providedIn:"root",factory:()=>1});function gV(){return so(2,[{provide:ly,useValue:0},{provide:nd,multi:!0,deps:[Ge],useFactory:e=>{let t=e.get(PT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(At),s=e.get(QC);qC(i,()=>{r(!0)}),e.get(uy).afterPreactivation=()=>(r(!0),s.closed?W(void 0):s),i.initialNavigation()}))}}])}function mV(){return so(3,[{provide:nd,multi:!0,useFactory:()=>{let e=N(At);return()=>{e.setUpLocationChangeListener()}}},{provide:ly,useValue:2}])}var YC=new U("");function yV(n){return so(0,[{provide:YC,useExisting:fV},{provide:Rd,useExisting:n}])}function JC(){return so(6,[{provide:Ur,useClass:fm}])}function vV(){return so(8,[cC,{provide:Md,useExisting:cC}])}function _V(n){let e=[{provide:BC,useValue:tV},{provide:$C,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return so(9,e)}var hC=new U("ROUTER_FORROOT_GUARD"),IV=[Ws,{provide:ac,useClass:eo},At,uc,{provide:Ni,useFactory:WC,deps:[At]},ay,[]],xd=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[IV,[],{provide:sc,multi:!0,useValue:t},{provide:hC,useFactory:bV,deps:[[At,new Et,new bD]]},{provide:dc,useValue:r||{}},r?.useHash?EV():DV(),wV(),r?.preloadingStrategy?yV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?TV(r):[],r?.bindToComponentInputs?vV().\u0275providers:[],r?.enableViewTransitions?_V().\u0275providers:[],CV()]}}static forChild(t){return{ngModule:n,providers:[{provide:sc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(z(hC,8))}}static{this.\u0275mod=wn({type:n})}static{this.\u0275inj=In({})}}return n})();function wV(){return{provide:zC,useFactory:()=>{let n=N(FT),e=N(_e),t=N(dc),r=N(uy),i=N(ac);return t.scrollOffset&&n.setOffset(t.scrollOffset),new pV(i,r,n,e,t)}}}function EV(){return{provide:Ur,useClass:fm}}function DV(){return{provide:Ur,useClass:hm}}function bV(n){return"guarded"}function TV(n){return[n.initialNavigation==="disabled"?mV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?gV().\u0275providers:[]]}var fC=new U("");function CV(){return[{provide:fC,useFactory:KC},{provide:La,multi:!0,useExisting:fC}]}var XC=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},SV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},e0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,m=l&63;u||(m=64,o||(y=64)),r.push(t[h],t[p],t[y],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new hy;let y=s<<2|a>>4;if(r.push(y),l!==64){let m=a<<4&240|l>>2;if(r.push(m),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},AV=function(n){let e=XC(n);return e0.encodeByteArray(e,!0)},hc=function(n){return AV(n).replace(/\./g,"")},py=function(n){try{return e0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function RV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var MV=()=>RV().__FIREBASE_DEFAULTS__,NV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&py(n[1]);return e&&JSON.parse(e)},Od=()=>{try{return MV()||NV()||xV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gy=n=>{var e,t;return(t=(e=Od())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},t0=n=>{let e=gy(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},my=()=>{var n;return(n=Od())===null||n===void 0?void 0:n.config},yy=n=>{var e;return(e=Od())===null||e===void 0?void 0:e[`_${n}`]};var Pd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function n0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[hc(JSON.stringify(t)),hc(JSON.stringify(o)),""].join(".")}function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function PV(){var n;let e=(n=Od())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function i0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function s0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function o0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function a0(){let n=Ye();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function c0(){return!PV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vy(){try{return typeof indexedDB=="object"}catch{return!1}}function u0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var OV="FirebaseError",jt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=OV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}},tr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?kV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jt(i,a,r)}};function kV(n,e){return n.replace(FV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var FV=/\{\$([^}]+)}/g;function l0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(ZC(s)&&ZC(o)){if(!xi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ZC(n){return n!==null&&typeof n=="object"}function fc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oo(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ao(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function d0(n,e){let t=new fy(n,e);return t.subscribe.bind(t)}var fy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");LV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dy),i.error===void 0&&(i.error=dy),i.complete===void 0&&(i.complete=dy);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function LV(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dy(){}var C8=4*60*60*1e3;function rt(n){return n&&n._delegate?n._delegate:n}var Jt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Pi="[DEFAULT]";var _y=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Pd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jV(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function VV(n){return n===Pi?void 0:n}function jV(n){return n.instantiationMode==="EAGER"}var kd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new _y(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var UV=[],fe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(fe||{}),BV={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},$V=fe.INFO,HV={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},qV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=HV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Gr=class{constructor(e){this.name=e,this._logLevel=$V,this._logHandler=qV,this._userLogHandler=null,UV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var zV=(n,e)=>e.some(t=>n instanceof t),h0,f0;function GV(){return h0||(h0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WV(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var p0=new WeakMap,wy=new WeakMap,g0=new WeakMap,Iy=new WeakMap,Dy=new WeakMap;function KV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Cn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&p0.set(t,n)}).catch(()=>{}),Dy.set(e,n),e}function QV(n){if(wy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});wy.set(n,e)}var Ey={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||g0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function m0(n){Ey=n(Ey)}function YV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Fd(this),e,...t);return g0.set(r,e.sort?e.sort():[e]),Cn(r)}:WV().includes(n)?function(...e){return n.apply(Fd(this),e),Cn(p0.get(this))}:function(...e){return Cn(n.apply(Fd(this),e))}}function JV(n){return typeof n=="function"?YV(n):(n instanceof IDBTransaction&&QV(n),zV(n,GV())?new Proxy(n,Ey):n)}function Cn(n){if(n instanceof IDBRequest)return KV(n);if(Iy.has(n))return Iy.get(n);let e=JV(n);return e!==n&&(Iy.set(n,e),Dy.set(e,n)),e}var Fd=n=>Dy.get(n);function v0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Cn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Cn(o.result),u.oldVersion,u.newVersion,Cn(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var ZV=["get","getKey","getAll","getAllKeys","count"],XV=["put","add","delete","clear"],by=new Map;function y0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(by.get(e))return by.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=XV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZV.includes(t)))return;let s=function(o,...a){return _(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return by.set(e,s),s}m0(n=>le(F({},n),{get:(e,t,r)=>y0(e,t)||n.get(e,t,r),has:(e,t)=>!!y0(e,t)||n.has(e,t)}));var Cy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ej(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function ej(n){let e=n.getComponent();return e?.type==="VERSION"}var Sy="@firebase/app",_0="0.10.13";var nr=new Gr("@firebase/app"),tj="@firebase/app-compat",nj="@firebase/analytics-compat",rj="@firebase/analytics",ij="@firebase/app-check-compat",sj="@firebase/app-check",oj="@firebase/auth",aj="@firebase/auth-compat",cj="@firebase/database",uj="@firebase/data-connect",lj="@firebase/database-compat",dj="@firebase/functions",hj="@firebase/functions-compat",fj="@firebase/installations",pj="@firebase/installations-compat",gj="@firebase/messaging",mj="@firebase/messaging-compat",yj="@firebase/performance",vj="@firebase/performance-compat",_j="@firebase/remote-config",Ij="@firebase/remote-config-compat",wj="@firebase/storage",Ej="@firebase/storage-compat",Dj="@firebase/firestore",bj="@firebase/vertexai-preview",Tj="@firebase/firestore-compat",Cj="firebase",Sj="10.14.1";var Ay="[DEFAULT]",Aj={[Sy]:"fire-core",[tj]:"fire-core-compat",[rj]:"fire-analytics",[nj]:"fire-analytics-compat",[sj]:"fire-app-check",[ij]:"fire-app-check-compat",[oj]:"fire-auth",[aj]:"fire-auth-compat",[cj]:"fire-rtdb",[uj]:"fire-data-connect",[lj]:"fire-rtdb-compat",[dj]:"fire-fn",[hj]:"fire-fn-compat",[fj]:"fire-iid",[pj]:"fire-iid-compat",[gj]:"fire-fcm",[mj]:"fire-fcm-compat",[yj]:"fire-perf",[vj]:"fire-perf-compat",[_j]:"fire-rc",[Ij]:"fire-rc-compat",[wj]:"fire-gcs",[Ej]:"fire-gcs-compat",[Dj]:"fire-fst",[Tj]:"fire-fst-compat",[bj]:"fire-vertex","fire-js":"fire-js",[Cj]:"fire-js-all"};var pc=new Map,Rj=new Map,Ry=new Map;function I0(n,e){try{n.container.addComponent(e)}catch(t){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kr(n){let e=n.name;if(Ry.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Ry.set(e,n);for(let t of pc.values())I0(t,n);for(let t of Rj.values())I0(t,n);return!0}function mc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function cn(n){return n.settings!==void 0}var Mj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new tr("app","Firebase",Mj);var My=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}};var Qr=Sj;function yc(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ay,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Wr.create("bad-app-name",{appName:String(i)});if(t||(t=my()),!t)throw Wr.create("no-options");let s=pc.get(i);if(s){if(xi(t,s.options)&&xi(r,s.config))return s;throw Wr.create("duplicate-app",{appName:i})}let o=new kd(i);for(let u of Ry.values())o.addComponent(u);let a=new My(t,r,o);return pc.set(i,a),a}function co(n=Ay){let e=pc.get(n);if(!e&&n===Ay&&my())return yc();if(!e)throw Wr.create("no-app",{appName:n});return e}function Ld(){return Array.from(pc.values())}function ze(n,e,t){var r;let i=(r=Aj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(a.join(" "));return}Kr(new Jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Nj="firebase-heartbeat-database",xj=1,gc="firebase-heartbeat-store",Ty=null;function b0(){return Ty||(Ty=v0(Nj,xj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Wr.create("idb-open",{originalErrorMessage:n.message})})),Ty}function Pj(n){return _(this,null,function*(){try{let t=(yield b0()).transaction(gc),r=yield t.objectStore(gc).get(T0(n));return yield t.done,r}catch(e){if(e instanceof jt)nr.warn(e.message);else{let t=Wr.create("idb-get",{originalErrorMessage:e?.message});nr.warn(t.message)}}})}function w0(n,e){return _(this,null,function*(){try{let r=(yield b0()).transaction(gc,"readwrite");yield r.objectStore(gc).put(e,T0(n)),yield r.done}catch(t){if(t instanceof jt)nr.warn(t.message);else{let r=Wr.create("idb-set",{originalErrorMessage:t?.message});nr.warn(r.message)}}})}function T0(n){return`${n.name}!${n.options.appId}`}var Oj=1024,kj=30*24*60*60*1e3,Ny=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new xy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=E0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=kj}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=E0(),{heartbeatsToSend:r,unsentEntries:i}=Fj(this._heartbeatsCache.heartbeats),s=hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return nr.warn(t),""}})}};function E0(){return new Date().toISOString().substring(0,10)}function Fj(n,e=Oj){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),D0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),D0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var xy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return vy()?u0().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Pj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return w0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return w0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function D0(n){return hc(JSON.stringify({version:2,heartbeats:n})).length}function Lj(n){Kr(new Jt("platform-logger",e=>new Cy(e),"PRIVATE")),Kr(new Jt("heartbeat",e=>new Ny(e),"PRIVATE")),ze(Sy,_0,n),ze(Sy,_0,"esm2017"),ze("fire-js","")}Lj("");var Vj="firebase",jj="10.14.1";ze(Vj,jj,"app");var ki=new qn("ANGULARFIRE2_VERSION");function jd(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var vc=(n,e)=>{let t=e?[e]:Ld(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},lo=class{constructor(){return vc(Uj)}},Uj="app-check";function uo(){}var Vd=class{zone;delegate;constructor(e,t=lp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Py=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",uo,{},uo,uo)),t.pipe(je({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ho=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Vd(Zone.current)),this.insideAngular=t.run(()=>new Vd(Zone.current,up)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(z(_e))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ud(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Bj(n){return Ud().ngZone.runOutsideAngular(()=>n())}function Oi(n){return Ud().ngZone.run(()=>n())}function $j(n){return Hj(Ud())(n)}function Hj(n){return function(t){return t=t.lift(new Py(n.ngZone)),t.pipe(Er(n.outsideAngular),wr(n.insideAngular))}}var qj=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Oi(()=>n.apply(void 0,r))},bt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Oi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",uo,{},uo,uo))),r[s]=qj(r[s],t));let i=Bj(()=>n.apply(this,r));if(!e)if(i instanceof ie){let s=Ud();return i.pipe(Er(s.outsideAngular),wr(s.insideAngular))}else return Oi(()=>i);return i instanceof ie?i.pipe($j):i instanceof Promise?Oi(()=>new Promise((s,o)=>i.then(a=>Oi(()=>s(a)),a=>Oi(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Oi(()=>i)};var rr=class{constructor(e){return e}},Fi=class{constructor(){return Ld()}};function zj(n){return n&&n.length===1?n[0]:new rr(co())}var Oy=new U("angularfire2._apps"),Gj={provide:rr,useFactory:zj,deps:[[new Et,Oy]]},Wj={provide:Fi,deps:[[new Et,Oy]]};function Kj(n){return(e,t)=>{let r=t.get(Wt);ze("angularfire",ki.full,"core"),ze("angularfire",ki.full,"app"),ze("angular",DT.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new rr(i)}}function C0(n,...e){return rn([Gj,Wj,{provide:Oy,useFactory:Kj(n),multi:!0,deps:[_e,Ge,ho,...e]}])}var S0=bt(yc,!0);function q0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var z0=q0,G0=new tr("auth","Firebase",q0());var Gd=new Gr("@firebase/auth");function Qj(n,...e){Gd.logLevel<=fe.WARN&&Gd.warn(`Auth (${Qr}): ${n}`,...e)}function $d(n,...e){Gd.logLevel<=fe.ERROR&&Gd.error(`Auth (${Qr}): ${n}`,...e)}function An(n,...e){throw rv(n,...e)}function Li(n,...e){return rv(n,...e)}function W0(n,e,t){let r=Object.assign(Object.assign({},z0()),{[e]:t});return new tr("auth","Firebase",r).create(e,{appName:n.name})}function or(n){return W0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return G0.create(n,...e)}function J(n,e,...t){if(!n)throw rv(e,...t)}function ir(n){let e="INTERNAL ASSERTION FAILED: "+n;throw $d(e),new Error(e)}function Jr(n,e){n||ir(e)}function Vy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Yj(){return A0()==="http:"||A0()==="https:"}function A0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Jj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yj()||s0()||"connection"in navigator)?navigator.onLine:!0}function Zj(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Vi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jr(t>e,"Short delay should be less than long delay!"),this.isMobile=r0()||o0()}get(){return Jj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function iv(n,e){Jr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Wd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Xj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eU=new Vi(3e4,6e4);function Zr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ar(s,o,a,u){return _(this,arguments,function*(n,e,t,r,i={}){return K0(n,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=fc(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:y},l);return i0()||(m.referrerPolicy="no-referrer"),Wd.fetch()(Q0(n,n.config.apiHost,t,p),m)}))})}function K0(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Xj),e);try{let i=new jy(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Bd(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bd(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Bd(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Bd(n,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw W0(n,h,l);An(n,h)}}catch(i){if(i instanceof jt)throw i;An(n,"network-request-failed",{message:String(i)})}})}function Tc(s,o,a,u){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield ar(n,e,t,r,i);return"mfaPendingCredential"in l&&An(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function Q0(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?iv(n.config,i):`${n.config.apiScheme}://${i}`}function tU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var jy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Li(this.auth,"network-request-failed")),eU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Bd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Li(n,e,r);return i.customData._tokenResponse=t,i}function R0(n){return n!==void 0&&n.enterprise!==void 0}var Uy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function nU(n,e){return _(this,null,function*(){return ar(n,"GET","/v2/recaptchaConfig",Zr(n,e))})}function rU(n,e){return _(this,null,function*(){return ar(n,"POST","/v1/accounts:delete",e)})}function Y0(n,e){return _(this,null,function*(){return ar(n,"POST","/v1/accounts:lookup",e)})}function _c(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function sv(n,e=!1){return _(this,null,function*(){let t=rt(n),r=yield t.getIdToken(e),i=ov(r);J(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:_c(ky(i.auth_time)),issuedAtTime:_c(ky(i.iat)),expirationTime:_c(ky(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ky(n){return Number(n)*1e3}function ov(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{let i=py(t);return i?JSON.parse(i):($d("Failed to decode base64 JWT payload"),null)}catch(i){return $d("Caught error parsing JWT payload as JSON",i?.toString()),null}}function M0(n){let e=ov(n);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function fo(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof jt&&iU(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function iU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var By=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Kd(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield fo(n,Y0(t,{idToken:r}));J(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?J0(s.providerUserInfo):[],a=sU(n.providerData,o),u=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function av(n){return _(this,null,function*(){let e=rt(n);yield Kd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function sU(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function J0(n){return n.map(e=>{var{providerId:t}=e,r=dp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function oU(n,e){return _(this,null,function*(){let t=yield K0(n,{},()=>_(this,null,function*(){let r=fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=Q0(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Wd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function aU(n,e){return _(this,null,function*(){return ar(n,"POST","/v2/accounts:revokeToken",Zr(n,e))})}var Ic=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):M0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){J(e.length!==0,"internal-error");let t=M0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield oU(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ir("not implemented")}};function Yr(n,e){J(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var po=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=dp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new By(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield fo(this,this.stsTokenManager.getToken(this.auth,e));return J(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return sv(this,e)}reload(){return av(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Kd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(cn(this.auth.app))return Promise.reject(or(this.auth));let e=yield this.getIdToken();return yield fo(this,rU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,m=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,j=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:L,emailVerified:te,isAnonymous:Ie,providerData:Y,stsTokenManager:E}=t;J(L&&E,e,"internal-error");let v=Ic.fromJSON(this.name,E);J(typeof L=="string",e,"internal-error"),Yr(p,e.name),Yr(y,e.name),J(typeof te=="boolean",e,"internal-error"),J(typeof Ie=="boolean",e,"internal-error"),Yr(m,e.name),Yr(C,e.name),Yr(M,e.name),Yr(R,e.name),Yr(O,e.name),Yr(j,e.name);let I=new n({uid:L,auth:e,email:y,emailVerified:te,displayName:p,isAnonymous:Ie,photoURL:C,phoneNumber:m,tenantId:M,stsTokenManager:v,createdAt:O,lastLoginAt:j});return Y&&Array.isArray(Y)&&(I.providerData=Y.map(D=>Object.assign({},D))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Ic;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Kd(s),s})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];J(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?J0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ic;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var N0=new Map;function sr(n){Jr(n instanceof Function,"Expected a class definition");let e=N0.get(n);return e?(Jr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,N0.set(n,e),e)}var cU=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),$y=cU;function Hd(n,e,t){return`firebase:${n}:${e}:${t}`}var Qd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Hd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hd("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?po._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(sr($y),e,r);let i=(yield Promise.all(t.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||sr($y),o=Hd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=po._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function x0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Z0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rS(e))return"Blackberry";if(iS(e))return"Webos";if(X0(e))return"Safari";if((e.includes("chrome/")||eS(e))&&!e.includes("edge/"))return"Chrome";if(nS(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Z0(n=Ye()){return/firefox\//i.test(n)}function X0(n=Ye()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eS(n=Ye()){return/crios\//i.test(n)}function tS(n=Ye()){return/iemobile/i.test(n)}function nS(n=Ye()){return/android/i.test(n)}function rS(n=Ye()){return/blackberry/i.test(n)}function iS(n=Ye()){return/webos/i.test(n)}function cv(n=Ye()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uU(n=Ye()){var e;return cv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lU(){return a0()&&document.documentMode===10}function sS(n=Ye()){return cv(n)||nS(n)||iS(n)||rS(n)||/windows phone/i.test(n)||tS(n)}function oS(n,e=[]){let t;switch(n){case"Browser":t=x0(Ye());break;case"Worker":t=`${x0(Ye())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qr}/${r}`}var Hy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function dU(t){return _(this,arguments,function*(n,e={}){return ar(n,"GET","/v2/passwordPolicy",Zr(n,e))})}var hU=6,qy=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:hU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var zy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yd(this),this.idTokenSubscription=new Yd(this),this.beforeStateQueue=new Hy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sr(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Qd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield Y0(this,{idToken:e}),r=yield po._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(cn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Kd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Zj()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(cn(this.app))return Promise.reject(or(this));let t=e?rt(e):null;return t&&J(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return cn(this.app)?Promise.reject(or(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return cn(this.app)?Promise.reject(or(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(sr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield dU(this),t=new qy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield aU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&sr(e)||this._popupRedirectResolver;J(t,this,"argument-error"),this.redirectPersistenceManager=yield Qd.create(this,[sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Qj(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ui(n){return rt(n)}var Yd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=d0(t=>this.observer=t)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var rh={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fU(n){rh=n}function aS(n){return rh.loadJS(n)}function pU(){return rh.recaptchaEnterpriseScript}function gU(){return rh.gapiScript}function cS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var mU="recaptcha-enterprise",yU="NO_RECAPTCHA",Gy=class{constructor(e){this.type=mU,this.auth=Ui(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(this,null,function*(){nU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Uy(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;R0(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(yU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&R0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=pU();u.length!==0&&(u+=a),aS(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function P0(n,e,t,r=!1){return _(this,null,function*(){let i=new Gy(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Wy(n,e,t,r){return _(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield P0(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield P0(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function uv(n,e){let t=mc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(xi(s,e??{}))return i;An(i,"already-initialized")}return t.initialize({options:e})}function vU(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(sr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function lv(n,e,t){let r=Ui(n);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=uS(e),{host:o,port:a}=_U(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||IU()}function uS(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _U(n){let e=uS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:O0(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:O0(o)}}}function O0(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function IU(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ec=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ir("not implemented")}_getIdTokenResponse(e){return ir("not implemented")}_linkToIdToken(e,t){return ir("not implemented")}_getReauthenticationResolver(e){return ir("not implemented")}};function wU(n,e){return _(this,null,function*(){return ar(n,"POST","/v1/accounts:signUp",e)})}function EU(n,e){return _(this,null,function*(){return Tc(n,"POST","/v1/accounts:signInWithPassword",Zr(n,e))})}function DU(n,e){return _(this,null,function*(){return Tc(n,"POST","/v1/accounts:signInWithEmailLink",Zr(n,e))})}function bU(n,e){return _(this,null,function*(){return Tc(n,"POST","/v1/accounts:signInWithEmailLink",Zr(n,e))})}var Dc=class n extends Ec{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wy(e,t,"signInWithPassword",EU);case"emailLink":return DU(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wy(e,r,"signUpPassword",wU);case"emailLink":return bU(e,{idToken:t,email:this._email,oobCode:this._password});default:An(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Fy(n,e){return _(this,null,function*(){return Tc(n,"POST","/v1/accounts:signInWithIdp",Zr(n,e))})}function TU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CU(n){let e=oo(ao(n)).link,t=e?oo(ao(e)).deep_link_id:null,r=oo(ao(n)).deep_link_id;return(r?oo(ao(r)).link:null)||r||t||e||n}var Jd=class n{constructor(e){var t,r,i,s,o,a;let u=oo(ao(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=TU((i=u.mode)!==null&&i!==void 0?i:null);J(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=CU(e);try{return new n(t)}catch{return null}}};var lS=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Dc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Jd.parseLink(r);return J(i,"argument-error"),Dc._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Zd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ky=class extends Zd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function SU(n,e){return _(this,null,function*(){return Tc(n,"POST","/v1/accounts:signUp",Zr(n,e))})}var go=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let s=yield po._fromIdTokenResponse(e,r,i),o=k0(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=k0(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function k0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Qy=class n extends jt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function dS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qy._fromErrorAndOperation(n,s,e,r):s})}function AU(n,e,t=!1){return _(this,null,function*(){let r=yield fo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return go._forOperation(n,"link",r)})}function RU(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(cn(r.app))return Promise.reject(or(r));let i="reauthenticate";try{let s=yield fo(n,dS(r,i,e,n),t);J(s.idToken,r,"internal-error");let o=ov(s.idToken);J(o,r,"internal-error");let{sub:a}=o;return J(n.uid===a,r,"user-mismatch"),go._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&An(r,"user-mismatch"),s}})}function hS(n,e,t=!1){return _(this,null,function*(){if(cn(n.app))return Promise.reject(or(n));let r="signIn",i=yield dS(n,r,e),s=yield go._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function dv(n,e){return _(this,null,function*(){return hS(Ui(n),e)})}function fS(n){return _(this,null,function*(){let e=Ui(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function hv(n,e,t){return _(this,null,function*(){if(cn(n.app))return Promise.reject(or(n));let r=Ui(n),o=yield Wy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SU).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&fS(n),u}),a=yield go._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function fv(n,e,t){return cn(n.app)?Promise.reject(or(n)):dv(rt(n),lS.credential(e,t)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&fS(n),r}))}function MU(n,e){return _(this,null,function*(){return ar(n,"POST","/v1/accounts:update",e)})}function pv(r,i){return _(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=rt(n),a={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield fo(s,MU(s.auth,a));s.displayName=u.displayName||null,s.photoURL=u.photoUrl||null;let l=s.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),yield s._updateTokensIfNecessary(u)})}function Cc(n,e,t,r){return rt(n).onIdTokenChanged(e,t,r)}function gv(n,e,t){return rt(n).beforeAuthStateChanged(e,t)}var Xd="__sak";var eh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xd,"1"),this.storage.removeItem(Xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var NU=1e3,xU=10,PU=(()=>{class n extends eh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);lU()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,xU):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},NU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield _r(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield _r(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield _r(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),pS=PU;var OU=(()=>{class n extends eh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),mv=OU;function kU(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var FU=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,o)})),l=yield kU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function gS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Yy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=gS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Sn(){return window}function LU(n){Sn().location.href=n}function mS(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}function VU(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function jU(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function UU(){return mS()?self:null}var yS="firebaseLocalStorageDb",BU=1,th="firebaseLocalStorage",vS="fbase_key",ji=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ih(n,e){return n.transaction([th],e?"readwrite":"readonly").objectStore(th)}function $U(){let n=indexedDB.deleteDatabase(yS);return new ji(n).toPromise()}function Jy(){let n=indexedDB.open(yS,BU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(th,{keyPath:vS})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(th)?e(r):(r.close(),yield $U(),e(yield Jy()))}))})}function F0(n,e,t){return _(this,null,function*(){let r=ih(n,!0).put({[vS]:e,value:t});return new ji(r).toPromise()})}function HU(n,e){return _(this,null,function*(){let t=ih(n,!1).get(e),r=yield new ji(t).toPromise();return r===void 0?null:r.value})}function L0(n,e){let t=ih(n,!0).delete(e);return new ji(t).toPromise()}var qU=800,zU=3,GU=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Jy(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>zU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return mS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=FU._getInstance(UU()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield VU(),!this.activeServiceWorker)return;this.sender=new Yy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||jU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Jy();return yield F0(t,Xd,"1"),yield L0(t,Xd),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>F0(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>HU(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>L0(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(s=>{let o=ih(s,!1).getAll();return new ji(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),qU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),_S=GU;var _5=cS("rcb"),I5=new Vi(3e4,6e4);function WU(n,e){return e?sr(e):(J(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var bc=class extends Ec{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fy(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function KU(n){return hS(n.auth,new bc(n),n.bypassAuthState)}function QU(n){let{auth:e,user:t}=n;return J(t,e,"internal-error"),RU(t,new bc(n),n.bypassAuthState)}function YU(n){return _(this,null,function*(){let{auth:e,user:t}=n;return J(t,e,"internal-error"),AU(t,new bc(n),n.bypassAuthState)})}var Zy=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KU;case"linkViaPopup":case"linkViaRedirect":return YU;case"reauthViaPopup":case"reauthViaRedirect":return QU;default:An(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var w5=new Vi(2e3,1e4);var JU="pendingRedirect",qd=new Map,Xy=class n extends Zy{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=qd.get(this.auth._key());if(!e){try{let r=(yield ZU(this.resolver,this.auth))?yield _r(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}qd.set(this.auth._key(),e)}return this.bypassAuthState||qd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return _r(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,_r(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function ZU(n,e){return _(this,null,function*(){let t=t2(e),r=e2(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function XU(n,e){qd.set(n._key(),e)}function e2(n){return sr(n._redirectPersistence)}function t2(n){return Hd(JU,n.config.apiKey,n.name)}function n2(n,e,t=!1){return _(this,null,function*(){if(cn(n.app))return Promise.reject(or(n));let r=Ui(n),i=WU(r,e),o=yield new Xy(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var r2=10*60*1e3,ev=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!IS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Li(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r2&&this.cachedEventUids.clear(),this.cachedEventUids.has(V0(e))}saveEventToCache(e){this.cachedEventUids.add(V0(e)),this.lastProcessedEventTime=Date.now()}};function V0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function IS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function i2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IS(n);default:return!1}}function s2(t){return _(this,arguments,function*(n,e={}){return ar(n,"GET","/v1/projects",e)})}var o2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a2=/^https?/;function c2(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield s2(n);for(let t of e)try{if(u2(t))return}catch{}An(n,"unauthorized-domain")})}function u2(n){let e=Vy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!a2.test(t))return!1;if(o2.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var l2=new Vi(3e4,6e4);function j0(){let n=Sn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function d2(n){return new Promise((e,t)=>{var r,i,s;function o(){j0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j0(),t(Li(n,"network-request-failed"))},timeout:l2.get()})}if(!((i=(r=Sn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Sn().gapi)===null||s===void 0)&&s.load)o();else{let a=cS("iframefcb");return Sn()[a]=()=>{gapi.load?o():t(Li(n,"network-request-failed"))},aS(`${gU()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw zd=null,e})}var zd=null;function h2(n){return zd=zd||d2(n),zd}var f2=new Vi(5e3,15e3),p2="__/auth/iframe",g2="emulator/auth/iframe",m2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v2(n){let e=n.config;J(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?iv(e,g2):`https://${n.config.authDomain}/${p2}`,r={apiKey:e.apiKey,appName:n.name,v:Qr},i=y2.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${fc(r).slice(1)}`}function _2(n){return _(this,null,function*(){let e=yield h2(n),t=Sn().gapi;return J(t,n,"internal-error"),e.open({where:document.body,url:v2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m2,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Li(n,"network-request-failed"),a=Sn().setTimeout(()=>{s(o)},f2.get());function u(){Sn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var I2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w2=500,E2=600,D2="_blank",b2="http://localhost",nh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function T2(n,e,t,r=w2,i=E2){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},I2),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ye().toLowerCase();t&&(a=eS(l)?D2:t),Z0(l)&&(e=e||b2,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[m,C])=>`${y}${m}=${C},`,"");if(uU(l)&&a!=="_self")return C2(e||"",a),new nh(null);let p=window.open(e||"",a,h);J(p,n,"popup-blocked");try{p.focus()}catch{}return new nh(p)}function C2(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var S2="__/auth/handler",A2="emulator/auth/handler",R2=encodeURIComponent("fac");function U0(n,e,t,r,i,s){return _(this,null,function*(){J(n.config.authDomain,n,"auth-domain-config-required"),J(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Qr,eventId:i};if(e instanceof Zd){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",l0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Ky){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${R2}=${encodeURIComponent(u)}`:"";return`${M2(n)}?${fc(a).slice(1)}${l}`})}function M2({config:n}){return n.emulator?iv(n,A2):`https://${n.authDomain}/${S2}`}var Ly="webStorageSupport",tv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mv,this._completeRedirectFn=n2,this._overrideRedirectResult=XU}_openPopup(e,t,r,i){return _(this,null,function*(){var s;Jr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield U0(e,t,r,Vy(),i);return T2(e,o,gS())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield U0(e,t,r,Vy(),i);return LU(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Jr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield _2(e),r=new ev(e);return t.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ly,{type:Ly},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ly];o!==void 0&&t(!!o),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=c2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sS()||X0()||cv()}},wS=tv;var B0="@firebase/auth",$0="1.7.9";var nv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function N2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x2(n){Kr(new Jt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oS(n)},l=new zy(r,i,s,u);return vU(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Kr(new Jt("auth-internal",e=>{let t=Ui(e.getProvider("auth").getImmediate());return(r=>new nv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ze(B0,$0,N2(n)),ze(B0,$0,"esm2017")}var P2=5*60,O2=yy("authIdTokenMaxAge")||P2,H0=null,k2=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>O2)return;let i=t?.token;H0!==i&&(H0=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Sc(n=co()){let e=mc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=uv(n,{popupRedirectResolver:wS,persistence:[_S,pS,mv]}),r=yy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=k2(s.toString());gv(t,o,()=>o(t.currentUser)),Cc(t,a=>o(a))}}let i=gy("auth");return i&&lv(t,`http://${i}`),t}function F2(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}fU({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Li("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",F2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x2("Browser");function bS(n){return new ie(function(e){var t=Cc(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var TS="auth",Bi=class{constructor(e){return e}},Ac=class{constructor(){return vc(TS)}};var yv=new U("angularfire2.auth-instances");function bB(n,e){let t=jd(TS,n,e);return t&&new Bi(t)}function TB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bi(r)}}var CB={provide:Ac,deps:[[new Et,yv]]},SB={provide:Bi,useFactory:bB,deps:[[new Et,yv],rr]};function CS(n,...e){return ze("angularfire",ki.full,"auth"),rn([SB,CB,{provide:yv,useFactory:TB(n),multi:!0,deps:[_e,Ge,ho,Fi,[new Et,lo],...e]}])}var sh=bt(bS,!0);var SS=bt(hv,!0);var AS=bt(Sc,!0);var RS=bt(fv,!0);var MS=bt(pv,!0);var Rt=class n{firebaseAuth=N(Bi);user$=sh(this.firebaseAuth);currentUserSig=Dn(void 0);constructor(){this.user$.subscribe(e=>{e?this.currentUserSig.set({uid:e.uid,email:e.email??"",username:e.displayName??""}):this.currentUserSig.set(null)})}register(e,t,r){let i=SS(this.firebaseAuth,e,r).then(s=>MS(s.user,{displayName:t}));return we(i)}login(e,t){let r=RS(this.firebaseAuth,e,t).then(()=>{});return we(r)}getUser(){return this.currentUserSig()}userSignal(){return this.currentUserSig}userChanges(){return this.user$.pipe(Q(e=>e?{uid:e.uid,email:e.email??"",username:e.displayName??""}:null))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var mo=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-footer"]],standalone:!0,features:[Ke],decls:7,vars:0,consts:[[1,"bg-light","text-center","py-3"],[1,"mb-4"],["target","_blank",1,"text-muted","text-decoration-none"],[1,"footer-line"],[1,"text-muted"]],template:function(t,r){t&1&&(G(0,"footer",0)(1,"div",1)(2,"a",2),ue(3," Study platform "),q()(),Re(4,"hr",3),G(5,"div",4),ue(6," \xA9 2025 Company, Inc "),q()())},dependencies:[xd],styles:[".footer-top[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var yo=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-header"]],standalone:!0,features:[Ke],decls:44,vars:0,consts:[[1,"custom-navbar","px-3","py-2","text-white"],[1,"container-fluid","ps-5","pe-5"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","justify-content-lg-start"],["href","/",1,"d-flex","align-items-center","my-2","me-lg-auto","text-white","text-decoration-none"],["src","https://cdn-icons-png.flaticon.com/512/29/29302.png","alt","Book Icon","width","32","height","32",1,"me-2"],[1,"fs-4","fw-bold"],[1,"nav","col-12","col-lg-auto","my-2","justify-content-center","my-md-0","text-small"],["href","#",1,"nav-link","text-white"],["width","24","height","24",1,"bi","d-block","mx-auto","mb-1"],[0,"xlink","href","#home"],["href","/subjects",1,"nav-link","text-white"],[0,"xlink","href","#speedometer2"],[0,"xlink","href","#table"],[0,"xlink","href","#grid"],[1,"nav-item","dropdown","text-center"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","text-white","px-2"],[1,"d-flex","flex-column","align-items-center"],["src","https://cdn-icons-png.flaticon.com/512/16893/16893425.png","alt","account icon","width","24","height","24",1,"mb-1"],["aria-labelledby","navbarDropdown",1,"dropdown-menu","dropdown-menu-end"],["href","#",1,"dropdown-item"],[1,"dropdown-divider"]],template:function(t,r){t&1&&(G(0,"header")(1,"div",0)(2,"div",1)(3,"div",2)(4,"a",3),Re(5,"img",4),G(6,"span",5),ue(7,"Study Platform"),q()(),G(8,"ul",6)(9,"li")(10,"a",7),Oa(),G(11,"svg",8),Re(12,"use",9),q(),ue(13," Home "),q()(),ka(),G(14,"li")(15,"a",10),Oa(),G(16,"svg",8),Re(17,"use",11),q(),ue(18," Subjects "),q()(),ka(),G(19,"li")(20,"a",7),Oa(),G(21,"svg",8),Re(22,"use",12),q(),ue(23," Quiz/Test "),q()(),ka(),G(24,"li")(25,"a",7),Oa(),G(26,"svg",8),Re(27,"use",13),q(),ue(28," Calendar "),q()(),ka(),G(29,"li",14)(30,"a",15)(31,"div",16),Re(32,"img",17),G(33,"span"),ue(34,"Account"),q()()(),G(35,"ul",18)(36,"li")(37,"a",19),ue(38,"Settings"),q()(),G(39,"li"),Re(40,"hr",20),q(),G(41,"li")(42,"a",19),ue(43,"Log out"),q()()()()()()()()())},dependencies:[xd],styles:[".custom-navbar[_ngcontent-%COMP%]{background:linear-gradient(to right,#0b90dd,#000)}"]})};var NS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xS={};var Xr,vv;(function(){var n;function e(E,v){function I(){}I.prototype=v.prototype,E.D=v.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(D,b,S){for(var w=Array(arguments.length-2),kn=2;kn<arguments.length;kn++)w[kn-2]=arguments[kn];return v.prototype[b].apply(D,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,I){I||(I=0);var D=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)D[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)D[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=E.g[0],I=E.g[1],b=E.g[2];var S=E.g[3],w=v+(S^I&(b^S))+D[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+D[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+D[2]+606105819&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+D[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+D[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+D[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+D[6]+2821735955&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+D[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+D[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+D[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+D[10]+4294925233&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+D[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+D[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+D[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+D[14]+2792965006&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+D[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(b^S&(I^b))+D[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+D[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+D[11]+643717713&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+D[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+D[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+D[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+D[15]+3634488961&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+D[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+D[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+D[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+D[3]+4107603335&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+D[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+D[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+D[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+D[7]+1735328473&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+D[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(I^b^S)+D[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+D[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+D[11]+1839030562&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+D[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+D[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+D[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+D[7]+4139469664&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+D[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+D[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+D[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+D[3]+3572445317&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+D[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+D[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+D[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+D[15]+530742520&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+D[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(b^(I|~S))+D[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+D[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+D[14]+2878612391&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+D[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+D[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+D[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+D[10]+4293915773&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+D[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+D[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+D[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+D[6]+2734768916&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+D[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+D[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+D[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+D[2]+718787259&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var I=v-this.blockSize,D=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<v;)if(D[b++]=E.charCodeAt(S++),b==this.blockSize){i(this,D),b=0;break}}else for(;S<v;)if(D[b++]=E[S++],b==this.blockSize){i(this,D),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var I=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=I&255,I/=256;for(this.u(E),E=Array(16),v=I=0;4>v;++v)for(var D=0;32>D;D+=8)E[I++]=this.g[v]>>>D&255;return E};function s(E,v){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=v(E)}function o(E,v){this.h=v;for(var I=[],D=!0,b=E.length-1;0<=b;b--){var S=E[b]|0;D&&S==v||(I[b]=S,D=!1)}this.g=I}var a={};function u(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var v=[],I=1,D=0;E>=I;D++)v[D]=E/I|0,I*=4294967296;return new o(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return R(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),D=p,b=0;b<E.length;b+=8){var S=Math.min(8,E.length-b),w=parseInt(E.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),D=D.j(S).add(l(w))):(D=D.j(I),D=D.add(l(w)))}return D}var p=u(0),y=u(1),m=u(16777216);n=o.prototype,n.m=function(){if(M(this))return-R(this).m();for(var E=0,v=1,I=0;I<this.g.length;I++){var D=this.i(I);E+=(0<=D?D:4294967296+D)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(M(this))return"-"+R(this).toString(E);for(var v=l(Math.pow(E,6)),I=this,D="";;){var b=te(I,v).g;I=O(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=b,C(I))return S+D;for(;6>S.length;)S="0"+S;D=S+D}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function M(E){return E.h==-1}n.l=function(E){return E=O(this,E),M(E)?-1:C(E)?0:1};function R(E){for(var v=E.g.length,I=[],D=0;D<v;D++)I[D]=~E.g[D];return new o(I,~E.h).add(y)}n.abs=function(){return M(this)?R(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0,b=0;b<=v;b++){var S=D+(this.i(b)&65535)+(E.i(b)&65535),w=(S>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);D=w>>>16,S&=65535,w&=65535,I[b]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function O(E,v){return E.add(R(v))}n.j=function(E){if(C(this)||C(E))return p;if(M(this))return M(E)?R(this).j(R(E)):R(R(this).j(E));if(M(E))return R(this.j(R(E)));if(0>this.l(m)&&0>E.l(m))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,I=[],D=0;D<2*v;D++)I[D]=0;for(D=0;D<this.g.length;D++)for(var b=0;b<E.g.length;b++){var S=this.i(D)>>>16,w=this.i(D)&65535,kn=E.i(b)>>>16,Ko=E.i(b)&65535;I[2*D+2*b]+=w*Ko,j(I,2*D+2*b),I[2*D+2*b+1]+=S*Ko,j(I,2*D+2*b+1),I[2*D+2*b+1]+=w*kn,j(I,2*D+2*b+1),I[2*D+2*b+2]+=S*kn,j(I,2*D+2*b+2)}for(D=0;D<v;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=v;D<2*v;D++)I[D]=0;return new o(I,0)};function j(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function L(E,v){this.g=E,this.h=v}function te(E,v){if(C(v))throw Error("division by zero");if(C(E))return new L(p,p);if(M(E))return v=te(R(E),v),new L(R(v.g),R(v.h));if(M(v))return v=te(E,R(v)),new L(R(v.g),v.h);if(30<E.g.length){if(M(E)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var I=y,D=v;0>=D.l(E);)I=Ie(I),D=Ie(D);var b=Y(I,1),S=Y(D,1);for(D=Y(D,2),I=Y(I,2);!C(D);){var w=S.add(D);0>=w.l(E)&&(b=b.add(I),S=w),D=Y(D,1),I=Y(I,1)}return v=O(E,b.j(v)),new L(b,v)}for(b=p;0<=E.l(v);){for(I=Math.max(1,Math.floor(E.m()/v.m())),D=Math.ceil(Math.log(I)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),S=l(I),w=S.j(v);M(w)||0<w.l(E);)I-=D,S=l(I),w=S.j(v);C(S)&&(S=y),b=b.add(S),E=O(E,w)}return new L(b,E)}n.A=function(E){return te(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)&E.i(D);return new o(I,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)|E.i(D);return new o(I,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)^E.i(D);return new o(I,this.h^E.h)};function Ie(E){for(var v=E.g.length+1,I=[],D=0;D<v;D++)I[D]=E.i(D)<<1|E.i(D-1)>>>31;return new o(I,E.h)}function Y(E,v){var I=v>>5;v%=32;for(var D=E.g.length-I,b=[],S=0;S<D;S++)b[S]=0<v?E.i(S+I)>>>v|E.i(S+I+1)<<32-v:E.i(S+I);return new o(b,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vv=xS.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Xr=xS.Integer=o}).apply(typeof NS<"u"?NS:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cr={};var _v,AB,vo,Iv,Rc,ah,wv,Ev,Dv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function m(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,A){for(var k=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)k[Ce-2]=arguments[Ce];return d.prototype[T].apply(g,k)}}function M(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,A=g.length||0;c.length=T+A;for(let k=0;k<A;k++)c[T+k]=g[k]}else c.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function j(c){return/^[\s\xa0]*$/.test(c)}function L(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function te(c){return te[" "](c),c}te[" "]=function(){};var Ie=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function Y(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Ef;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class kn{constructor(){this.h=this.g=null}add(d,f){let g=Ko.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ko=new O(()=>new IM,c=>c.reset());class IM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Qo,Yo=!1,Ef=new kn,GI=()=>{let c=a.Promise.resolve(void 0);Qo=()=>{c.then(wM)}};var wM=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ko;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Yo=!1};function gr(){this.s=this.s,this.C=this.C}gr.prototype.s=!1,gr.prototype.ma=function(){this.s||(this.s=!0,this.N())},gr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var EM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Jo(c,d){if(st.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ie){e:{try{te(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:DM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Jo.aa.h.call(this)}}C(Jo,st);var DM={2:"touch",3:"pen",4:"mouse"};Jo.prototype.h=function(){Jo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Zo="closure_listenable_"+(1e6*Math.random()|0),bM=0;function TM(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++bM,this.da=this.fa=!1}function ou(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function au(c){this.src=c,this.g={},this.h=0}au.prototype.add=function(c,d,f,g,T){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=bf(c,d,g,T);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new TM(d,this.src,A,!!g,T),d.fa=f,c.push(d)),d};function Df(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=T)&&Array.prototype.splice.call(g,T,1),A&&(ou(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function bf(c,d,f,g){for(var T=0;T<c.length;++T){var A=c[T];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return T}return-1}var Tf="closure_lm_"+(1e6*Math.random()|0),Cf={};function WI(c,d,f,g,T){if(g&&g.once)return QI(c,d,f,g,T);if(Array.isArray(d)){for(var A=0;A<d.length;A++)WI(c,d[A],f,g,T);return null}return f=Mf(f),c&&c[Zo]?c.K(d,f,l(g)?!!g.capture:!!g,T):KI(c,d,f,!1,g,T)}function KI(c,d,f,g,T,A){if(!d)throw Error("Invalid event type");var k=l(T)?!!T.capture:!!T,Ce=Af(c);if(Ce||(c[Tf]=Ce=new au(c)),f=Ce.add(d,f,g,k,A),f.proxy)return f;if(g=CM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)EM||(T=k),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(JI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function CM(){function c(f){return d.call(c.src,c.listener,f)}let d=SM;return c}function QI(c,d,f,g,T){if(Array.isArray(d)){for(var A=0;A<d.length;A++)QI(c,d[A],f,g,T);return null}return f=Mf(f),c&&c[Zo]?c.L(d,f,l(g)?!!g.capture:!!g,T):KI(c,d,f,!0,g,T)}function YI(c,d,f,g,T){if(Array.isArray(d))for(var A=0;A<d.length;A++)YI(c,d[A],f,g,T);else g=l(g)?!!g.capture:!!g,f=Mf(f),c&&c[Zo]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=bf(A,f,g,T),-1<f&&(ou(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Af(c))&&(d=c.g[d.toString()],c=-1,d&&(c=bf(d,f,g,T)),(f=-1<c?d[c]:null)&&Sf(f))}function Sf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Zo])Df(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(JI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Af(d))?(Df(f,c),f.h==0&&(f.src=null,d[Tf]=null)):ou(c)}}}function JI(c){return c in Cf?Cf[c]:Cf[c]="on"+c}function SM(c,d){if(c.da)c=!0;else{d=new Jo(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Sf(c),c=f.call(g,d)}return c}function Af(c){return c=c[Tf],c instanceof au?c:null}var Rf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mf(c){return typeof c=="function"?c:(c[Rf]||(c[Rf]=function(d){return c.handleEvent(d)}),c[Rf])}function ot(){gr.call(this),this.i=new au(this),this.M=this,this.F=null}C(ot,gr),ot.prototype[Zo]=!0,ot.prototype.removeEventListener=function(c,d,f,g){YI(this,c,d,f,g)};function pt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new st(d,c);else if(d instanceof st)d.target=d.target||c;else{var T=d;d=new st(g,c),D(d,T)}if(T=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];T=cu(k,g,!0,d)&&T}if(k=d.g=c,T=cu(k,g,!0,d)&&T,T=cu(k,g,!1,d)&&T,f)for(A=0;A<f.length;A++)k=d.g=f[A],T=cu(k,g,!1,d)&&T}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)ou(f[g]);delete c.g[d],c.h--}}this.F=null},ot.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ot.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function cu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Ce=k.listener,Ze=k.ha||k.src;k.fa&&Df(c.i,k),T=Ce.call(Ze,g)!==!1&&T}}return T&&!g.defaultPrevented}function ZI(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function XI(c){c.g=ZI(()=>{c.g=null,c.i&&(c.i=!1,XI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class AM extends gr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:XI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xo(c){gr.call(this),this.h=c,this.g={}}C(Xo,gr);var ew=[];function tw(c){Y(c.g,function(d,f){this.g.hasOwnProperty(f)&&Sf(d)},c),c.g={}}Xo.prototype.N=function(){Xo.aa.N.call(this),tw(this)},Xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nf=a.JSON.stringify,RM=a.JSON.parse,MM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function xf(){}xf.prototype.h=null;function nw(c){return c.h||(c.h=c.i())}function rw(){}var ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pf(){st.call(this,"d")}C(Pf,st);function Of(){st.call(this,"c")}C(Of,st);var oi={},iw=null;function uu(){return iw=iw||new ot}oi.La="serverreachability";function sw(c){st.call(this,oi.La,c)}C(sw,st);function ta(c){let d=uu();pt(d,new sw(d))}oi.STAT_EVENT="statevent";function ow(c,d){st.call(this,oi.STAT_EVENT,c),this.stat=d}C(ow,st);function gt(c){let d=uu();pt(d,new ow(d,c))}oi.Ma="timingevent";function aw(c,d){st.call(this,oi.Ma,c),this.size=d}C(aw,st);function na(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ra(){this.g=!0}ra.prototype.xa=function(){this.g=!1};function NM(c,d,f,g,T,A){c.info(function(){if(c.g)if(A)for(var k="",Ce=A.split("&"),Ze=0;Ze<Ce.length;Ze++){var ye=Ce[Ze].split("=");if(1<ye.length){var at=ye[0];ye=ye[1];var ct=at.split("_");k=2<=ct.length&&ct[1]=="type"?k+(at+"="+ye+"&"):k+(at+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+k})}function xM(c,d,f,g,T,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+A+" "+k})}function rs(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+OM(c,f)+(g?" "+g:"")})}function PM(c,d){c.info(function(){return"TIMEOUT: "+d})}ra.prototype.info=function(){};function OM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return Nf(f)}catch{return d}}var lu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kf;function du(){}C(du,xf),du.prototype.g=function(){return new XMLHttpRequest},du.prototype.i=function(){return{}},kf=new du;function mr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uw}function uw(){this.i=null,this.g="",this.h=!1}var lw={},Ff={};function Lf(c,d,f){c.L=1,c.v=gu(Fn(d)),c.m=f,c.P=!0,dw(c,null)}function dw(c,d){c.F=Date.now(),hu(c),c.A=Fn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Tw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new uw,c.g=Hw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new AM(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(ew[0]=T.toString()),T=ew);for(var A=0;A<T.length;A++){var k=WI(f,T[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ta(),NM(c.i,c.u,c.A,c.l,c.R,c.m)}mr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Ln(c)==3?d.j():this.Y(c)},mr.prototype.Y=function(c){try{if(c==this.g)e:{let ct=Ln(this.g);var d=this.g.Ba();let os=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||xw(this.g)))){this.J||ct!=4||d==7||(d==8||0>=os?ta(3):ta(2)),Vf(this);var f=this.g.Z();this.X=f;t:if(hw(this)){var g=xw(this.g);c="";var T=g.length,A=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),ia(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,xM(this.i,this.u,this.A,this.l,this.R,ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,Ze=this.g;if((Ce=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Ce)){var ye=Ce;break t}}ye=null}if(f=ye)rs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jf(this,f);else{this.o=!1,this.s=3,gt(12),ai(this),ia(this);break e}}if(this.P){f=!0;let Zt;for(;!this.J&&this.C<k.length;)if(Zt=kM(this,k),Zt==Ff){ct==4&&(this.s=4,gt(14),f=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==lw){this.s=4,gt(15),rs(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else rs(this.i,this.l,Zt,null),jf(this,Zt);if(hw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||k.length!=0||this.h.h||(this.s=1,gt(16),f=!1),this.o=this.o&&f,!f)rs(this.i,this.l,k,"[Invalid Chunked Response]"),ai(this),ia(this);else if(0<k.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),zf(at),at.M=!0,gt(11))}}else rs(this.i,this.l,k,null),jf(this,k);ct==4&&ai(this),this.o&&!this.J&&(ct==4?jw(this.j,this):(this.o=!1,hu(this)))}else ZM(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),ai(this),ia(this)}}}catch{}finally{}};function hw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function kM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Ff:(f=Number(d.substring(f,g)),isNaN(f)?lw:(g+=1,g+f>d.length?Ff:(d=d.slice(g,g+f),c.C=g+f,d)))}mr.prototype.cancel=function(){this.J=!0,ai(this)};function hu(c){c.S=Date.now()+c.I,fw(c,c.I)}function fw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=na(y(c.ba,c),d)}function Vf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}mr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(PM(this.i,this.A),this.L!=2&&(ta(),gt(17)),ai(this),this.s=2,ia(this)):fw(this,this.S-c)};function ia(c){c.j.G==0||c.J||jw(c.j,c)}function ai(c){Vf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,tw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function jf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Uf(f.h,c))){if(!c.K&&Uf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Iu(f),vu(f);else break e;qf(f),gt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=na(y(f.Za,f),6e3));if(1>=mw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ui(f,11)}else if((c.K||f.g==c)&&Iu(f),!j(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let ye=T[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let at=ye[3];at!=null&&(f.la=at,f.j.info("VER="+f.la));let ct=ye[4];ct!=null&&(f.Aa=ct,f.j.info("SVER="+f.Aa));let os=ye[5];os!=null&&typeof os=="number"&&0<os&&(g=1.5*os,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Zt=c.g;if(Zt){let Eu=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eu){var A=g.h;A.g||Eu.indexOf("spdy")==-1&&Eu.indexOf("quic")==-1&&Eu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Bf(A,A.h),A.h=null))}if(g.D){let Gf=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Gf&&(g.ya=Gf,Ae(g.I,g.D,Gf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=$w(g,g.J?g.ia:null,g.W),k.K){yw(g.h,k);var Ce=k,Ze=g.L;Ze&&(Ce.I=Ze),Ce.B&&(Vf(Ce),hu(Ce)),g.g=k}else Lw(g);0<f.i.length&&_u(f)}else ye[0]!="stop"&&ye[0]!="close"||ui(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?ui(f,7):Hf(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}ta(4)}catch{}}var FM=class{constructor(c,d){this.g=c,this.map=d}};function pw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function mw(c){return c.h?1:c.g?c.g.size:0}function Uf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Bf(c,d){c.g?c.g.add(d):c.h=d}function yw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}pw.prototype.cancel=function(){if(this.i=vw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function vw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return M(c.i)}function LM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function VM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function _w(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=VM(c),g=LM(c),T=g.length,A=0;A<T;A++)d.call(void 0,g[A],f&&f[A],c)}var Iw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var A=c[f].substring(0,g);T=c[f].substring(g+1)}else A=c[f];d(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ci(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ci){this.h=c.h,fu(this,c.j),this.o=c.o,this.g=c.g,pu(this,c.s),this.l=c.l;var d=c.i,f=new aa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),ww(this,f),this.m=c.m}else c&&(d=String(c).match(Iw))?(this.h=!1,fu(this,d[1]||"",!0),this.o=sa(d[2]||""),this.g=sa(d[3]||"",!0),pu(this,d[4]),this.l=sa(d[5]||"",!0),ww(this,d[6]||"",!0),this.m=sa(d[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}ci.prototype.toString=function(){var c=[],d=this.j;d&&c.push(oa(d,Ew,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(oa(d,Ew,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(oa(f,f.charAt(0)=="/"?$M:BM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",oa(f,qM)),c.join("")};function Fn(c){return new ci(c)}function fu(c,d,f){c.j=f?sa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function pu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function ww(c,d,f){d instanceof aa?(c.i=d,zM(c.i,c.h)):(f||(d=oa(d,HM)),c.i=new aa(d,c.h))}function Ae(c,d,f){c.i.set(d,f)}function gu(c){return Ae(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function sa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,UM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function UM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ew=/[#\/\?@]/g,BM=/[#\?:]/g,$M=/[#\?]/g,HM=/[#\?@]/g,qM=/#/g;function aa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function yr(c){c.g||(c.g=new Map,c.h=0,c.i&&jM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=aa.prototype,n.add=function(c,d){yr(this),this.i=null,c=is(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Dw(c,d){yr(c),d=is(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function bw(c,d){return yr(c),d=is(c,d),c.g.has(d)}n.forEach=function(c,d){yr(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},n.na=function(){yr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let A=0;A<T.length;A++)f.push(d[g])}return f},n.V=function(c){yr(this);let d=[];if(typeof c=="string")bw(this,c)&&(d=d.concat(this.g.get(is(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return yr(this),this.i=null,c=is(this,c),bw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Tw(c,d,f){Dw(c,d),0<f.length&&(c.i=null,c.g.set(is(c,d),M(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var T=A;k[g]!==""&&(T+="="+encodeURIComponent(String(k[g]))),c.push(T)}}return this.i=c.join("&")};function is(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function zM(c,d){d&&!c.j&&(yr(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(Dw(this,g),Tw(this,T,f))},c)),c.j=d}function GM(c,d){let f=new ra;if(a.Image){let g=new Image;g.onload=m(vr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=m(vr,f,"TestLoadImage: error",!1,d,g),g.onabort=m(vr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=m(vr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function WM(c,d){let f=new ra,g=new AbortController,T=setTimeout(()=>{g.abort(),vr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(T),A.ok?vr(f,"TestPingServer: ok",!0,d):vr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),vr(f,"TestPingServer: error",!1,d)})}function vr(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function KM(){this.g=new MM}function QM(c,d,f){let g=f||"";try{_w(c,function(T,A){let k=T;l(T)&&(k=Nf(T)),d.push(g+A+"="+encodeURIComponent(k))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function ca(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ca,xf),ca.prototype.g=function(){return new mu(this.l,this.j)},ca.prototype.i=function(c){return function(){return c}}({});function mu(c,d){ot.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(mu,ot),n=mu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,la(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ua(this):la(this),this.readyState==3&&Cw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ua(this))},n.Qa=function(c){this.g&&(this.response=c,ua(this))},n.ga=function(){this.g&&ua(this)};function ua(c){c.readyState=4,c.l=null,c.j=null,c.v=null,la(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function la(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(mu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Sw(c){let d="";return Y(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function $f(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Sw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ae(c,d,f))}function Oe(c){ot.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Oe,ot);var YM=/^https?$/i,JM=["POST","PUT"];n=Oe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kf.g(),this.v=this.o?nw(this.o):nw(kf),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Aw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(JM,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Nw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Aw(this,A)}};function Aw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Rw(c),yu(c)}function Rw(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pt(this,"complete"),pt(this,"abort"),yu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yu(this,!0)),Oe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Mw(this):this.bb())},n.bb=function(){Mw(this)};function Mw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Ln(c)!=4||c.Z()!=2)){if(c.u&&Ln(c)==4)ZI(c.Ea,0,c);else if(pt(c,"readystatechange"),Ln(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var T=String(c.D).match(Iw)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!YM.test(T?T.toLowerCase():"")}f=g}if(f)pt(c,"complete"),pt(c,"success");else{c.m=6;try{var A=2<Ln(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Rw(c)}}finally{yu(c)}}}}function yu(c,d){if(c.g){Nw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||pt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Nw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Ln(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),RM(d)}};function xw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ZM(c){let d={};c=(c.g&&2<=Ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(j(c[g]))continue;var f=b(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[T]||[];d[T]=A,A.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Pw(c){this.Aa=0,this.i=[],this.j=new ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=da("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=da("baseRetryDelayMs",5e3,c),this.cb=da("retryDelaySeedMs",1e4,c),this.Wa=da("forwardChannelMaxRetries",2,c),this.wa=da("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new pw(c&&c.concurrentRequestLimit),this.Da=new KM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Pw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){gt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=$w(this,null,this.W),_u(this)};function Hf(c){if(Ow(c),c.G==3){var d=c.U++,f=Fn(c.I);if(Ae(f,"SID",c.K),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),ha(c,f),d=new mr(c,c.j,d),d.L=2,d.v=gu(Fn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Hw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),hu(d)}Bw(c)}function vu(c){c.g&&(zf(c),c.g.cancel(),c.g=null)}function Ow(c){vu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Iu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function _u(c){if(!gw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Qo||GI(),Yo||(Qo(),Yo=!0),Ef.add(d,c),c.B=0}}function XM(c,d){return mw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=na(y(c.Ga,c,d),Uw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new mr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),D(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Fw(this,T,d),f=Fn(this.I),Ae(f,"RID",c),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),ha(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Sw(A)))+"&"+d:this.m&&$f(f,this.m,A)),Bf(this.h,T),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",d),Ae(f,"SID","null"),T.T=!0,Lf(T,f,null)):Lf(T,f,d),this.G=2}}else this.G==3&&(c?kw(this,c):this.i.length==0||gw(this.h)||kw(this))};function kw(c,d){var f;d?f=d.l:f=c.U++;let g=Fn(c.I);Ae(g,"SID",c.K),Ae(g,"RID",f),Ae(g,"AID",c.T),ha(c,g),c.m&&c.o&&$f(g,c.m,c.o),f=new mr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Fw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Bf(c.h,f),Lf(f,g,d)}function ha(c,d){c.H&&Y(c.H,function(f,g){Ae(d,g,f)}),c.l&&_w({},function(f,g){Ae(d,g,f)})}function Fw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var T=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=T[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Ce=!0;for(let Ze=0;Ze<f;Ze++){let ye=T[Ze].g,at=T[Ze].map;if(ye-=A,0>ye)A=Math.max(0,T[Ze].g-100),Ce=!1;else try{QM(at,k,"req"+ye+"_")}catch{g&&g(at)}}if(Ce){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Lw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Qo||GI(),Yo||(Qo(),Yo=!0),Ef.add(d,c),c.v=0}}function qf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=na(y(c.Fa,c),Uw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Vw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=na(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),vu(this),Vw(this))};function zf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Vw(c){c.g=new mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Fn(c.qa);Ae(d,"RID","rpc"),Ae(d,"SID",c.K),Ae(d,"AID",c.T),Ae(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ae(d,"TO",c.ja),Ae(d,"TYPE","xmlhttp"),ha(c,d),c.m&&c.o&&$f(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=gu(Fn(d)),f.m=null,f.P=!0,dw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,vu(this),qf(this),gt(19))};function Iu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function jw(c,d){var f=null;if(c.g==d){Iu(c),zf(c),c.g=null;var g=2}else if(Uf(c.h,d))f=d.D,yw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=uu(),pt(g,new aw(g,f)),_u(c)}else Lw(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&XM(c,d)||g==2&&qf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:ui(c,5);break;case 4:ui(c,10);break;case 3:ui(c,6);break;default:ui(c,2)}}}function Uw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ui(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let T=!g;g=new ci(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fu(g,"https"),gu(g),T?GM(g.toString(),f):WM(g.toString(),f)}else gt(2);c.G=0,c.l&&c.l.sa(d),Bw(c),Ow(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Bw(c){if(c.G=0,c.ka=[],c.l){let d=vw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function $w(c,d,f){var g=f instanceof ci?Fn(f):new ci(f);if(g.g!="")d&&(g.g=d+"."+g.g),pu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var A=new ci(null);g&&fu(A,g),d&&(A.g=d),T&&pu(A,T),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ae(g,f,d),Ae(g,"VER",c.la),ha(c,g),g}function Hw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Oe(new ca({eb:f})):new Oe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qw(){}n=qw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function wu(){}wu.prototype.g=function(c,d){return new Mt(c,d)};function Mt(c,d){ot.call(this),this.g=new Pw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!j(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!j(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ss(this)}C(Mt,ot),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Hf(this.g)},Mt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Nf(c),c=f);d.i.push(new FM(d.Ya++,c)),d.G==3&&_u(d)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Hf(this.g),delete this.g,Mt.aa.N.call(this)};function zw(c){Pf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(zw,Pf);function Gw(){Of.call(this),this.status=1}C(Gw,Of);function ss(c){this.g=c}C(ss,qw),ss.prototype.ua=function(){pt(this.g,"a")},ss.prototype.ta=function(c){pt(this.g,new zw(c))},ss.prototype.sa=function(c){pt(this.g,new Gw)},ss.prototype.ra=function(){pt(this.g,"b")},wu.prototype.createWebChannel=wu.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,Dv=cr.createWebChannelTransport=function(){return new wu},Ev=cr.getStatEventTarget=function(){return uu()},wv=cr.Event=oi,ah=cr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lu.NO_ERROR=0,lu.TIMEOUT=8,lu.HTTP_ERROR=6,Rc=cr.ErrorCode=lu,cw.COMPLETE="complete",Iv=cr.EventType=cw,rw.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",ot.prototype.listen=ot.prototype.K,vo=cr.WebChannel=rw,AB=cr.FetchXmlHttpFactory=ca,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,_v=cr.XhrIo=Oe}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});var PS="@firebase/firestore";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var jo="10.14.0";var Wi=new Gr("@firebase/firestore");function Mc(){return Wi.logLevel}function $(n,...e){if(Wi.logLevel<=fe.DEBUG){let t=e.map(aI);Wi.debug(`Firestore (${jo}): ${n}`,...t)}}function lr(n,...e){if(Wi.logLevel<=fe.ERROR){let t=e.map(aI);Wi.error(`Firestore (${jo}): ${n}`,...t)}}function To(n,...e){if(Wi.logLevel<=fe.WARN){let t=e.map(aI);Wi.warn(`Firestore (${jo}): ${n}`,...t)}}function aI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Z(n="Unexpected state"){let e=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function be(n,e){n||Z()}function ee(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends jt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ur=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var hh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Av=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Je.UNAUTHENTICATED))}shutdown(){}},Rv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Mv=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ur,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ur)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string"),new hh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new Je(e)}},Nv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},xv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Nv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Pv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ov=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){be(this.o===void 0);let r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(be(typeof t.token=="string"),this.R=t.token,new Pv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function RB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var fh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=RB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ve(n,e){return n<e?-1:n>e?1:0}function Co(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var it=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new it(0,0))}static max(){return new n(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ph=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Z(),r===void 0?r=e.length-t:r>e.length-t&&Z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Pe=class n extends ph{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},MB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ut=class n extends ph{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return MB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new V(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var K=class n{constructor(e){this.path=e}static fromPath(e){return new n(Pe.fromString(e))}static fromName(e){return new n(Pe.fromString(e).popFirst(5))}static empty(){return new n(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Pe(e.slice()))}};var kv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};kv.UNKNOWN_ID=-1;function NB(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new Ki(i,K.empty(),e)}function xB(n){return new Ki(n.readTime,n.key,-1)}var Ki=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(re.min(),K.empty(),-1)}static max(){return new n(re.max(),K.empty(),-1)}};function PB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=K.comparator(n.documentKey,e.documentKey),t!==0?t:ve(n.largestBatchId,e.largestBatchId))}var OB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Qc(n){return _(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==OB)throw n;$("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function kB(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yc(n){return n.name==="IndexedDbTransactionError"}var gA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Hh(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function FB(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var LB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PK=[...LB,"documentOverlays"],VB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jB=VB,UB=[...jB,"indexConfiguration","indexState","indexEntries"];var OK=[...UB,"globals"];function OS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Uo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Fe=class n{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eo(this.root,e,this.comparator,!0)}},Eo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();let e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}};Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ht=class n{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gh(this.data.getIterator())}getIteratorFrom(e){return new gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},gh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Mn=class n{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new n([])}unionWith(e){let t=new ht(Ut.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var mh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ft=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mh("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var BB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(n){if(be(!!n),typeof n=="string"){let e=0,t=BB.exec(n);if(be(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(n.seconds),nanos:Me(n.nanos)}}function Me(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ti(n){return typeof n=="string"?ft.fromBase64String(n):ft.fromUint8Array(n)}function cI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function uI(n){let e=n.mapValue.fields.__previous_value__;return cI(e)?uI(e):e}function Vc(n){let e=dr(n.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}var Lv=class{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},yh=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ch={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cI(n)?4:vA(n)?9007199254740991:yA(n)?10:11:Z()}function On(n,e){if(n===e)return!0;let t=Qi(n);if(t!==Qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vc(n).isEqual(Vc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=dr(i.timestampValue),a=dr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ti(i.bytesValue).isEqual(ti(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Me(i.doubleValue),a=Me(s.doubleValue);return o===a?Lc(o)===Lc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Co(n.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(OS(o)!==OS(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!On(o[u],a[u])))return!1;return!0}(n,e);default:return Z()}}function jc(n,e){return(n.values||[]).find(t=>On(t,e))!==void 0}function So(n,e){if(n===e)return 0;let t=Qi(n),r=Qi(e);if(t!==r)return ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ve(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Me(s.integerValue||s.doubleValue),u=Me(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return kS(n.timestampValue,e.timestampValue);case 4:return kS(Vc(n),Vc(e));case 5:return ve(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ti(s),u=ti(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ve(a[l],u[l]);if(h!==0)return h}return ve(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ve(Me(s.latitude),Me(o.latitude));return a!==0?a:ve(Me(s.longitude),Me(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return FS(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},y=o.fields||{},m=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=y.value)===null||u===void 0?void 0:u.arrayValue,M=ve(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:FS(m,C)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ch.mapValue&&o===ch.mapValue)return 0;if(s===ch.mapValue)return 1;if(o===ch.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=ve(u[p],h[p]);if(y!==0)return y;let m=So(a[u[p]],l[h[p]]);if(m!==0)return m}return ve(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Z()}}function kS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ve(n,e);let t=dr(n),r=dr(e),i=ve(t.seconds,r.seconds);return i!==0?i:ve(t.nanos,r.nanos)}function FS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=So(t[i],r[i]);if(s)return s}return ve(t.length,r.length)}function Ao(n){return Vv(n)}function Vv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=dr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ti(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return K.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Vv(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Vv(t.fields[o])}`;return i+"}"}(n.mapValue):Z()}function LS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jv(n){return!!n&&"integerValue"in n}function lI(n){return!!n&&"arrayValue"in n}function VS(n){return!!n&&"nullValue"in n}function jS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lh(n){return!!n&&"mapValue"in n}function yA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function xc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Uo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var un=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xc(t)}setAll(e){let t=Ut.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=xc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());lh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Uo(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(xc(this.value))}};function _A(n){let e=[];return Uo(n.fields,(t,r)=>{let i=new Ut([t]);if(lh(r)){let s=_A(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Mn(e)}var ln=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,re.min(),re.min(),re.min(),un.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,re.min(),re.min(),un.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,re.min(),re.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ro=class{constructor(e,t){this.position=e,this.inclusive=t}};function US(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),t.key):r=So(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function BS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!On(n.position[t],e.position[t]))return!1;return!0}var Mo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $B(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vh=class{},$e=class n extends vh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Bv(e,t,r):t==="array-contains"?new qv(e,r):t==="in"?new zv(e,r):t==="not-in"?new Gv(e,r):t==="array-contains-any"?new Wv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $v(e,r):new Hv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(So(t,this.value)):t!==null&&Qi(this.value)===Qi(t)&&this.matchesComparison(So(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},dn=class n extends vh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return IA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function IA(n){return n.op==="and"}function wA(n){return HB(n)&&IA(n)}function HB(n){for(let e of n.filters)if(e instanceof dn)return!1;return!0}function Uv(n){if(n instanceof $e)return n.field.canonicalString()+n.op.toString()+Ao(n.value);if(wA(n))return n.filters.map(e=>Uv(e)).join(",");{let e=n.filters.map(t=>Uv(t)).join(",");return`${n.op}(${e})`}}function EA(n,e){return n instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.field.isEqual(i.field)&&On(r.value,i.value)}(n,e):n instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&EA(o,i.filters[a]),!0):!1}(n,e):void Z()}function DA(n){return n instanceof $e?function(t){return`${t.field.canonicalString()} ${t.op} ${Ao(t.value)}`}(n):n instanceof dn?function(t){return t.op.toString()+" {"+t.getFilters().map(DA).join(" ,")+"}"}(n):"Filter"}var Bv=class extends $e{constructor(e,t,r){super(e,t,r),this.key=K.fromName(r.referenceValue)}matches(e){let t=K.comparator(e.key,this.key);return this.matchesComparison(t)}},$v=class extends $e{constructor(e,t){super(e,"in",t),this.keys=bA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Hv=class extends $e{constructor(e,t){super(e,"not-in",t),this.keys=bA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>K.fromName(r.referenceValue))}var qv=class extends $e{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return lI(t)&&jc(t.arrayValue,this.value)}},zv=class extends $e{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&jc(this.value.arrayValue,t)}},Gv=class extends $e{constructor(e,t){super(e,"not-in",t)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!jc(this.value.arrayValue,t)}},Wv=class extends $e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!lI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jc(this.value.arrayValue,r))}};var Kv=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function $S(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Kv(n,e,t,r,i,s,o)}function dI(n){let e=ee(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Uv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Hh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ao(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ao(r)).join(",")),e.ue=t}return e.ue}function hI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$B(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BS(n.startAt,e.startAt)&&BS(n.endAt,e.endAt)}function Qv(n){return K.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Yi=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function qB(n,e,t,r,i,s,o,a){return new Yi(n,e,t,r,i,s,o,a)}function fI(n){return new Yi(n)}function HS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TA(n){return n.collectionGroup!==null}function Pc(n){let e=ee(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ht(Ut.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Mo(s,r))}),t.has(Ut.keyField().canonicalString())||e.ce.push(new Mo(Ut.keyField(),r))}return e.ce}function xn(n){let e=ee(n);return e.le||(e.le=zB(e,Pc(n))),e.le}function zB(n,e){if(n.limitType==="F")return $S(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Mo(i.field,s)});let t=n.endAt?new Ro(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ro(n.startAt.position,n.startAt.inclusive):null;return $S(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yv(n,e){let t=n.filters.concat([e]);return new Yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jv(n,e,t){return new Yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qh(n,e){return hI(xn(n),xn(e))&&n.limitType===e.limitType}function CA(n){return`${dI(xn(n))}|lt:${n.limitType}`}function _o(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>DA(i)).join(", ")}]`),Hh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ao(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ao(i)).join(",")),`Target(${r})`}(xn(n))}; limitType=${n.limitType})`}function zh(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Pc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=US(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Pc(r),i)||r.endAt&&!function(o,a,u){let l=US(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Pc(r),i))}(n,e)}function GB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SA(n){return(e,t)=>{let r=!1;for(let i of Pc(n)){let s=WB(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function WB(n,e,t){let r=n.field.isKeyField()?K.comparator(e.key,t.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?So(u,l):Z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}var ni=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Uo(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return mA(this.inner)}size(){return this.innerSize}};var KB=new Fe(K.comparator);function hr(){return KB}var AA=new Fe(K.comparator);function Nc(...n){let e=AA;for(let t of n)e=e.insert(t.key,t);return e}function RA(n){let e=AA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hi(){return Oc()}function MA(){return Oc()}function Oc(){return new ni(n=>n.toString(),(n,e)=>n.isEqual(e))}var QB=new Fe(K.comparator),YB=new ht(K.comparator);function pe(...n){let e=YB;for(let t of n)e=e.add(t);return e}var JB=new ht(ve);function ZB(){return JB}function pI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function NA(n){return{integerValue:""+n}}function XB(n,e){return FB(e)?NA(e):pI(n,e)}var No=class{constructor(){this._=void 0}};function e$(n,e,t){return n instanceof xo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cI(s)&&(s=uI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ji?PA(n,e):n instanceof Zi?OA(n,e):function(i,s){let o=xA(i,s),a=qS(o)+qS(i.Pe);return jv(o)&&jv(i.Pe)?NA(a):pI(i.serializer,a)}(n,e)}function t$(n,e,t){return n instanceof Ji?PA(n,e):n instanceof Zi?OA(n,e):t}function xA(n,e){return n instanceof Po?function(r){return jv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var xo=class extends No{},Ji=class extends No{constructor(e){super(),this.elements=e}};function PA(n,e){let t=kA(e);for(let r of n.elements)t.some(i=>On(i,r))||t.push(r);return{arrayValue:{values:t}}}var Zi=class extends No{constructor(e){super(),this.elements=e}};function OA(n,e){let t=kA(e);for(let r of n.elements)t=t.filter(i=>!On(i,r));return{arrayValue:{values:t}}}var Po=class extends No{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function qS(n){return Me(n.integerValue||n.doubleValue)}function kA(n){return lI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function n$(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ji&&i instanceof Ji||r instanceof Zi&&i instanceof Zi?Co(r.elements,i.elements,On):r instanceof Po&&i instanceof Po?On(r.Pe,i.Pe):r instanceof xo&&i instanceof xo}(n.transform,e.transform)}var Zv=class{constructor(e,t){this.version=e,this.transformResults=t}},Gi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Oo=class{};function FA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _h(n.key,Gi.none()):new Xi(n.key,n.data,Gi.none());{let t=n.data,r=un.empty(),i=new ht(Ut.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fr(n.key,r,new Mn(i.toArray()),Gi.none())}}function r$(n,e,t){n instanceof Xi?function(i,s,o){let a=i.value.clone(),u=GS(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof fr?function(i,s,o){if(!dh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=GS(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(LA(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function kc(n,e,t,r){return n instanceof Xi?function(s,o,a,u){if(!dh(s.precondition,o))return a;let l=s.value.clone(),h=WS(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof fr?function(s,o,a,u){if(!dh(s.precondition,o))return a;let l=WS(s.fieldTransforms,u,o),h=o.data;return h.setAll(LA(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return dh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function i$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=xA(r.transform,i||null);s!=null&&(t===null&&(t=un.empty()),t.set(r.field,s))}return t||null}function zS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Co(r,i,(s,o)=>n$(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Xi=class extends Oo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fr=class extends Oo{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function LA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function GS(n,e,t){let r=new Map;be(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,t$(o,a,t[i]))}return r}function WS(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,e$(s,o,e))}return r}var _h=class extends Oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Xv=class extends Oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var e_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&r$(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=kc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=kc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=MA();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let u=FA(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pe())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(t,r)=>zS(t,r))&&Co(this.baseMutations,e.baseMutations,(t,r)=>zS(t,r))}},t_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){be(e.mutations.length===r.length);let i=function(){return QB}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var n_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var r_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ue,me;function s$(n){switch(n){default:return Z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function VA(n){if(n===void 0)return lr("GRPC error has no .code"),x.UNKNOWN;switch(n){case Ue.OK:return x.OK;case Ue.CANCELLED:return x.CANCELLED;case Ue.UNKNOWN:return x.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return x.INTERNAL;case Ue.UNAVAILABLE:return x.UNAVAILABLE;case Ue.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ue.NOT_FOUND:return x.NOT_FOUND;case Ue.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ue.ABORTED:return x.ABORTED;case Ue.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ue.DATA_LOSS:return x.DATA_LOSS;default:return Z()}}(me=Ue||(Ue={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var KS=null;function o$(){return new TextEncoder}var a$=new Xr([4294967295,4294967295],0);function QS(n){let e=o$().encode(n),t=new vv;return t.update(e),new Uint8Array(t.digest())}function YS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xr([t,r],0),new Xr([i,s],0)]}var i_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qi(`Invalid padding: ${t}`);if(r<0)throw new qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Xr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Xr.fromNumber(r)));return i.compare(a$)===1&&(i=new Xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=QS(e),[r,i]=YS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=QS(e),[r,i]=YS(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},qi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ih=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(re.min(),i,new Fe(ve),hr(),pe())}},Uc=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,pe(),pe(),pe())}};var Do=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},wh=class{constructor(e,t){this.targetId=e,this.me=t}},Eh=class{constructor(e,t,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Dh=class{constructor(){this.fe=0,this.ge=ZS(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),t=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new Uc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=ZS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},s_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=hr(),this.qe=JS(),this.Qe=new Fe(ve)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Qv(s))if(r===0){let o=new K(s.path);this.Ue(t,o,ln.newNoDocument(o,re.min()))}else be(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}KS?.et(function(h,p,y,m,C){var M,R,O,j,L,te;let Ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},Y=p.unchangedNames;return Y&&(Ie.bloomFilter={applied:C===0,hashCount:(M=Y?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(j=(O=(R=Y?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&j!==void 0?j:0,padding:(te=(L=Y?.bits)===null||L===void 0?void 0:L.padding)!==null&&te!==void 0?te:0,mightContain:E=>{var v;return(v=m?.mightContain(E))!==null&&v!==void 0&&v}}),Ie}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ti(r).toUint8Array()}catch(u){if(u instanceof mh)return To("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new i_(o,i,s)}catch(u){return To(u instanceof qi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Qv(a.target)){let u=new K(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ln.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Ih(e,t,this.Qe,this.ke,r);return this.ke=hr(),this.qe=JS(),this.Qe=new Fe(ve),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Dh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ht(ve),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Dh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function JS(){return new Fe(K.comparator)}function ZS(){return new Fe(K.comparator)}var c$={asc:"ASCENDING",desc:"DESCENDING"},u$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l$={and:"AND",or:"OR"},o_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function a_(n,e){return n.useProto3Json||Hh(e)?e:{value:e}}function bh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function d$(n,e){return bh(n,e.toTimestamp())}function Pn(n){return be(!!n),re.fromTimestamp(function(t){let r=dr(t);return new it(r.seconds,r.nanos)}(n))}function gI(n,e){return c_(n,e).canonicalString()}function c_(n,e){let t=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function UA(n){let e=Pe.fromString(n);return be(zA(e)),e}function u_(n,e){return gI(n.databaseId,e.path)}function bv(n,e){let t=UA(e);if(t.get(1)!==n.databaseId.projectId)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new K($A(t))}function BA(n,e){return gI(n.databaseId,e)}function h$(n){let e=UA(n);return e.length===4?Pe.emptyPath():$A(e)}function l_(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $A(n){return be(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function XS(n,e,t){return{name:u_(n,e),fields:t.value.mapValue.fields}}function f$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(be(h===void 0||typeof h=="string"),ft.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ft.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?x.UNKNOWN:VA(l.code);return new V(h,l.message||"")}(o);t=new Eh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=bv(n,r.document.name),s=Pn(r.document.updateTime),o=r.document.createTime?Pn(r.document.createTime):re.min(),a=new un({mapValue:{fields:r.document.fields}}),u=ln.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Do(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=bv(n,r.document),s=r.readTime?Pn(r.readTime):re.min(),o=ln.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Do([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=bv(n,r.document),s=r.removedTargetIds||[];t=new Do([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new r_(i,s),a=r.targetId;t=new wh(a,o)}}return t}function p$(n,e){let t;if(e instanceof Xi)t={update:XS(n,e.key,e.value)};else if(e instanceof _h)t={delete:u_(n,e.key)};else if(e instanceof fr)t={update:XS(n,e.key,e.data),updateMask:D$(e.fieldMask)};else{if(!(e instanceof Xv))return Z();t={verify:u_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof xo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ji)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Po)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:d$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(n,e.precondition)),t}function g$(n,e){return n&&n.length>0?(be(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Pn(i.updateTime):Pn(s);return o.isEqual(re.min())&&(o=Pn(s)),new Zv(o,i.transformResults||[])}(t,e))):[]}function m$(n,e){return{documents:[BA(n,e.path)]}}function y$(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=BA(n,i);let s=function(l){if(l.length!==0)return qA(dn.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:Io(y.field),direction:I$(y.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=a_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function v$(n){let e=h$(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){be(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let y=HA(p);return y instanceof dn&&wA(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(y=>function(C){return new Mo(wo(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,Hh(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,m=p.values||[];return new Ro(m,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,m=p.values||[];return new Ro(m,y)}(t.endAt)),qB(e,i,o,s,a,"F",u,l)}function _$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=wo(t.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=wo(t.unaryFilter.field);return $e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=wo(t.unaryFilter.field);return $e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=wo(t.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(n):n.fieldFilter!==void 0?function(t){return $e.create(wo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dn.create(t.compositeFilter.filters.map(r=>HA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(t.compositeFilter.op))}(n):Z()}function I$(n){return c$[n]}function w$(n){return u$[n]}function E$(n){return l$[n]}function Io(n){return{fieldPath:n.canonicalString()}}function wo(n){return Ut.fromServerFormat(n.fieldPath)}function qA(n){return n instanceof $e?function(t){if(t.op==="=="){if(jS(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NAN"}};if(VS(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jS(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NAN"}};if(VS(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(t.field),op:w$(t.op),value:t.value}}}(n):n instanceof dn?function(t){let r=t.getFilters().map(i=>qA(i));return r.length===1?r[0]:{compositeFilter:{op:E$(t.op),filters:r}}}(n):Z()}function D$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Bc=class n{constructor(e,t,r,i,s=re.min(),o=re.min(),a=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var d_=class{constructor(e){this.ct=e}};function b$(n){let e=v$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jv(e,e.limit,"L"):e}var Th=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Me(e.integerValue));else if("doubleValue"in e){let r=Me(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Lc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=dr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ti(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?vA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):yA(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Me(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),K.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Th.vt=new Th;var h_=class{constructor(){this.un=new f_}addToCollectionParentIndex(e,t){return this.un.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(Ki.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},f_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ht(Pe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ht(Pe.comparator)).toArray()}};var FK=new Uint8Array(0);var Rn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(41943040,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);var $c=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var p_=class{constructor(){this.changes=new ni(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var g_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var m_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&kc(r.mutation,i,Mn.empty(),it.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pe()){let i=Hi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Nc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Hi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=hr(),o=Oc(),a=function(){return Oc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof fr)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),kc(h.mutation,l,h.mutation.getFieldMask(),it.now())):o.set(l.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new g_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Oc(),i=new Fe((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Mn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||pe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=MA();h.forEach(y=>{if(!s.has(y)){let m=FA(t.get(y),r.get(y));m!==null&&p.set(y,m),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(Hi()),a=-1,u=s;return o.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,pe())).next(h=>({batchId:a,changes:RA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(r=>{let i=Nc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Nc();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,u=>{let l=function(p,y){return new Yi(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,ln.newInvalidDocument(h)))});let a=Nc();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&kc(h.mutation,l,Mn.empty(),it.now()),zh(t,l)&&(a=a.insert(u,l))}),a})}};var y_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return P.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Pn(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:b$(i.bundledQuery),readTime:Pn(i.readTime)}}(t)),P.resolve()}};var v_=class{constructor(){this.overlays=new Fe(K.comparator),this.Ir=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Hi();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Hi(),s=t.length+1,o=new K(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Fe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Hi(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Hi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new n_(t,r));let s=this.Ir.get(t);s===void 0&&(s=pe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var __=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var Hc=class{constructor(){this.Tr=new ht(Be.Er),this.dr=new ht(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Be(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Be(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new K(new Pe([])),r=new Be(t,e),i=new Be(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new K(new Pe([])),r=new Be(t,e),i=new Be(t,e+1),s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Be(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Be=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return K.comparator(e.key,t.key)||ve(e.wr,t.wr)}static Ar(e,t){return ve(e.wr,t.wr)||K.comparator(e.key,t.key)}};var I_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ht(Be.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new e_(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Be(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,t){return P.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Be(t,0),i=new Be(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ht(ve);return t.forEach(i=>{let s=new Be(i,0),o=new Be(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;K.isDocumentKey(s)||(s=s.child(""));let o=new Be(new K(s),0),a=new ht(ve);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),P.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){be(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(t.mutations,i=>{let s=new Be(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Be(t,0),i=this.br.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var w_=class{constructor(e){this.Mr=e,this.docs=function(){return new Fe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=hr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ln.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=hr(),o=t.path,a=new K(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||PB(xB(h),r)<=0||(i.has(h.key)||zh(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Z()}Or(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new E_(this)}getSize(e){return P.resolve(this.size)}},E_=class extends p_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var D_=class{constructor(e){this.persistence=e,this.Nr=new ni(t=>dI(t),hI),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hc,this.targetCount=0,this.kr=$c.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),P.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new $c(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Kn(t),P.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.Br.containsKey(t))}};var b_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new gA(0),this.Kr=!1,this.Kr=!0,this.$r=new __,this.referenceDelegate=e(this),this.Ur=new D_(this),this.indexManager=new h_,this.remoteDocumentCache=function(i){return new w_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new d_(t),this.Gr=new y_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new v_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new I_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){$("MemoryPersistence","Starting transaction:",e);let i=new T_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},T_=class extends Fv{constructor(e){super(),this.currentSequenceNumber=e}},C_=class n{constructor(e){this.persistence=e,this.Jr=new Hc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),P.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=K.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return P.or([()=>P.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var S_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=pe(),i=pe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var A_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var R_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return c0()?8:kB(Ye())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new A_;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Mc()<=fe.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",_o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(Mc()<=fe.DEBUG&&$("QueryEngine","Query:",_o(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Mc()<=fe.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",_o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(t))):P.resolve())}Yi(e,t){if(HS(t))return P.resolve(null);let r=xn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Jv(t,null,"F"),r=xn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,o,u.readTime)?this.Yi(e,Jv(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return HS(t)||i.isEqual(re.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?P.resolve(null):(Mc()<=fe.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_o(t)),this.rs(e,o,t,NB(i,-1)).next(a=>a))})}ts(e,t){let r=new ht(SA(e));return t.forEach((i,s)=>{zh(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Mc()<=fe.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",_o(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ki.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var M_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Fe(ve),this._s=new ni(s=>dI(s),hI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function T$(n,e,t,r){return new M_(n,e,t,r)}function GA(n,e){return _(this,null,function*(){let t=ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=pe();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function C$(n,e){let t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),m=P.resolve();return y.forEach(C=>{m=m.next(()=>h.getEntry(u,C)).next(M=>{let R=l.docVersions.get(C);be(R!==null),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=pe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function WA(n){let e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function S$(n,e){let t=ee(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let m=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(ft.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(M,R,O){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(y,m,h)&&a.push(t.Ur.updateTargetData(s,m))});let u=hr(),l=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(A$(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(re.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.os=i,s))}function A$(n,e,t){let r=pe(),i=pe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=hr();return t.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function R$(n,e){let t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function M$(n,e){let t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Bc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function N_(n,e,t){return _(this,null,function*(){let r=ee(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Yc(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function eA(n,e,t){let r=ee(n),i=re.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=ee(u),y=p._s.get(h);return y!==void 0?P.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,o,xn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:re.min(),t?s:pe())).next(a=>(N$(r,GB(e),a),{documents:a,Ts:s})))}function N$(n,e,t){let r=n.us.get(e)||re.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Ch=class{constructor(){this.activeTargetIds=ZB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var x_=class{constructor(){this.so=new Ch,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ch,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var P_=class{_o(e){}shutdown(){}};var Sh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var uh=null;function Tv(){return uh===null?uh=function(){return 268435456+Math.round(2147483648*Math.random())}():uh++,"0x"+uh.toString(16)}var x$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var O_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var dt="WebChannelConnection",k_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=Tv(),u=this.xo(t,r.toUriEncodedString());$("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,u,l,i).then(h=>($("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw To("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=x$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Tv();return new Promise((o,a)=>{let u=new _v;u.setWithCredentials(!0),u.listenOnce(Iv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rc.NO_ERROR:let h=u.getResponseJson();$(dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Rc.TIMEOUT:$(dt,`RPC '${e}' ${s} timed out`),a(new V(x.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:let p=u.getStatus();if($(dt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let m=y?.error;if(m&&m.status&&m.message){let C=function(R){let O=R.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(O)>=0?O:x.UNKNOWN}(m.status);a(new V(C,m.message))}else a(new V(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new V(x.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{$(dt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);$(dt,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Tv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Dv(),a=Ev(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=s.join("");$(dt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),y=!1,m=!1,C=new O_({Io:R=>{m?$(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||($(dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),$(dt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),M=(R,O,j)=>{R.listen(O,L=>{try{j(L)}catch(te){setTimeout(()=>{throw te},0)}})};return M(p,vo.EventType.OPEN,()=>{m||($(dt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),M(p,vo.EventType.CLOSE,()=>{m||(m=!0,$(dt,`RPC '${e}' stream ${i} transport closed`),C.So())}),M(p,vo.EventType.ERROR,R=>{m||(m=!0,To(dt,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new V(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,vo.EventType.MESSAGE,R=>{var O;if(!m){let j=R.data[0];be(!!j);let L=j,te=L.error||((O=L[0])===null||O===void 0?void 0:O.error);if(te){$(dt,`RPC '${e}' stream ${i} received error:`,te);let Ie=te.status,Y=function(I){let D=Ue[I];if(D!==void 0)return VA(D)}(Ie),E=te.message;Y===void 0&&(Y=x.INTERNAL,E="Unknown error status: "+Ie+" with message "+te.message),m=!0,C.So(new V(Y,E)),p.close()}else $(dt,`RPC '${e}' stream ${i} received:`,j),C.bo(j)}}),M(a,wv.STAT_EVENT,R=>{R.stat===ah.PROXY?$(dt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===ah.NOPROXY&&$(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function Cv(){return typeof document<"u"?document:null}function Gh(n){return new o_(n,!0)}var Ah=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Rh=class{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ah(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new V(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},F_=class extends Rh{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=f$(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Pn(o.readTime):re.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=l_(this.serializer),t.addTarget=function(s,o){let a,u=o.target;if(a=Qv(u)?{documents:m$(s,u)}:{query:y$(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=jA(s,o.resumeToken);let l=a_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=bh(s,o.snapshotVersion.toTimestamp());let l=a_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=_$(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=l_(this.serializer),t.removeTarget=e,this.a_(t)}},L_=class extends Rh{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return be(!!e.streamToken),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=g$(e.writeResults,e.commitTime),r=Pn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=l_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>p$(this.serializer,r))};this.a_(t)}};var V_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,c_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(x.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,c_(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},j_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(lr(t),this.D_=!1):$("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var U_=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){es(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=ee(u);l.L_.add(4),yield Jc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Wh(l)})}(this))}))}),this.q_=new j_(r,i)}};function Wh(n){return _(this,null,function*(){if(es(n))for(let e of n.B_)yield e(!0)})}function Jc(n){return _(this,null,function*(){for(let e of n.B_)yield e(!1)})}function KA(n,e){let t=ee(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),_I(t)?vI(t):Bo(t).r_()&&yI(t,e))}function mI(n,e){let t=ee(n),r=Bo(t);t.N_.delete(e),r.r_()&&QA(t,e),t.N_.size===0&&(r.r_()?r.o_():es(t)&&t.q_.set("Unknown"))}function yI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bo(n).A_(e)}function QA(n,e){n.Q_.xe(e),Bo(n).R_(e)}function vI(n){n.Q_=new s_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Bo(n).start(),n.q_.v_()}function _I(n){return es(n)&&!Bo(n).n_()&&n.N_.size>0}function es(n){return ee(n).L_.size===0}function YA(n){n.Q_=void 0}function P$(n){return _(this,null,function*(){n.q_.set("Online")})}function O$(n){return _(this,null,function*(){n.N_.forEach((e,t)=>{yI(n,e)})})}function k$(n,e){return _(this,null,function*(){YA(n),_I(n)?(n.q_.M_(e),vI(n)):n.q_.set("Unknown")})}function F$(n,e,t){return _(this,null,function*(){if(n.q_.set("Online"),e instanceof Eh&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Mh(n,r)}else if(e instanceof Do?n.Q_.Ke(e):e instanceof wh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(re.min()))try{let r=yield WA(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),QA(s,u);let p=new Bc(h.target,u,l,h.sequenceNumber);yI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){$("RemoteStore","Failed to raise snapshot:",r),yield Mh(n,r)}})}function Mh(n,e,t){return _(this,null,function*(){if(!Yc(e))throw e;n.L_.add(1),yield Jc(n),n.q_.set("Offline"),t||(t=()=>WA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Wh(n)}))})}function JA(n,e){return e().catch(t=>Mh(n,t,e))}function Kh(n){return _(this,null,function*(){let e=ee(n),t=ri(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;L$(e);)try{let i=yield R$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,V$(e,i)}catch(i){yield Mh(e,i)}ZA(e)&&XA(e)})}function L$(n){return es(n)&&n.O_.length<10}function V$(n,e){n.O_.push(e);let t=ri(n);t.r_()&&t.V_&&t.m_(e.mutations)}function ZA(n){return es(n)&&!ri(n).n_()&&n.O_.length>0}function XA(n){ri(n).start()}function j$(n){return _(this,null,function*(){ri(n).p_()})}function U$(n){return _(this,null,function*(){let e=ri(n);for(let t of n.O_)e.m_(t.mutations)})}function B$(n,e,t){return _(this,null,function*(){let r=n.O_.shift(),i=t_.from(r,e,t);yield JA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Kh(n)})}function $$(n,e){return _(this,null,function*(){e&&ri(n).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return s$(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();ri(r).s_(),yield JA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Kh(r)}})}(n,e)),ZA(n)&&XA(n)})}function tA(n,e){return _(this,null,function*(){let t=ee(n);t.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=es(t);t.L_.add(3),yield Jc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Wh(t)})}function H$(n,e){return _(this,null,function*(){let t=ee(n);e?(t.L_.delete(2),yield Wh(t)):e||(t.L_.add(2),yield Jc(t),t.q_.set("Unknown"))})}function Bo(n){return n.K_||(n.K_=function(t,r,i){let s=ee(t);return s.w_(),new F_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:P$.bind(null,n),Ro:O$.bind(null,n),mo:k$.bind(null,n),d_:F$.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.K_.s_(),_I(n)?vI(n):n.q_.set("Unknown")):(yield n.K_.stop(),YA(n))}))),n.K_}function ri(n){return n.U_||(n.U_=function(t,r,i){let s=ee(t);return s.w_(),new L_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:j$.bind(null,n),mo:$$.bind(null,n),f_:U$.bind(null,n),g_:B$.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.U_.s_(),yield Kh(n)):(yield n.U_.stop(),n.O_.length>0&&($("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var B_=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function II(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Yc(n))return new V(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Nh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||K.comparator(t.key,r.key):(t,r)=>K.comparator(t.key,r.key),this.keyedMap=Nc(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var xh=class{constructor(){this.W_=new Fe(K.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ko=class n{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Nh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var $_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},H_=class{constructor(){this.queries=nA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ee(t),s=i.queries;i.queries=nA(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new V(x.ABORTED,"Firestore shutting down"))}};function nA(){return new ni(n=>CA(n),qh)}function q$(n,e){return _(this,null,function*(){let t=ee(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new $_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=II(o,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&wI(t)})}function z$(n,e){return _(this,null,function*(){let t=ee(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function G$(n,e){let t=ee(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&wI(t)}function W$(n,e,t){let r=ee(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function wI(n){n.Y_.forEach(e=>{e.next()})}var q_,rA;(rA=q_||(q_={})).ea="default",rA.Cache="cache";var z_=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ko(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==q_.Cache}};var Ph=class{constructor(e){this.key=e}},Oh=class{constructor(e){this.key=e}},G_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=SA(e),this.Ra=new Nh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new xh,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),m=zh(this.query,p)?p:null,C=!!y&&this.mutatedKeys.has(y.key),M=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),R=!1;y&&m?y.data.isEqual(m.data)?C!==M&&(r.track({type:3,doc:m}),R=!0):this.ga(y,m)||(r.track({type:2,doc:m}),R=!0,(u&&this.Aa(m,u)>0||l&&this.Aa(m,l)<0)&&(a=!0)):!y&&m?(r.track({type:0,doc:m}),R=!0):y&&!m&&(r.track({type:1,doc:y}),R=!0,(u||l)&&(a=!0)),R&&(m?(o=o.add(m),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(m,C){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return M(m)-M(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new ko(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Oh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ph(r))}),t}ba(e){this.Ta=e.Ts,this.da=pe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},W_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},K_=class{constructor(e){this.key=e,this.va=!1}},Q_=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ni(a=>CA(a),qh),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(K.comparator),this.Na=new Map,this.La=new Hc,this.Ba={},this.ka=new Map,this.qa=$c.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function K$(n,e,t=!0){return _(this,null,function*(){let r=sR(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield eR(r,e,t,!0),i})}function Q$(n,e){return _(this,null,function*(){let t=sR(n);yield eR(t,e,!0,!1)})}function eR(n,e,t,r){return _(this,null,function*(){let i=yield M$(n.localStore,xn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield Y$(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&KA(n.remoteStore,i),a})}function Y$(n,e,t,r,i){return _(this,null,function*(){n.Ka=(p,y,m)=>function(M,R,O,j){return _(this,null,function*(){let L=R.view.ma(O);L.ns&&(L=yield eA(M.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,L)));let te=j&&j.targetChanges.get(R.targetId),Ie=j&&j.targetMismatches.get(R.targetId)!=null,Y=R.view.applyChanges(L,M.isPrimaryClient,te,Ie);return sA(M,R.targetId,Y.wa),Y.snapshot})}(n,p,y,m);let s=yield eA(n.localStore,e,!0),o=new G_(e,s.Ts),a=o.ma(s.documents),u=Uc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,u);sA(n,t,l.wa);let h=new W_(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function J$(n,e,t){return _(this,null,function*(){let r=ee(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!qh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield N_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&mI(r.remoteStore,i.targetId),Y_(r,i.targetId)}).catch(Qc))):(Y_(r,i.targetId),yield N_(r.localStore,i.targetId,!0))})}function Z$(n,e){return _(this,null,function*(){let t=ee(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mI(t.remoteStore,r.targetId))})}function X$(n,e,t){return _(this,null,function*(){let r=oH(n);try{let i=yield function(o,a){let u=ee(o),l=it.now(),h=a.reduce((m,C)=>m.add(C.key),pe()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let C=hr(),M=pe();return u.cs.getEntries(m,h).next(R=>{C=R,C.forEach((O,j)=>{j.isValidDocument()||(M=M.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,C)).next(R=>{p=R;let O=[];for(let j of a){let L=i$(j,p.get(j.key).overlayedDocument);L!=null&&O.push(new fr(j.key,L,_A(L.value.mapValue),Gi.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,O,a)}).next(R=>{y=R;let O=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(m,R.batchId,O)})}).then(()=>({batchId:y.batchId,changes:RA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Fe(ve)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Zc(r,i.changes),yield Kh(r.remoteStore)}catch(i){let s=II(i,"Failed to persist write");t.reject(s)}})}function tR(n,e){return _(this,null,function*(){let t=ee(n);try{let r=yield S$(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?be(o.va):i.removedDocuments.size>0&&(be(o.va),o.va=!1))}),yield Zc(t,r,e)}catch(r){yield Qc(r)}})}function iA(n,e,t){let r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=ee(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&wI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eH(n,e,t){return _(this,null,function*(){let r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Fe(K.comparator);o=o.insert(s,ln.newNoDocument(s,re.min()));let a=pe().add(s),u=new Ih(re.min(),new Map,new Fe(ve),o,a);yield tR(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),EI(r)}else yield N_(r.localStore,e,!1).then(()=>Y_(r,e,t)).catch(Qc)})}function tH(n,e){return _(this,null,function*(){let t=ee(n),r=e.batch.batchId;try{let i=yield C$(t.localStore,e);rR(t,r,null),nR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zc(t,i)}catch(i){yield Qc(i)}})}function nH(n,e,t){return _(this,null,function*(){let r=ee(n);try{let i=yield function(o,a){let u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(be(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);rR(r,e,t),nR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zc(r,i)}catch(i){yield Qc(i)}})}function nR(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function rR(n,e,t){let r=ee(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Y_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||iR(n,r)})}function iR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(mI(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),EI(n))}function sA(n,e,t){for(let r of t)r instanceof Ph?(n.La.addReference(r.key,e),rH(n,r)):r instanceof Oh?($("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||iR(n,r.key)):Z()}function rH(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||($("SyncEngine","New document in limbo: "+t),n.xa.add(r),EI(n))}function EI(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new K(Pe.fromString(e)),r=n.qa.next();n.Na.set(r,new K_(t)),n.Oa=n.Oa.insert(t,r),KA(n.remoteStore,new Bc(xn(fI(t.path)),r,"TargetPurposeLimboResolution",gA.oe))}}function Zc(n,e,t){return _(this,null,function*(){let r=ee(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=S_.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return _(this,null,function*(){let h=ee(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,y=>P.forEach(y.$i,m=>h.persistence.referenceDelegate.addReference(p,y.targetId,m)).next(()=>P.forEach(y.Ui,m=>h.persistence.referenceDelegate.removeReference(p,y.targetId,m)))))}catch(p){if(!Yc(p))throw p;$("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let m=h.os.get(y),C=m.snapshotVersion,M=m.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(y,M)}}})}(r.localStore,s))})}function iH(n,e){return _(this,null,function*(){let t=ee(n);if(!t.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=yield GA(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new V(x.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zc(t,r.hs)}})}function sH(n,e){let t=ee(n),r=t.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function sR(n){let e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eH.bind(null,e),e.Ca.d_=G$.bind(null,e.eventManager),e.Ca.$a=W$.bind(null,e.eventManager),e}function oH(n){let e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nH.bind(null,e),e}var oA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=Gh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return T$(this.persistence,new R_,t.initialUser,this.serializer)}Ga(t){return new b_(C_.Zr,this.serializer)}Wa(t){return new x_}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var aH=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iH.bind(null,this.syncEngine),yield H$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new H_}()}createDatastore(t){let r=Gh(t.databaseInfo.databaseId),i=function(o){return new k_(o)}(t.databaseInfo);return function(o,a,u,l){return new V_(o,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,u){return new U_(i,s,o,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>iA(this.syncEngine,r,0),function(){return Sh.D()?new Sh:new P_}())}createSyncEngine(t,r){return function(s,o,a,u,l,h,p){let y=new Q_(s,o,a,u,l,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(s){return _(this,null,function*(){let o=ee(s);$("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Jc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var J_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Z_=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=fh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){$("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=II(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Sv(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield GA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function aA(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield cH(n);$("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>tA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>tA(e.remoteStore,i)),n._onlineComponents=e})}function cH(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Sv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;To("Error using user provided cache. Falling back to memory cache: "+t),yield Sv(n,new oA)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield Sv(n,new oA);return n._offlineComponents})}function oR(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield aA(n,n._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield aA(n,new aH))),n._onlineComponents})}function uH(n){return oR(n).then(e=>e.syncEngine)}function cA(n){return _(this,null,function*(){let e=yield oR(n),t=e.eventManager;return t.onListen=K$.bind(null,e.syncEngine),t.onUnlisten=J$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Q$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Z$.bind(null,e.syncEngine),t})}function aR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var uA=new Map;function cR(n,e,t){if(!t)throw new V(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lH(n,e,t,r){if(e===!0&&r===!0)throw new V(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lA(n){if(!K.isDocumentKey(n))throw new V(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dA(n){if(K.isDocumentKey(n))throw new V(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z()}function Fc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Qh(n);throw new V(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var kh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Av;switch(r.type){case"firstParty":return new xv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=uA.get(t);r&&($("ComponentProvider","Removing Datastore"),uA.delete(t),r.terminate())}(this),Promise.resolve()}};function uR(n,e,t,r={}){var i;let s=(n=Fc(n,Fo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Je.MOCK_USER;else{a=n0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(l)}n._authCredentials=new Rv(new hh(a,u))}}var Lo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Bt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ei=class n extends Lo{constructor(e,t,r){super(e,t,fI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new K(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function lR(n,e,...t){if(n=rt(n),cR("collection","path",e),n instanceof Fo){let r=Pe.fromString(e,...t);return dA(r),new ei(n,null,r)}{if(!(n instanceof Bt||n instanceof ei))throw new V(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return dA(r),new ei(n.firestore,null,r)}}function dR(n,e,...t){if(n=rt(n),arguments.length===1&&(e=fh.newId()),cR("doc","path",e),n instanceof Fo){let r=Pe.fromString(e,...t);return lA(r),new Bt(n,null,new K(r))}{if(!(n instanceof Bt||n instanceof ei))throw new V(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return lA(r),new Bt(n.firestore,n instanceof ei?n.converter:null,new K(r))}}var Fh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ah(this,"async_queue_retry"),this.Vu=()=>{let r=Cv();r&&$("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Cv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Cv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ur;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yc(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw lr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=B_.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function hA(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Vo=class extends Fo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Fh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Fh(e),this._firestoreClient=void 0,yield e}})}};function Yh(n,e){let t=typeof n=="object"?n:co(),r=typeof n=="string"?n:e||"(default)",i=mc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=t0("firestore");s&&uR(i,...s)}return i}function hR(n){if(n._terminated)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dH(n),n._firestoreClient}function dH(n){var e,t,r;let i=n._freezeSettings(),s=function(a,u,l,h){return new Lv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,aR(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Z_(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var qc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ft.fromBase64String(e))}catch(t){throw new V(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var zc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Lh=class{constructor(e){this._methodName=e}};var Gc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}};var Wc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var hH=/^__.*__$/,X_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xi(e,this.data,t,this.fieldTransforms)}};function fR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}var eI=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fR(this.Cu)&&hH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},tI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gh(e)}Qu(e,t,r,i=!1){return new eI({Cu:e,methodName:t,qu:r,path:Ut.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function pR(n){let e=n._freezeSettings(),t=Gh(n._databaseId);return new tI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fH(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);yR("Data must be an object, but it was:",o,r);let a=gR(r,o),u,l;if(s.merge)u=new Mn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=gH(e,p,t);if(!o.contains(y))throw new V(x.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);yH(h,y)||h.push(y)}u=new Mn(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new X_(new un(a),u,l)}function pH(n,e,t,r=!1){return DI(t,n.Qu(r?4:3,e))}function DI(n,e){if(mR(n=rt(n)))return yR("Unsupported field value:",e,n),gR(n,e);if(n instanceof Lh)return function(r,i){if(!fR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=DI(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=it.fromDate(r);return{timestampValue:bh(i.serializer,s)}}if(r instanceof it){let s=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bh(i.serializer,s)}}if(r instanceof Gc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qc)return{bytesValue:jA(i.serializer,r._byteString)};if(r instanceof Bt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Wc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return pI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Qh(r)}`)}(n,e)}function gR(n,e){let t={};return mA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uo(n,(r,i)=>{let s=DI(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function mR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Gc||n instanceof qc||n instanceof Bt||n instanceof Lh||n instanceof Wc)}function yR(n,e,t){if(!mR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Qh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function gH(n,e,t){if((e=rt(e))instanceof zc)return e._internalPath;if(typeof e=="string")return vR(n,e);throw Vh("Field path arguments must be of type string or ",n,!1,void 0,t)}var mH=new RegExp("[~\\*/\\[\\]]");function vR(n,e,t){if(e.search(mH)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vh(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(x.INVALID_ARGUMENT,a+n+u)}function yH(n,e){return n.some(t=>t.isEqual(e))}var jh=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new nI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(bI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},nI=class extends jh{data(){return super.data()}};function bI(n,e){return typeof e=="string"?vR(n,e):e instanceof zc?e._internalPath:e._delegate._internalPath}function vH(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kc=class{},rI=class extends Kc{};function _R(n,e,...t){let r=[];e instanceof Kc&&r.push(e),r=r.concat(t),function(s){let o=s.filter(u=>u instanceof iI).length,a=s.filter(u=>u instanceof Uh).length;if(o>1||o>0&&a>0)throw new V(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Uh=class n extends rI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return wR(e._query,t),new Lo(e.firestore,e.converter,Yv(e._query,t))}_parse(e){let t=pR(e.firestore);return function(s,o,a,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new V(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){pA(p,h);let m=[];for(let C of p)m.push(fA(u,s,C));y={arrayValue:{values:m}}}else y=fA(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||pA(p,h),y=pH(a,o,p,h==="in"||h==="not-in");return $e.create(l,h,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function IR(n,e,t){let r=e,i=bI("where",n);return Uh._create(i,r,t)}var iI=class n extends Kc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:dn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)wR(o,u),o=Yv(o,u)}(e._query,t),new Lo(e.firestore,e.converter,Yv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function fA(n,e,t){if(typeof(t=rt(t))=="string"){if(t==="")throw new V(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TA(e)&&t.indexOf("/")!==-1)throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Pe.fromString(t));if(!K.isDocumentKey(r))throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LS(n,new K(r))}if(t instanceof Bt)return LS(n,t._key);throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qh(t)}.`)}function pA(n,e){if(!Array.isArray(n)||n.length===0)throw new V(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wR(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new V(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var sI=class{convertValue(e,t="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Uo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Me(o.doubleValue));return new Wc(s)}convertGeoPoint(e){return new Gc(Me(e.latitude),Me(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=uI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}convertTimestamp(e){let t=dr(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Pe.fromString(e);be(zA(r));let i=new yh(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(t)||lr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function _H(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var zi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Bh=class extends jh{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new bo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(bI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},bo=class extends Bh{data(e={}){return super.data(e)}},oI=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bo(this._firestore,this._userDataWriter,r.key,r,new zi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new bo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new bo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:IH(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function IH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}var $h=class extends sI{constructor(e){super(),this.firestore=e}convertBytes(e){return new qc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}};function ER(n,e){let t=Fc(n.firestore,Vo),r=dR(n),i=_H(n.converter,e);return wH(t,[fH(pR(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Gi.exists(!1))]).then(()=>r)}function TI(n,...e){var t,r,i;n=rt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||hA(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(hA(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Bt)l=Fc(n.firestore,Vo),h=fI(n._key.path),u={next:p=>{e[o]&&e[o](EH(l,n,p))},error:e[o+1],complete:e[o+2]};else{let p=Fc(n,Lo);l=Fc(p.firestore,Vo),h=p._query;let y=new $h(l);u={next:m=>{e[o]&&e[o](new oI(l,y,p,m))},error:e[o+1],complete:e[o+2]},vH(n._query)}return function(y,m,C,M){let R=new J_(M),O=new z_(m,R,C);return y.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return q$(yield cA(y),O)})),()=>{R.Za(),y.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return z$(yield cA(y),O)}))}}(hR(l),h,a,u)}function wH(n,e){return function(r,i){let s=new ur;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return X$(yield uH(r),i,s)})),s.promise}(hR(n),e)}function EH(n,e,t){let r=t.docs.get(e._key),i=new $h(n);return new Bh(n,i,e._key,r,new zi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){jo=i})(Qr),Kr(new Jt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Vo(new Mv(r.getProvider("auth-internal")),new Ov(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yh(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ze(PS,"4.7.3",e),ze(PS,"4.7.3","esm2017")})();var Jh=function(){return Jh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Jh.apply(this,arguments)};var TH={includeMetadataChanges:!1};function DR(n,e){return e===void 0&&(e=TH),new ie(function(t){var r=TI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function bR(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Jh(Jh({},r),(t={},t[e.idField]=n.id,t))}function TR(n){return DR(n,{includeMetadataChanges:!0}).pipe(Q(function(e){return e.docs}))}function CR(n,e){return e===void 0&&(e={}),TR(n).pipe(Q(function(t){return t.map(function(r){return bR(r,e)})}))}var pr=class{constructor(e){return e}},SR="firestore",CI=class{constructor(){return vc(SR)}};var SI=new U("angularfire2.firestore-instances");function CH(n,e){let t=jd(SR,n,e);return t&&new pr(t)}function SH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pr(r)}}var AH={provide:CI,deps:[[new Et,SI]]},RH={provide:pr,useFactory:CH,deps:[[new Et,SI],rr]};function AR(n,...e){return ze("angularfire",ki.full,"fst"),rn([RH,AH,{provide:SI,useFactory:SH(n),multi:!0,deps:[_e,Ge,ho,Fi,[new Et,Ac],[new Et,lo],...e]}])}var Zh=bt(CR,!0);var RR=bt(ER,!0);var Xc=bt(lR,!0);var MR=bt(Yh,!0);var NR=bt(_R,!0);var xR=bt(IR,!0);function eu(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&Rg(eu);let r=t?e?.injector?.get(Hs)??N(Hs):null,i=MH(e?.equal),s;e?.requireSync?s=Dn({kind:0},{equal:i}):s=Dn({kind:1,value:e?.initialValue},{equal:i});let o=n.subscribe({next:a=>s.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;s.set({kind:2,error:a})}});if(e?.requireSync&&s().kind===0)throw new H(601,!1);return r?.onDestroy(o.unsubscribe.bind(o)),Ai(()=>{let a=s();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new H(601,!1)}},{equal:e?.equal})}function MH(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var NH=(n,e)=>e.name;function xH(n,e){if(n&1&&(G(0,"div"),ue(1),q()),n&2){let t=e.$implicit;xe(),sm("",t.name," ",t.subjectType,"")}}function PH(n,e){if(n&1&&Jl(0,xH,2,2,"div",null,NH),n&2){let t=Kn();Zl(t.subjects$())}}function OH(n,e){if(n&1&&(G(0,"p"),ue(1,"Brak danych lub u\u017Cytkownik niezalogowany."),q(),G(2,"pre"),ue(3),wT(4,"json"),q()),n&2){let t=Kn();xe(3),Ti("Dane: ",ET(4,1,t.subjects$()),"")}}var Xh=class n{firestore=N(pr);authService=N(Rt);getSubjects(){let e=Xc(this.firestore,"subjects");return Zh(e,{idField:"id"})}subjects$=eu(this.getSubjects(),{initialValue:[]});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["study-platform"]],standalone:!0,features:[Ke],decls:9,vars:1,consts:[[1,"vh-100","gradient-custom"]],template:function(t,r){t&1&&(Re(0,"app-header"),G(1,"section",0)(2,"h2"),ue(3,"Home Page"),q(),G(4,"h2"),ue(5,"gh pages test 2"),q(),kt(6,PH,2,0)(7,OH,5,3),q(),Re(8,"app-footer")),t&2&&(xe(6),Qt(r.subjects$()&&r.subjects$().length>0?6:7))},dependencies:[on,kT,mo,yo]})};var ef={production:!1,firebaseConfig:{apiKey:"AIzaSyAYtj6yb97NevfWKPKMCM00tIffPfexTmY",authDomain:"study-platform-4a2ba.firebaseapp.com",projectId:"study-platform-4a2ba",storageBucket:"study-platform-4a2ba.firebasestorage.app",messagingSenderId:"685861735336",appId:"1:685861735336:web:2fe57826d8b92d1355ab9d",measurementId:"G-7J8J9NJTFX"}};var PR=yc(ef.firebaseConfig),FQ=Yh(PR),OR=Sc(PR);var kR=(n,e)=>{let t=N(Rt),r=N(At);return sh(OR).pipe($t(1),Q(i=>i?!0:(r.navigate(["/login"]),!1)))};var qR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Te(qs),Te(Di))}}static{this.\u0275dir=nt({type:n})}}return n})(),kH=(()=>{class n extends qR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=nt({type:n,features:[Kt]})}}return n})(),OI=new U("");var FH={provide:OI,useExisting:_n(()=>zo),multi:!0};function LH(){let n=Yn()?Yn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var VH=new U(""),zo=(()=>{class n extends qR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!LH())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Te(qs),Te(Di),Te(VH,8))}}static{this.\u0275dir=nt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ft("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Vr([FH]),Kt]})}}return n})();function ii(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function zR(n){return n!=null&&typeof n.length=="number"}var Go=new U(""),kI=new U(""),jH=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,hn=class{static min(e){return UH(e)}static max(e){return BH(e)}static required(e){return GR(e)}static requiredTrue(e){return $H(e)}static email(e){return WR(e)}static minLength(e){return KR(e)}static maxLength(e){return HH(e)}static pattern(e){return qH(e)}static nullValidator(e){return nf(e)}static compose(e){return eM(e)}static composeAsync(e){return nM(e)}};function UH(n){return e=>{if(ii(e.value)||ii(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function BH(n){return e=>{if(ii(e.value)||ii(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function GR(n){return ii(n.value)?{required:!0}:null}function $H(n){return n.value===!0?null:{required:!0}}function WR(n){return ii(n.value)||jH.test(n.value)?null:{email:!0}}function KR(n){return e=>ii(e.value)||!zR(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function HH(n){return e=>zR(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function qH(n){if(!n)return nf;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ii(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function nf(n){return null}function QR(n){return n!=null}function YR(n){return Ci(n)?we(n):n}function JR(n){let e={};return n.forEach(t=>{e=t!=null?F(F({},e),t):e}),Object.keys(e).length===0?null:e}function ZR(n,e){return e.map(t=>t(n))}function zH(n){return!n.validate}function XR(n){return n.map(e=>zH(e)?e:t=>e.validate(t))}function eM(n){if(!n)return null;let e=n.filter(QR);return e.length==0?null:function(t){return JR(ZR(t,e))}}function tM(n){return n!=null?eM(XR(n)):null}function nM(n){if(!n)return null;let e=n.filter(QR);return e.length==0?null:function(t){let r=ZR(t,e).map(YR);return fp(r).pipe(Q(JR))}}function rM(n){return n!=null?nM(XR(n)):null}function FR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function iM(n){return n._rawValidators}function sM(n){return n._rawAsyncValidators}function AI(n){return n?Array.isArray(n)?n:[n]:[]}function rf(n,e){return Array.isArray(n)?n.includes(e):n===e}function LR(n,e){let t=AI(e);return AI(n).forEach(i=>{rf(t,i)||t.push(i)}),t}function VR(n,e){return AI(e).filter(t=>!rf(n,t))}var sf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ts=class extends sf{get formDirective(){return null}get path(){return null}},ns=class extends sf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},of=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},GH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},uY=le(F({},GH),{"[class.ng-submitted]":"isSubmitted"}),df=(()=>{class n extends of{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Te(ns,2))}}static{this.\u0275dir=nt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Yl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Kt]})}}return n})(),oM=(()=>{class n extends of{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Te(ts,10))}}static{this.\u0275dir=nt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Yl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Kt]})}}return n})();var tu="VALID",tf="INVALID",$o="PENDING",nu="DISABLED",si=class{},af=class extends si{constructor(e,t){super(),this.value=e,this.source=t}},ru=class extends si{constructor(e,t){super(),this.pristine=e,this.source=t}},iu=class extends si{constructor(e,t){super(),this.touched=e,this.source=t}},Ho=class extends si{constructor(e,t){super(),this.status=e,this.source=t}},RI=class extends si{constructor(e){super(),this.source=e}},MI=class extends si{constructor(e){super(),this.source=e}};function FI(n){return(hf(n)?n.validators:n)||null}function WH(n){return Array.isArray(n)?tM(n):n||null}function LI(n,e){return(hf(e)?e.asyncValidators:n)||null}function KH(n){return Array.isArray(n)?rM(n):n||null}function hf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function aM(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[t])throw new H(1001,"")}function cM(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new H(1002,"")})}var qo=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ai(()=>this.statusReactive()),this.statusReactive=Dn(void 0),this._pristine=Ai(()=>this.pristineReactive()),this.pristineReactive=Dn(!0),this._touched=Ai(()=>this.touchedReactive()),this.touchedReactive=Dn(!1),this._events=new Xe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return bn(this.statusReactive)}set status(e){bn(()=>this.statusReactive.set(e))}get valid(){return this.status===tu}get invalid(){return this.status===tf}get pending(){return this.status==$o}get disabled(){return this.status===nu}get enabled(){return this.status!==nu}get pristine(){return bn(this.pristineReactive)}set pristine(e){bn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return bn(this.touchedReactive)}set touched(e){bn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(LR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(LR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VR(e,this._rawAsyncValidators))}hasValidator(e){return rf(this._rawValidators,e)}hasAsyncValidator(e){return rf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new iu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new iu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ru(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ru(!0,r))}markAsPending(e={}){this.status=$o;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ho(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(F({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=nu,this.errors=null,this._forEachChild(i=>{i.disable(le(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new af(this.value,r)),this._events.next(new Ho(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=tu,this._forEachChild(r=>{r.enable(le(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tu||this.status===$o)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new af(this.value,t)),this._events.next(new Ho(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(F({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nu:tu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=$o,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=YR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ho(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ne,this.statusChanges=new Ne}_calculateStatus(){return this._allControlsDisabled()?nu:this.errors?tf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($o)?$o:this._anyControlsHaveStatus(tf)?tf:tu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ru(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new iu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=WH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=KH(this._rawAsyncValidators)}},cf=class extends qo{constructor(e,t,r){super(FI(t),LI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){cM(this,!0,e),Object.keys(e).forEach(r=>{aM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var NI=class extends cf{};var ff=new U("CallSetDisabledState",{providedIn:"root",factory:()=>pf}),pf="always";function uM(n,e){return[...e.path,n]}function xI(n,e,t=pf){VI(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),YH(n,e),ZH(n,e),JH(n,e),QH(n,e)}function jR(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),lf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function uf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QH(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function VI(n,e){let t=iM(n);e.validator!==null?n.setValidators(FR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=sM(n);e.asyncValidator!==null?n.setAsyncValidators(FR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();uf(e._rawValidators,i),uf(e._rawAsyncValidators,i)}function lf(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=iM(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=sM(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return uf(e._rawValidators,r),uf(e._rawAsyncValidators,r),t}function YH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&lM(n,e)})}function JH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&lM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function lM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ZH(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function XH(n,e){n==null,VI(n,e)}function eq(n,e){return lf(n,e)}function dM(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function tq(n){return Object.getPrototypeOf(n.constructor)===kH}function nq(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function hM(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===zo?t=s:tq(s)?r=s:i=s}),i||r||t||null}function rq(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function UR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function BR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var su=class extends qo{constructor(e=null,t,r){super(FI(t),LI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(BR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){UR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){UR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){BR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var iq=n=>n instanceof su;var sq={provide:ns,useExisting:_n(()=>jI)},$R=Promise.resolve(),jI=(()=>{class n extends ns{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new su,this._registered=!1,this.name="",this.update=new Ne,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=hM(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),dM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){$R.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&zs(r);$R.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?uM(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Te(ts,9),Te(Go,10),Te(kI,10),Te(OI,10),Te(Si,8),Te(ff,8))}}static{this.\u0275dir=nt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vr([sq]),Kt,Wn]})}}return n})(),fM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=nt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var pM=new U("");var oq={provide:ts,useExisting:_n(()=>UI)},UI=(()=>{class n extends ts{get submitted(){return bn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Ai(()=>this._submittedReactive()),this._submittedReactive=Dn(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ne,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return xI(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){jR(t.control||null,t,!1),rq(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),nq(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new RI(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new MI(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(jR(r||null,t),iq(i)&&(xI(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);XH(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&eq(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){VI(this.form,this),this._oldForm&&lf(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(Te(Go,10),Te(kI,10),Te(ff,8))}}static{this.\u0275dir=nt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Ft("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vr([oq]),Kt,Wn]})}}return n})();var aq={provide:ns,useExisting:_n(()=>BI)},BI=(()=>{class n extends ns{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Ne,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=hM(this,s)}ngOnChanges(t){this._added||this._setUpControl(),dM(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return uM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Te(ts,13),Te(Go,10),Te(kI,10),Te(OI,10),Te(pM,8))}}static{this.\u0275dir=nt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Vr([aq]),Kt,Wn]})}}return n})();function cq(n){return typeof n=="number"?n:parseInt(n,10)}var $I=(()=>{class n{constructor(){this._validator=nf}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):nf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=nt({type:n,features:[Wn]})}}return n})();var uq={provide:Go,useExisting:_n(()=>HI),multi:!0};var HI=(()=>{class n extends $I{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=zs,this.createValidator=t=>GR}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=nt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Fa("required",i._enabled?"":null)},inputs:{required:"required"},features:[Vr([uq]),Kt]})}}return n})();var lq={provide:Go,useExisting:_n(()=>qI),multi:!0},qI=(()=>{class n extends $I{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=zs,this.createValidator=t=>WR}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=nt({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[Vr([lq]),Kt]})}}return n})(),dq={provide:Go,useExisting:_n(()=>zI),multi:!0},zI=(()=>{class n extends $I{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>cq(t),this.createValidator=t=>KR(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=nt({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Fa("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[Vr([dq]),Kt]})}}return n})();var gM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wn({type:n})}static{this.\u0275inj=In({})}}return n})(),PI=class extends qo{constructor(e,t,r){super(FI(t),LI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){cM(this,!1,e),e.forEach((r,i)=>{aM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function HR(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var gf=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return HR(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new cf(i,s)}record(t,r=null){let i=this._reduceControls(t);return new NI(i,r)}control(t,r,i){let s={};return this.useNonNullable?(HR(r)?s=r:(s.validators=r,s.asyncValidators=i),new su(t,le(F({},s),{nonNullable:!0}))):new su(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new PI(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof su)return t;if(t instanceof qo)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mf=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ff,useValue:t.callSetDisabledState??pf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wn({type:n})}static{this.\u0275inj=In({imports:[gM]})}}return n})(),mM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:pM,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ff,useValue:t.callSetDisabledState??pf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wn({type:n})}static{this.\u0275inj=In({imports:[gM]})}}return n})();function hq(n,e){n&1&&(G(0,"div",10)(1,"label",11),ue(2,"Username"),q(),Re(3,"input",17),q())}function fq(n,e){n&1&&(G(0,"p",15)(1,"a",18),ue(2,"Forgot password?"),q()())}function pq(n,e){n&1&&(G(0,"div")(1,"p",19),ue(2,"Don't have an account? "),G(3,"a",20),ue(4,"Sign Up"),q()()())}var Wo=class n{isLoginOpen=!0;formSubmitted=new Ne;fb=N(gf);form=this.fb.nonNullable.group({username:["",hn.required],email:["",[hn.required,hn.email]],password:["",hn.required]});onSubmit(){this.form.valid&&this.formSubmitted.emit(this.form.getRawValue())}ngOnInit(){this.isLoginOpen&&(this.form.get("username")?.clearValidators(),this.form.get("username")?.updateValueAndValidity())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-log-register-form"]],inputs:{isLoginOpen:"isLoginOpen"},outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[Ke],decls:25,vars:6,consts:[[1,"vh-100","gradient-custom"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","bg-dark","text-white",2,"border-radius","1rem","border","6px solid white"],[1,"card-body","p-5","text-center"],[1,"mb-md-5","mt-md-4","pb-5"],[1,"fw-bold","mb-2","text-uppercase"],[1,"text-white-50","mb-5"],[3,"ngSubmit","formGroup"],["data-mdb-input-init","",1,"form-outline","form-white","mb-4"],["for","typeEmailX",1,"form-label"],["type","email","id","typeEmailX","formControlName","email","required","","email","",1,"form-control","form-control-lg"],["for","typePasswordX",1,"form-label"],["type","password","id","typePasswordX","formControlName","password","required","","minlength","8",1,"form-control","form-control-lg"],[1,"small","mb-5","pb-lg-2"],["data-mdb-button-init","","data-mdb-ripple-init","","type","submit",1,"btn","btn-outline-light","btn-lg","px-5"],["type","username","id","typeUsernameX","formControlName","username","required","",1,"form-control","form-control-lg"],["href","#!",1,"text-white-50"],[1,"mb-0"],["href","#!",1,"text-white-50","fw-bold"]],template:function(t,r){t&1&&(G(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),ue(8),q(),G(9,"p",8),ue(10,"Please enter your login and password!"),q(),G(11,"form",9),Ft("ngSubmit",function(){return r.onSubmit()}),kt(12,hq,4,0,"div",10),G(13,"div",10)(14,"label",11),ue(15,"Email"),q(),Re(16,"input",12),q(),G(17,"div",10)(18,"label",13),ue(19,"Password"),q(),Re(20,"input",14),q(),kt(21,fq,3,0,"p",15),G(22,"button",16),ue(23),q()()(),kt(24,pq,5,0,"div"),q()()()()()()),t&2&&(xe(8),Lr(r.isLoginOpen?"Login":"Register"),xe(3),bi("formGroup",r.form),xe(),Qt(r.isLoginOpen?-1:12),xe(9),Qt(r.isLoginOpen?21:-1),xe(2),Lr(r.isLoginOpen?"Login":"Register"),xe(),Qt(r.isLoginOpen?24:-1))},dependencies:[on,mM,fM,zo,df,oM,HI,zI,qI,UI,BI,mf],styles:[".gradient-custom[_ngcontent-%COMP%]{background:linear-gradient(to right,#0b90dd,#f7f7f7)}"]})};function gq(n,e){if(n&1&&(G(0,"div"),ue(1),q()),n&2){let t=Kn();xe(),Lr(t.errorMessage)}}var yf=class n{isLoginOpen=!0;fb=N(gf);httpClient=N(Im);router=N(At);authService=N(Rt);form=this.fb.nonNullable.group({username:["",hn.required],email:["",hn.required],password:["",hn.required]});errorMessage=null;onSubmit(e){this.authService.login(e.email,e.password).subscribe({next:()=>{this.router.navigateByUrl("/")},error:t=>{this.errorMessage=t.code}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-login"]],standalone:!0,features:[Ke],decls:2,vars:2,consts:[[3,"formSubmitted","isLoginOpen"]],template:function(t,r){t&1&&(G(0,"app-log-register-form",0),Ft("formSubmitted",function(s){return r.onSubmit(s)}),q(),kt(1,gq,2,1,"div")),t&2&&(bi("isLoginOpen",!0),xe(),Qt(r.errorMessage?1:-1))},dependencies:[Wo]})};function mq(n,e){if(n&1&&(G(0,"div"),ue(1),q()),n&2){let t=Kn();xe(),Lr(t.errorMessage)}}var vf=class n{authService=N(Rt);router=N(At);errorMessage=null;onSubmit(e){this.authService.register(e.email,e.username??"",e.password).subscribe({next:()=>{this.router.navigateByUrl("/")},error:t=>{this.errorMessage=t.code}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-register"]],standalone:!0,features:[Ke],decls:2,vars:2,consts:[[3,"formSubmitted","isLoginOpen"]],template:function(t,r){t&1&&(G(0,"app-log-register-form",0),Ft("formSubmitted",function(s){return r.onSubmit(s)}),q(),kt(1,mq,2,1,"div")),t&2&&(bi("isLoginOpen",!1),xe(),Qt(r.errorMessage?1:-1))},dependencies:[on,Wo]})};var _f=class n{firestore=N(pr);authService=N(Rt);addSubject(e){return _(this,null,function*(){let t=this.authService.getUser();if(!t)throw new Error("User not logged in");let r=Xc(this.firestore,"subjects");yield RR(r,{name:e.name,subjectType:e.subjectType,ownerId:t.uid})})}getSubjects(){return this.authService.userChanges().pipe(tt(e=>{if(!e)return W([]);let t=Xc(this.firestore,"subjects"),r=NR(t,xR("ownerId","==",e.uid));return Zh(r,{idField:"id"})}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var yq=(n,e)=>e.name;function vq(n,e){if(n&1&&(G(0,"li",8)(1,"a",9)(2,"span",10),ue(3),q(),G(4,"span",11),ue(5),q()()()),n&2){let t=e.$implicit;xe(3),Ti("",t.name," "),xe(2),Ti("(",t.subjectType,")")}}function _q(n,e){if(n&1&&Jl(0,vq,6,2,"li",8,yq),n&2){let t=Kn();Zl(t.subjects())}}function Iq(n,e){n&1&&(G(0,"li",8)(1,"span",12),ue(2,"Brak przedmiot\xF3w."),q()())}var If=class n{subjectService=N(_f);newSubjectName="";newSubjectType="";subjects=eu(this.subjectService.getSubjects(),{initialValue:[]});addSubject(){return _(this,null,function*(){let e=this.newSubjectName.trim(),t=this.newSubjectType.trim();!e||!t||(yield this.subjectService.addSubject({name:e,subjectType:t}),this.newSubjectName="",this.newSubjectType="")})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-subject"]],standalone:!0,features:[Ke],decls:15,vars:3,consts:[[1,"d-flex","flex-column","p-3","text-white","bg-dark",2,"width","280px","height","100vh"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"mb-2"],["type","text","placeholder","Subject name",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"mb-3"],["type","text","placeholder","Subject type",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"nav","nav-pills","flex-column","mb-auto"],[1,"nav-item"],["href","#",1,"nav-link","text-white"],[1,"fs-4","text-white"],[1,"text-secondary"],[1,"text-white"]],template:function(t,r){t&1&&(Re(0,"app-header"),G(1,"div",0)(2,"h4",1)(3,"span"),ue(4,"Subjects"),q(),G(5,"button",2),Ft("click",function(){return r.addSubject()}),ue(6,"+"),q()(),G(7,"div",3)(8,"input",4),ed("ngModelChange",function(s){return om(r.newSubjectName,s)||(r.newSubjectName=s),s}),q()(),G(9,"div",5)(10,"input",6),ed("ngModelChange",function(s){return om(r.newSubjectType,s)||(r.newSubjectType=s),s}),q()(),G(11,"ul",7),kt(12,_q,2,0)(13,Iq,3,0,"li",8),q()(),Re(14,"app-footer")),t&2&&(xe(8),Xl("ngModel",r.newSubjectName),xe(2),Xl("ngModel",r.newSubjectType),xe(2),Qt(r.subjects()&&r.subjects().length>0?12:13))},dependencies:[on,mf,zo,df,jI,mo,yo]})};var vM=[{path:"",pathMatch:"full",redirectTo:"main"},{path:"main",component:Xh,canActivate:[kR]},{path:"login",component:yf},{path:"register",component:vf},{path:"subjects",component:If},{path:"**",redirectTo:"auth"}];var _M={providers:[GC(vM,JC()),C0(()=>S0(ef.firebaseConfig)),CS(()=>AS()),AR(()=>MR()),KT()]};var wf=class n{authService=N(Rt);ngOnInit(){this.authService.user$.subscribe(e=>{e?this.authService.currentUserSig.set({uid:e.uid,email:e.email,username:e.displayName}):this.authService.currentUserSig.set(null),console.log(this.authService.currentUserSig())})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-root"]],standalone:!0,features:[Ke],decls:1,vars:0,template:function(t,r){t&1&&Re(0,"router-outlet")},dependencies:[sy,on]})};nC(wf,_M).catch(n=>console.error(n));
